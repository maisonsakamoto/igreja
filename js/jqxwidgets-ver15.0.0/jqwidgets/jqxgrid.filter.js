!function(a){a.extend(a.jqx._jqxGrid.prototype,{_updatefilterrowui:function(f){var m=this.columns.records.length,e=0,l=this;if(this.filterrow){for(var i=0;i<m;i++){var g=this.columns.records[i],c=parseInt(g.width);c<g.minwidth&&(c=g.minwidth),c>g.maxwidth&&(c=g.maxwidth);var k=a(this.filterrow[0].cells[i]);k.css("left",e);var h=!0;if(k.width()==c&&(h=!1),f&&(h=!0),k.width(c),k[0]&&(k[0].left=e,g.element&&(k[0].style.width=g.element.style.width,k[0].style.left=g.element.style.left),g.hidden&&g.hideable?k.css("display","none"):e+=c,h))if(g.createfilterwidget&&"custom"==g.filtertype)g.createfilterwidget(g,k);else if(g.filterable){var d=function(n,o){var j=a(o.children()[0]);j[0]&&(j[0].style.width=c-8+"px",a.jqx.browser.msie&&(j[0].style.width=c-16+"px")),j.attr("disabled",n.disabled)};switch(g.filtertype){case"number":case"input":a(k.children()[0]).width(c),k.find("input")[0].style.width=c-30+"px",a.jqx.browser.msie&&(k.find("input")[0].style.width=c-36+"px"),k.find("input").attr("disabled",l.disabled),a(k.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({theme:l.theme,disabled:l.disabled});break;case"date":case"range":this.host.jqxDateTimeInput?a(k.children()[0]).jqxDateTimeInput({theme:l.theme,disabled:l.disabled,width:c-10}):d(this,k);break;case"textbox":case"default":d(this,k);break;case"list":case"checkedlist":this.host.jqxDropDownList?a(k.children()[0]).jqxDropDownList({theme:l.theme,disabled:l.disabled,width:c-10}):d(this,k);break;case"bool":case"boolean":this.host.jqxCheckBox?a(k.children()[0]).jqxCheckBox({theme:l.theme,disabled:l.disabled}):d(this,k)}}}var b=a(this.filterrow.children()[0]);b.width(parseInt(e)+2),b.height(this.filterrowheight)}},clearfilterrow:function(d){if(this._disablefilterrow=!0,this.columns.records){for(var m=this.columns.records.length,i=0;i<m;i++){var f=this.columns.records[i],l=a(this.filterrow[0].cells[i]);if(("string"!=typeof d||f.displayfield==d)&&f.filterable){var c=function(o,p){var j=a(p.children()[0]);j.val(""),j[0]&&(o["_oldWriteText"+j[0].id]="")};switch(f.filtertype){case"number":case"input":if(l.find("input").val(""),this.host.jqxDropDownList){var k=a(a(a(l).children()[0]).children()[1]);k.jqxDropDownList("clearSelection");var g=0;if(0==g){this._getfiltersbytype("number"==f.filtertype?"number":"string");var h=(new a.jqx.filter).getoperatorsbyfiltertype("number"==f.filtertype?"numberfilter":"stringfilter");null!=f.filtercondition?-1==(g=h.indexOf(f.filtercondition.toUpperCase()))&&(g="number"==f.filtertype?0:2):g="number"==f.filtertype?0:2}k.jqxDropDownList({selectedIndex:g}),k.jqxDropDownList("ensureVisible",g)}break;case"date":case"range":this.host.jqxDateTimeInput?a(l.children()[0]).jqxDateTimeInput("setDate",null):c(this,l);break;case"textbox":case"default":c(this,l);break;case"list":this.host.jqxDropDownList?a(l.children()[0]).jqxDropDownList("clearSelection"):c(this,l);break;case"checkedlist":this.host.jqxDropDownList?a(l.children()[0]).jqxDropDownList("checkAll",!1):c(this,l);break;case"bool":case"boolean":this.host.jqxCheckBox?a(l.children()[0]).jqxCheckBox({checked:null}):c(this,l)}}}this._disablefilterrow=!1}},_applyfilterfromfilterrow:function(){if(1!=this._disablefilterrow&&!this.disabled){for(var A=this.columns.records.length,E=this.that,u=0;u<A;u++){var l=new a.jqx.filter,v=this.columns.records[u];if(v.filterable&&null!==v.datafield){var f=E._getcolumntypebydatafield(v),d=E._getfiltertype(f),F=!0,C=(v.filtertype,function(j,M,J){var i=!0;if(j._filterwidget){var H=j._filterwidget.val();if(""!=H){var K="equal";if("stringfilter"==M)K="contains";if("numericfilter"==M&&","==E.gridlocalization.decimalseparator&&H.indexOf(E.gridlocalization.decimalseparator)>=0&&(H=H.replace(E.gridlocalization.decimalseparator,".")),"stringfilter"!=M){var L=0;if(-1!=H.indexOf(">")&&(K="greater_than",L=1),-1!=H.indexOf("<")&&(K="less_than",L=1),-1!=H.indexOf("=")&&("greater_than"==K?(K="greater_than_or_equal",L=2):"less_than"==K?(K="less_than_or_equal",L=2):(K="equal",L=1)),0!=L&&(H=H.substring(L)).length<1)return!1}if(null!=j.filtercondition&&(K=j.filtercondition),"datefilter"==M)var I=J.createfilter(M,H,K,null,j.cellsformat,E.gridlocalization);else I=J.createfilter(M,H,K);J.addfilter(1,I)}else i=!1}return i});switch(v.filtertype){case"range":case"date":if(v._filterwidget.jqxDateTimeInput)if("range"==v.filtertype)if(null!=(q=v._filterwidget.jqxDateTimeInput("getRange"))&&null!=q.from&&null!=q.to){var p="GREATER_THAN_OR_EQUAL";(s=new Date(0)).setHours(0),s.setMinutes(0),s.setFullYear(q.from.getFullYear(),q.from.getMonth(),q.from.getDate());var r=new Date(0);r.setHours(0),r.setMinutes(0),r.setFullYear(q.to.getFullYear(),q.to.getMonth(),q.to.getDate()),r.setHours(q.to.getHours()),r.setMinutes(q.to.getMinutes()),r.setSeconds(q.to.getSeconds());var z=l.createfilter(d,s,p);l.addfilter(0,z);var y=l.createfilter(d,r,"LESS_THAN_OR_EQUAL");l.addfilter(0,y)}else F=!1;else if(null!=(q=v._filterwidget.jqxDateTimeInput("getDate"))){var s;(s=new Date(0)).setHours(0),s.setMinutes(0),s.setFullYear(q.getFullYear(),q.getMonth(),q.getDate()),v._filterwidget.jqxDateTimeInput("showTimeButton")&&(s.setHours(q.getHours()),s.setMinutes(q.getMinutes()));p="EQUAL";null!=v.filtercondition&&(p=v.filtercondition);z=l.createfilter(d,s,p);v._filterwidget.jqxDateTimeInput("showTimeButton")&&(z=l.createfilter(d,s,p,null,v.cellsformat)),l.addfilter(0,z)}else F=!1;else F=C(v,d,l);break;case"input":if(v._filterwidget){var q=v._filterwidget.find("input").val(),k=v._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),x=l.getoperatorsbyfiltertype(d)[k];if(E.updatefilterconditions){null!=(G=E.updatefilterconditions(d,l.getoperatorsbyfiltertype(d)))&&l.setoperatorsbyfiltertype(d,G);x=l.getoperatorsbyfiltertype(d)[k]}var o="NULL"==x||"NOT_NULL"==x,t="EMPTY"==x||"NOT_EMPTY"==x;null!=q&&q.length>0||o||t?(z=l.createfilter(d,q,x,null,v.cellsformat,E.gridlocalization),l.addfilter(0,z)):F=!1}else F=!1;break;case"number":if(v._filterwidget){q=v._filterwidget.find("input").val();","==E.gridlocalization.decimalseparator&&q.indexOf(E.gridlocalization.decimalseparator)>=0&&(q=q.replace(E.gridlocalization.decimalseparator,"."));k=v._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),x=l.getoperatorsbyfiltertype(d)[k];if(E.updatefilterconditions){var G;null!=(G=E.updatefilterconditions(d,l.getoperatorsbyfiltertype(d)))&&l.setoperatorsbyfiltertype(d,G);x=l.getoperatorsbyfiltertype(d)[k]}o="NULL"==x||"NOT_NULL"==x,t="EMPTY"==x||"NOT_EMPTY"==x;null!=q&&q.length>0||o||t?(z=l.createfilter(d,new Number(q),x,null,v.cellsformat,E.gridlocalization),l.addfilter(0,z)):F=!1}else F=!1;break;case"textbox":case"default":F=C(v,d,l);break;case"bool":case"boolean":if(v._filterwidget.jqxCheckBox)if(null!=(q=v._filterwidget.jqxCheckBox("checked"))){p="equal";var n=l.createfilter(d,q,p);l.addfilter(1,n)}else F=!1;else F=C(v,d,l);break;case"list":if((g=v._filterwidget.jqxDropDownList("listBox")).selectedIndex>=0){var b=g.getSelectedItem(),B=(q=b.label,b.value);p="equal";""===q&&(p="NULL");n=l.createfilter(d,q,p);l.addfilter(1,n),B!==q&&(n.data=B)}else F=!1;break;case"checkedlist":if(v._filterwidget.jqxDropDownList){var g,D=(g=v._filterwidget.jqxDropDownList("listBox")).getCheckedItems();if(0==D.length){for(var w=1;w<g.items.length;w++){q=g.items[w].label,B=g.items[w].value,p="not_equal";""===q&&(p="NOT_NULL");n=l.createfilter(d,q,p);B!==q&&(n.data=B),l.addfilter(0,n)}F=!0}else if(D.length!=g.items.length)for(w=0;w<D.length;w++){q=D[w].label,B=D[w].value,p="equal";""===q&&(p="NULL");n=l.createfilter(d,q,p);B!==q&&(n.data=B),l.addfilter(1,n)}else F=!1}else F=C(v,d,l)}this._loading||(F?this.addfilter(v.displayfield,l,!1):this.removefilter(v.displayfield,!1))}}this._loading||this.applyfilters("filterrow")}},_updatefilterrow:function(){var b=a('<div style="position: relative;" id="row00'+this.element.id+'"></div>'),f=0,o=this.columns.records.length,m=this.toThemeProperty("jqx-grid-cell");m+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),m+=" "+this.toThemeProperty("jqx-grid-cell-filter-row");var r=o+10,s=new Array,n=this.that;this.filterrow[0].cells=s,b.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(b),this._filterrowcache||(this._filterrowcache=new Array),this._initcolumntypes();for(var g=!1,d=new Array,q=document.createDocumentFragment(),h=0;h<o;h++){var e=this.columns.records[h],c=e.width;c<e.minwidth&&(c=e.minwidth),c>e.maxwidth&&(c=e.maxwidth);var l=document.createElement("div");l.style.overflow="hidden",l.style.position="absolute",l.style.height="100%",l.className=m,l=a(l),q.appendChild(l[0]),l[0].style.left=f+"px",this.rtl?(l.css("z-index",r++),l.css("border-left-width","1px")):l.css("z-index",r--),"auto"==c&&(c=0),l[0].style.width=parseFloat(c)+"px",l[0].left=f,e.hidden&&e.hideable?l.css("display","none"):f+=c,s[s.length]=l[0];var k=!0;if(this.rtl){if(this.groupable){p=this.showrowdetailscolumn&&this.rowdetails?1:0;this.groups.length+p+h>o-1&&(k=!1)}this.showrowdetailscolumn&&this.rowdetails&&h==o-1&&(k=!1)}else{if(this.groupable){var p=this.showrowdetailscolumn&&this.rowdetails?1:0;this.groups.length+p>h&&(k=!1)}this.showrowdetailscolumn&&this.rowdetails&&0==h&&(k=!1)}if(k)if("custom"==e.filtertype&&e.createfilterwidget){e.createfilterwidget(e,l,(function(){n._applyfilterfromfilterrow()}))}else e.filterable&&(this._filterrowcache[e.datafield]?(g=!0,l.append(this._filterrowcache[e.datafield]),e._filterwidget=this._filterrowcache[e.datafield]):(this._addfilterwidget(e,l,c),d[e.datafield]=e._filterwidget))}b[0].appendChild(q),this._filterrowcache=d,a.jqx.browser.msie&&a.jqx.browser.version<8&&b.css("z-index",r--),b.width(parseFloat(f)+2),this.filterrow.addClass(m),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),g&&this._updatefilterrowui(!0)},_getfilterdataadapter:function(b){if(!!this.source._source){var e={localdata:a.extend(!0,{},this.source.records),datatype:this.source.datatype,async:!1},d=this;f=new a.jqx.dataAdapter(e,{autoBind:!1,autoSort:!0,autoSortField:b.displayfield,async:!1,uniqueDataFields:[b.displayfield],beforeLoadComplete:function(g){var l=new Array;if(b.cellsformat){for(var k=d._getcolumntypebydatafield(b),h=0;h<g.length;h++){l.push(g[h]);var j=g[h][b.displayfield];g[h][b.displayfield+"JQValue"]=j,"date"===k?g[h][b.displayfield]=null!=j?f.formatDate(j,b.cellsformat,d.gridlocalization):"":"number"!==k&&"float"!==k&&"int"!==k||(g[h][b.displayfield]=null!=j?f.formatNumber(j,b.cellsformat,d.gridlocalization):"")}return l}return g}})}else var f=new a.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[b.displayfield],autoSort:!0,autoSortField:b.displayfield,async:!1});if(b.filteritems&&b.filteritems.length>0)e={localdata:b.filteritems,datatype:this.source.datatype,async:!1},f=new a.jqx.dataAdapter(e,{autoBind:!1,async:!1});else if(b.filteritems){if(b.filteritems._source)return b.filteritems._options.autoBind=!1,b.filteritems._options.async=!1,b.filteritems;if(a.isFunction(b.filteritems))return b.filteritems()}return f},refreshfilterrow:function(){if(this.showfilterrow){this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0);for(var h=this.that,l=this.columns.records.length,d=0;d<l;d++){var c=this.columns.records[d];if(c.filterable&&c.filter){var b=c.filter.getfilters();if(b.length>0){var k=b[0].value,e=c._filterwidget,f=c._filterwidget.parent();if(null!=e)switch(c.filtertype){case"number":if(f.find("input").val(k),this.host.jqxDropDownList){var i=c.filter.getoperatorsbyfiltertype("numericfilter");e.find(".filter").jqxDropDownList("selectIndex",i.indexOf(b[0].condition))}break;case"input":if(f.find("input").val(k),this.host.jqxDropDownList){i=c.filter.getoperatorsbyfiltertype("stringfilter");e.find(".filter").jqxDropDownList("selectIndex",i.indexOf(b[0].condition))}break;case"date":case"range":if(this.host.jqxDateTimeInput){if(null!=(k=c.filter.getfilterat(0).filtervalue)){if(c.filter.getfilterat(1))var g=c.filter.getfilterat(1).filtervalue;else g=k;"range"==c.filtertype?a(f.children()[0]).jqxDateTimeInput("setRange",new Date(k),new Date(g)):a(f.children()[0]).jqxDateTimeInput("setDate",new Date(k))}}else e.val(k);break;case"textbox":case"default":e.val(k),h["_oldWriteText"+e[0].id]=k;break;case"bool":case"boolean":this.host.jqxCheckBox?a(f.children()[0]).jqxCheckBox({checked:k}):e.val(k)}}}}this.refreshingfilter=!1}},_destroyedfilters:function(){this.that;for(var b=this.columns.records.length,f=0;f<b;f++){var c=this.columns.records[f];if(c.filterable){var h=c._filterwidget;if("list"==c.filtertype||"checkedlist"==c.filtertype)this.removeHandler(h,"select"),this.removeHandler(h,"close"),h.jqxDropDownList("destroy");else if("date"==c.filtertype||"range"==c.filtertype)this.removeHandler(h,"valueChanged"),h.jqxDateTimeInput("destroy");else if("bool"==c.filtertype)this.removeHandler(h,"change"),h.jqxCheckBox("destroy");else if("number"==c.filtertype||"input"===c.filtertype){var d=h.find(".jqx-input");this.removeHandler(d,"keydown"),a(h.children()[1]).jqxDropDownList("destroy")}else this.removeHandler(h,"keydown");h.remove()}}},_updatelistfilters:function(l,k){for(var v=this.that,t=this.columns.records.length,p=0;p<t;p++){var q=this.columns.records[p];if(q.filterable&&("list"==q.filtertype||"checkedlist"==q.filtertype)){var h=q._filterwidget;if(l){var e=this._getfilterdataadapter(q);h.jqxDropDownList({source:e});var o=!0;if((d=h.jqxDropDownList("getItems")).length!=e.records.length+1&&(o=!1),o)for(var s=1;s<d.length;s++)if(d[s].label!=e.records[s-1][q.displayfield]){o=!1;break}if(o&&!k)continue}else if(null==q.filter){h.jqxDropDownList("renderSelection");continue}var m="checkedlist"==q.filtertype,d=h.jqxDropDownList("getItems"),b=h.jqxDropDownList("listBox");if(h.jqxDropDownList("dataBind"),m){h.jqxDropDownList({selectionRenderer:function(){return v.gridlocalization.filterselectstring}}),null==b.getItem(this.gridlocalization.filterselectallstring)&&b.insertAt({label:this.gridlocalization.filterselectallstring},0);var n=a('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+this.gridlocalization.filterselectstring+"</span>");if(n.addClass(this.toThemeProperty("jqx-item")),h.jqxDropDownList("setContent",n),b.checkAll(!1),q.filter){var g=q.filter.getfilters();for(s=0;s<b.items.length;s++){var f=b.items[s].label,r=void 0;a.each(g,(function(){var i;"NOT_EQUAL"==this.condition?i=f!=this.value:"EQUAL"==this.condition&&(i=f==this.value),r=null==r&&void 0!==i?i:"EQUAL"==this.condition?r||i:r&&i})),r?b.checkIndex(s,!1,!1):b.uncheckIndex(s,!1,!1)}b._updateCheckedItems();var u=b.getCheckedItems().length;b.items.length!=u&&u>0&&b.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else if(null==b.getItem(this.gridlocalization.filterchoosestring)&&b.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),h.jqxDropDownList({selectedIndex:0}),q.filter){g=q.filter.getfilters();var c=-1;for(s=0;s<b.items.length;s++){f=b.items[s].label;a.each(g,(function(){return"NOT_EQUAL"==this.condition||(f==this.value?(c=s,!1):void 0)}))}-1!=c&&b.selectIndex(c)}d.length<8?h.jqxDropDownList("autoDropDownHeight",!0):h.jqxDropDownList("autoDropDownHeight",!1)}}},_renderfilter:function(){var f=this,g=a("<div style='display: flex; height: calc(100% - 10px); margin-top: 5px; align-items: center; position: relative; margin-left: 4px;'><input style='width: 200px; height: 100%; direction: ltr;' role='textbox' type='text'/><div style='cursor: pointer; height: 100%;'><div></div></div></div>"),m=g.find("input"),e=g.find("div:first");g.addClass(this.toThemeProperty("jqx-rc-all")),g.addClass(this.toThemeProperty("jqx-widget")),g.addClass(this.toThemeProperty("jqx-input-group")),m.addClass(this.toThemeProperty("jqx-input")),m.addClass(this.toThemeProperty("jqx-rc-l")),m.addClass(this.toThemeProperty("jqx-input-group-addon")),m.addClass(this.toThemeProperty("jqx-widget")),m.addClass(this.toThemeProperty("jqx-widget-content")),e.addClass(this.toThemeProperty("jqx-fill-state-normal")),e.addClass(this.toThemeProperty("jqx-rc-r")),e.addClass(this.toThemeProperty("jqx-input-group-addon")),e.find("div").addClass(this.toThemeProperty("jqx-icon-search")),this.rtl&&(m.addClass(this.toThemeProperty("jqx-rtl")),m.css("direction","rtl")),this.filterbar.children().remove(),this.filterbutton=e;for(var c=new Array,d=0;d<f.columns.records.length;d++)f.columns.records[d].datafield&&f.columns.records[d].filterable&&c.push({label:f.columns.records[d].text,value:f.columns.records[d].displayfield});var n=c.length<10,j=a("<div style='position: relative;  display: none; margin-right: 4px; margin-left: 4px; float: left;'>"+this.gridlocalization.filtersearchstring+"</div>");this.filterbar.append(j);var b=a("<div class='filtercolumns' style='position: relative; margin-top:5px; margin-left:4px; margin-right: 4px; float: left;'></div>");this.filterbar.append(b),b.jqxDropDownList&&b.jqxDropDownList({theme:this.theme,enableBrowserBoundsDetection:!0,autoDropDownHeight:n,rtl:f.rtl,dropDownWidth:220,selectedIndex:0,width:"auto",height:25,source:c,displayMember:"label",valueMember:"value"}),this.filtercolumnsList=b,m[0].parentElement.insertBefore(j[0],m[0]);var l=function(o){f.filterinput.val("");for(var p=0;p<f.dataview.filters.length;p++){var q=f.dataview.filters[p];q.datafield===o&&f.filterinput.val(q.filter.getfilterat(0).filtervalue)}};f.filterHeight,f._updateSimpleFilter=l,this.addHandler(b,"select",(function(o){var i=o.args.item.value;l(i)})),"simple"===this.filterbarmode?(this.filtercolumnsList.hide(),j.show()):(this.filtercolumnsList.show(),j.hide());var k=function(){if(!e.hasClass("jqx-fill-state-disabled")){var p=m.val();if(b.jqxDropDownList)var s=b.jqxDropDownList("getSelectedItem");var u=function(z,v,i){var y=new a.jqx.filter,x=f._getcolumnbydatafield(z),A=f._getfiltertype(x);if("datefilter"==A)var w=y.createfilter(A,v,"EQUAL",null,z.cellsFormat,f.gridlocalization);else if("numericfilter"==A||"booleanfilter"==A){"numericfilter"==A&&(","==f.gridlocalization.decimalseparator&&v.indexOf(f.gridlocalization.decimalseparator)>=0&&(v=v.replace(f.gridlocalization.decimalseparator,".")),v.indexOf(f.gridlocalization.currencysymbol)>=0&&(v=v.replace(f.gridlocalization.currencysymbol,"")),v.indexOf(f.gridlocalization.percentagesymbol)>=0&&(v=v.replace(f.gridlocalization.percentagesymbol,"")));w=y.createfilter(A,v,"EQUAL",null,z.cellsFormat,f.gridlocalization)}else w=y.createfilter(A,v,"CONTAINS");return y.operator=i,y.addfilter(0,w),y};if("simple"!==f.filterbarmode){if(s){var t=s.value,r=u(t,p,"and");p.length>0?(f.removefilter(t),f.addfilter(t,r),f.applyfilters()):(f.removefilter(t),f.applyfilters())}}else{if(f.clearfilters(!1,!1),p.length>0)for(var o=0;o<f.columns.records.length;o++){var q=f.columns.records[o];r=u(q,p,"or");f.addfilter(q.datafield,r)}f.applyfilters()}0==f.dataview.filters.length?f.filtericon.fadeOut(200):f.filtericon.fadeIn(200)}};m.keydown((function(i){if(13===i.keyCode)return k(),i.preventDefault&&i.preventDefault(),!1})),e.click((function(){k()})),this.filterinput=m,this.filterbar.append(g);var h=a("<div style='float: left; width: 16px; height: 16px; position: relative; margin: 3px;'></div>");h.attr("title",f.gridlocalization.filterclearstring),h.addClass(f.toThemeProperty("jqx-icon-close")),g.append(h),h.hide(),f.filtericon=h,h.click((function(){f.clearfilters(),m.val(""),f.filtericon.fadeOut(200)})),f.dataview.filters.length>0&&l(f.dataview.filters[0].datafield)},_renderfiltercolumn:function(){var b=this.that;if(this.filterable){if(!this.columns.records)return;a.each(this.columns.records,(function(d,e){var c=!1;b.autoshowfiltericon?this.filter?(a(this.filtericon).show(),c=!0):a(this.filtericon).hide():this.filterable&&(a(this.filtericon).show(),c=!0),this.element.removeAttribute("filter"),c&&this.element.setAttribute("filter",!0),"right"!=this.align||this.renderer||this.element&&(this.element.firstChild.firstChild.style.marginRight=c?"18px":"2px")}))}},_initcolumntypes:function(){if(this.columns&&this.columns.records){var b=this.source._source.datafields;if(b)for(var c=0;c<this.columns.records.length;c++){var d=this.columns.records[c];if(!d.datatype){var e="";a.each(b,(function(){if(this.name==d.displayfield)return this.type&&(e=this.type),!1})),d.datatype=""!=e?e:""}}}},_getcolumntypebydatafield:function(f){var g=this.that,e="string",d=g.source.datafields||(g.source._source?g.source._source.datafields:null);if(d){var i="";if(a.each(d,(function(){if(this.name==f.displayfield)return this.type&&(i=this.type),!1})),i)return i}if(null!=f){if(null==this.dataview.cachedrecords)return e;var b=null;if(this.virtualmode)a.each(this.dataview.cachedrecords,(function(){return b=this[f.displayfield],!1}));else{if(0==this.dataview.cachedrecords.length)return e;if(null!=(b=this.dataview.cachedrecords[0][f.displayfield])&&""==b.toString())return"string"}if(null!=b)if("boolean"==typeof b)e="boolean";else if(a.jqx.dataFormat.isNumber(b))e="number";else{var h=new Date(b);if("NaN"==h.toString()||"Invalid Date"==h.toString())if(a.jqx.dataFormat){if(null!=(h=a.jqx.dataFormat.tryparsedate(b))){if(h&&h.getFullYear()&&1970==h.getFullYear()&&0==h.getMonth()&&1==h.getDate()){var c=new Number(b);return isNaN(c)?"string":"number"}return"date"}e="string"}else e="string";else e="date"}}return e},_getfiltersbytype:function(b){var c=this.that,d="";switch(b){case"number":case"float":case"int":d=c.gridlocalization.filternumericcomparisonoperators;break;case"date":d=c.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":d=c.gridlocalization.filterbooleancomparisonoperators;break;default:d=c.gridlocalization.filterstringcomparisonoperators}return d},_getfiltertype:function(b){var c="stringfilter";switch(b){case"number":case"int":case"float":case"decimal":c="numericfilter";break;case"boolean":case"bool":c="booleanfilter";break;case"date":case"time":case"range":c="datefilter";break;case"string":case"input":c="stringfilter"}return c},_buildfilter:function(r,l,F){var f=a(l).find(".filter1"),G=a(l).find(".filter2"),K=a(l).find(".filter3"),k=a(l).find(".filtertext1"+r.element.id),j=a(l).find(".filtertext2"+r.element.id),A=k.val(),z=j.val(),M=r._getcolumntypebydatafield(F),J=(r._getfiltersbytype(M),new a.jqx.filter),w=r._getfiltertype(M);if("default"===r.filtermode&&"list"!==F.filtertype&&"checkedlist"!==F.filtertype){var E=f.jqxDropDownList("selectedIndex"),c=G.jqxDropDownList("selectedIndex"),D=K.jqxDropDownList("selectedIndex"),e=null,d=null;if(r.updatefilterconditions){var p=r.updatefilterconditions(w,J.getoperatorsbyfiltertype(w));null!=p&&J.setoperatorsbyfiltertype(w,p)}var q=!1,L=J.getoperatorsbyfiltertype(w)[E],v=(K=J.getoperatorsbyfiltertype(w)[D],"NULL"==L||"NOT_NULL"==L),h="EMPTY"==L||"NOT_EMPTY"==L;null==L&&(L=J.getoperatorsbyfiltertype(w)[0]),null==K&&(K=J.getoperatorsbyfiltertype(w)[0]),(A.length>0||v||h)&&(e=J.createfilter(w,A,L,null,F.cellsformat,r.gridlocalization),J.addfilter(c,e),q=!0);var u="NULL"==K||"NOT_NULL"==K,g="EMPTY"==K||"NOT_EMPTY"==K;if((z.length>0||u||g)&&(d=J.createfilter(w,z,K,null,F.cellsformat,r.gridlocalization),J.addfilter(c,d),q=!0),q){var C=F.displayfield;this.addfilter(C,J,!0)}else this._clearfilter(r,l,F)}else if("excel"===r.filtermode||"list"===F.filtertype||"checkedlist"===F.filtertype){var n=!1,x=f.data().jqxListBox.instance,I="excel"===this.filtermode||"checkedlist"===F.filtertype,o=x.getCheckedItems();if(!I)o=x.getSelectedItems();if(0==o.length){for(var H=1;H<x.items.length;H++){void 0===(m=x.items[H].value)&&(m="");var b="not_equal";if(m&&m.indexOf&&(m.indexOf("|")>=0||m.indexOf(" AND ")>=0||m.indexOf(" OR ")>=0||m.indexOf(" and ")>=0||m.indexOf(" or ")>=0)){m=(m=(m=(m=(m=m.replace("|","")).replace("AND","")).replace("OR","")).replace("and","")).replace("or","");b="equal"}if("datefilter"==w)var y=J.createfilter(w,m,b,null,F.cellsformat,r.gridlocalization);else y=J.createfilter(w,m,b,null);J.addfilter(0,y)}n=!0}else if(o.length!=x.items.length){n=!0;for(H=0;H<o.length;H++)if(r.gridlocalization.filterselectallstring!==o[H].value){var m;void 0===(m=o[H].value)&&(m="");b="equal";if("datefilter"==w)y=J.createfilter(w,m,b,null,F.cellsformat,r.gridlocalization);else y=J.createfilter(w,m,b,null);J.addfilter(1,y)}}else n=!1;if(n){C=F.displayfield;this.addfilter(C,J,!0)}else{C=F.displayfield;this.removefilter(C,!0)}}},_clearfilter:function(e,c,d){var b=d.displayfield;this.removefilter(b,!0)},addfilter:function(d,e,c){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var f=this.getcolumn(d),b=this._getcolumn(d);null!=f&&null!=f&&(f.filter=e,b&&(b.filter=e),this.dataview.addfilter(d,e),1==c&&null!=c&&this.applyfilters("add"))},removefilter:function(d,c){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var e=this.getcolumn(d),b=this._getcolumn(d);null!=e&&null!=e&&null!=e.filter&&(this.dataview.removefilter(d,e.filter),e.filter=null,b.filter=null,this.showfilterrow&&this.clearfilterrow(d),1!=c&&!1===c||this.applyfilters("remove"))},applyfilters:function(f){if(this.dataview.filters.length>=0&&(this.virtualmode||!this.source.localdata)&&null!=this.source&&this.source.filter){var g=-1;this.pageable?(g=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.pageable&&this.virtualmode&&(this.dataview.pagenum=0),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&!this.virtualmode&&(this.dataview.pagenum=g)}if(this._cellscache=new Array,this.dataview.clearsortdata&&this.dataview.clearsortdata(),this.virtualmode)return this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&"string"!=typeof f&&a.isEmptyObject(f)&&this.refreshfilterrow(),this._postrender("filter"),void this._raiseEvent(13,{filters:this.dataview.filters});this.selectedrowindexes,this.that;if(this.dataview.refresh(),this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection){var e=this.sortdirection.ascending?"asc":"desc";this._loading?this.sortby(this.sortcolumn,e,null,!1,!1):this.sortby(this.sortcolumn,e,null,!1)}this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&0==this.groups.length?(this._rowdetailscache=new Array,this.virtualsizeinfo=null,this._pagescache=new Array,this.columns&&this.columns.records&&this.columns.records.length>0&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this._postrender("filter")):(this.collapseallgroups(),this._rowdetailscache=new Array,this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this._postrender("filter")),this.showfilterrow&&"string"!=typeof f&&a.isEmptyObject(f)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){for(var d=new Array,b=0;b<this.dataview.filters.length;b++){var c=this.getcolumn(this.dataview.filters[b].datafield);d[b]={filter:this.dataview.filters[b].filter,datafield:c.datafield,displayfield:c.displayfield,filtercolumn:c.datafield,filtercolumntext:c.text}}return d},clearfilters:function(b){var d=this.that;if(this.showfilterrow&&this.clearfilterrow(),this.columns.records){var c=1==b||!1!==b;a.each(this.columns.records,(function(){d.removefilter(this.displayfield,!c)}))}!1!==b&&(1!=b&&!1===b||this.applyfilters("clear"))},_updatefilterpanel:function(s,p,E){null!=s&&null!=s||(s=this);var Q=s._getcolumntypebydatafield(E),u=s._getfiltersbytype(Q);if(!s.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");s.filterpanel.detach(),s.excelfilterpanel.detach(),E.filterpanel&&E.filterpanel.detach(),a(p).children().detach();var k=a(s.menuitemsarray[6]);if(a(k).css("height","190px"),E.createfilterpanel&&!E.filterpanel){var K=a("<div class='filter' style='margin-left: 7px;'></div>");a(p).append(K),E.createfilterpanel(E.displayfield,K),E.filterpanel=K}"list"===E.filtertype||"checkedlist"===E.filtertype?a(p).append(s.excelfilterpanel):"custom"!==E.filtertype?a(p).append(s.filterpanel):E.filterpanel&&a(p).append(E.filterpanel);var g=a(p),N=g.find("#filterclearbutton"+s.element.id),l=g.find("#filterbutton"+s.element.id),f=g.find(".filter1"),m=g.find(".filter2"),P=g.find(".filter3"),j=g.find(".filtertext1"+s.element.id),h=g.find(".filtertext2"+s.element.id);if(this._hasdatefilter&&"list"!==E.filtertype&&"checkedlist"!==E.filtertype&&"custom"!==E.filtertype){var e=j.parent(),d=h.parent();if(e.children().remove(),d.children().remove(),"date"==E.filtertype){s._showwhere.text(s.gridlocalization.filtershowrowdatestring);var b=a("<div class='filtertext1"+s.element.id+"' style=''></div>");e.append(b),(n=function(c){var i={calendar:s.gridlocalization,todayString:s.gridlocalization.todaystring,clearString:s.gridlocalization.clearstring};c.jqxDateTimeInput({disabled:s.disabled,firstDayOfWeek:s.gridlocalization.firstDay,localization:i,rtl:s.rtl,width:s._filterpanelwidth-10,height:this.filterMenuItemsHeight,value:null,formatString:E.cellsformat,theme:s.theme})})(b);b=a("<div class='filtertext2"+s.element.id+"' style=''></div>");d.append(b),n(b)}else{s._showwhere.text(s.gridlocalization.filtershowrowstring);var n;b=a("<input autocomplete='off' class='filtertext1"+s.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>");e.append(b),(n=function(c){c.addClass(s.toThemeProperty("jqx-input")),c.addClass(s.toThemeProperty("jqx-filter-input jqx-widget-content")),c.addClass(s.toThemeProperty("jqx-rc-all")),c.width(s._filterpanelwidth-18),c[0].style.height=this.filterMenuItemsHeight+"px"})(b);b=a("<input autocomplete='off' class='filtertext2"+s.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>");d.append(b),n(b)}j=g.find(".filtertext1"+s.element.id),h=g.find(".filtertext2"+s.element.id)}if("date"!=E.filtertype?(j.val(""),h.val("")):(j.val(null),h.val(null)),this.removeHandler(l,"click"),this.addHandler(l,"click",(function(){s._buildfilter(s,p,E),s._closemenu()})),this.removeHandler(N,"click"),this.addHandler(N,"click",(function(){s._clearfilter(s,p,E),s._closemenu()})),this.removeHandler(l,"keydown"),this.addHandler(l,"keydown",(function(c){13===c.keyCode&&(s._buildfilter(s,p,E),s._closemenu())})),this.removeHandler(N,"keydown"),this.addHandler(N,"keydown",(function(c){13===c.keyCode&&(s._clearfilter(s,p,E),s._closemenu())})),this.removeHandler(j,"keydown"),this.addHandler(j,"keydown",(function(c){13===c.keyCode&&l.trigger("click"),27===c.keyCode&&s._closemenu()})),this.removeHandler(h,"keydown"),this.addHandler(h,"keydown",(function(c){13===c.keyCode&&l.trigger("click"),27===c.keyCode&&s._closemenu()})),"default"===this.filtermode&&"list"!==E.filtertype&&"checkedlist"!==E.filtertype&&"custom"!==E.filtertype){if(f.jqxDropDownList("source")!=u&&(f.jqxDropDownList({enableBrowserBoundsDetection:!1,source:u}),P.jqxDropDownList({enableBrowserBoundsDetection:!1,source:u})),"boolean"==Q||"bool"==Q)f.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),P.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0});else{var H=!1;u&&u.length&&u.length<5&&(H=!0),f.jqxDropDownList({autoDropDownHeight:H,selectedIndex:2}),P.jqxDropDownList({autoDropDownHeight:H,selectedIndex:2})}m.jqxDropDownList({selectedIndex:0});var z=E.filter,M=new a.jqx.filter,x="";switch(Q){case"number":case"int":case"float":case"decimal":x="numericfilter",o=M.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":x="booleanfilter",o=M.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":x="datefilter",o=M.getoperatorsbyfiltertype("datefilter");break;case"string":x="stringfilter",o=M.getoperatorsbyfiltertype("stringfilter")}if(null!=z){e=z.getfilterat(0),d=z.getfilterat(1),z.getoperatorat(0);if(s.updatefilterconditions){var o=[],r=s.updatefilterconditions(x,o);if(null!=r){for(var O=0;O<r.length;O++)r[O]=r[O].toUpperCase();z.setoperatorsbyfiltertype(x,r),o=r}}var w="default";if(null!=e){var D=o.indexOf(e.comparisonoperator),A=e.filtervalue;j.val(A),f.jqxDropDownList({selectedIndex:D,animationType:w})}if(null!=d){var C=o.indexOf(d.comparisonoperator),y=d.filtervalue;h.val(y),P.jqxDropDownList({selectedIndex:C,animationType:w})}null==z.getoperatorat(0)?m.jqxDropDownList({selectedIndex:0,animationType:w}):"and"==z.getoperatorat(0)||0==z.getoperatorat(0)?m.jqxDropDownList({selectedIndex:0}):m.jqxDropDownList({selectedIndex:1})}s.updatefilterpanel&&s.updatefilterpanel(f,P,m,j,h,l,N,z,x,o),(!this._hasdatefilter||this._hasdatefilter&&"date"!=E.filtertype)&&(this.touchdevice||(j.focus(),setTimeout((function(){j.focus()}),10)))}else if("excel"===this.filtermode||"list"===E.filtertype||"checkedlist"===E.filtertype){var v=s._getfilterdataadapter(E),L=(x=s._getfiltertype(Q),"excel"===this.filtermode||"checkedlist"===E.filtertype);if("date"==E.filtertype&&s._showwhere.text(s.gridlocalization.filtershowrowstring),f.jqxListBox("focus"),this.removeHandler(f,"keyup"),this.addHandler(f,"keyup",(function(c){13===c.keyCode&&l.trigger("click"),27===c.keyCode&&s._closemenu()})),E.cellsformat?f.jqxListBox({checkboxes:L,displayMember:E.displayfield,valueMember:E.displayfield+"JQValue",source:v}):f.jqxListBox({checkboxes:L,displayMember:E.displayfield,valueMember:E.displayfield,source:v}),L){f.jqxListBox("insertAt",{label:s.gridlocalization.filterselectallstring},0),(F=f.data().jqxListBox.instance).checkAll(!1);if(E.filter){F.uncheckAll(!1);for(var t=E.filter.getfilters(),J=0;J<F.items.length;J++){var G=F.items[J].value;a.each(t,(function(){if("NOT_EQUAL"==this.condition){if(G!=this.value)return F.uncheckIndex(J,!1,!1),!1;if(null!=G&&null!=this.value&&G.toString()!=this.value.toString())return F.uncheckIndex(J,!1,!1),!1}else if("EQUAL"==this.condition){if(G==this.value)return F.checkIndex(J,!1,!1),!1;if(null!=G&&null!=this.value&&G.toString()==this.value.toString())return F.checkIndex(J,!1,!1),!1}}))}F._updateCheckedItems();var q=F.getCheckedItems().length;F.items.length!=q&&q>0&&F.host.jqxListBox("indeterminateIndex",0,!0,!1),q===F.items.length-1&&F.host.jqxListBox("checkIndex",0,!0,!1)}}else if(E.filter){var F;(F=f.data().jqxListBox.instance).clearSelection();for(t=E.filter.getfilters(),J=0;J<F.items.length;J++){G=F.items[J].value;a.each(t,(function(){if("NOT_EQUAL"==this.condition){if(G!=this.value)return F.unselectIndex(J,!1,!1),!1}else if("EQUAL"==this.condition&&G==this.value)return F.selectIndex(J,!0,!1),!1}))}F._renderItems()}}},_initfilterpanel:function(z,b,c,p,w){null!=z&&null!=z||(z=this),b[0].innerHTML="";var t=a("<div class='filter' style='position: absolute; bottom: 3px; margin-left: 3px;'></div>");b.append(t);var n=a("<div class='filter showwhere' style='height: 18px; margin-top: 3px; margin-bottom: 3px;'></div>");n.text(z.gridlocalization.filtershowrowstring),this._showwhere=n;var o=w?"ex":"",v=a("<div class='filter filter1' id='filter1"+z.element.id+o+"'></div>"),h=a("<div class='filter filter2' id='filter2"+z.element.id+o+"' style='margin-top: 3px; margin-bottom: 3px;'></div>"),s=a("<div class='filter filter3' id='filter3"+z.element.id+o+"'></div>"),e=z._getcolumntypebydatafield(c);if(!v.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");var q=z._getfiltersbytype(e);if(this._hasdatefilter=!1,this._filterpanelwidth=p,this.columns&&this.columns.records){for(var u=0;u<this.columns.records.length;u++)if("date"==this.columns.records[u].filtertype){this._hasdatefilter=!0;break}}else if(this.columns&&!this.columns.records)for(u=0;u<this.columns.length;u++)if("date"==this.columns[u].filtertype){this._hasdatefilter=!0;break}var k=a("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext1"+z.element.id+"' style='padding: 3px; height: 17px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"),m=k.find("input");m.addClass(this.toThemeProperty("jqx-input")),m.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),m.addClass(this.toThemeProperty("jqx-rc-all")),m.width(p-18);var l=a("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext2"+z.element.id+"' style='padding: 3px; height: 17px; margin-top: 3px;' type='text'></input></div>"),j=l.find("input");j.addClass(this.toThemeProperty("jqx-input")),j.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),j.addClass(this.toThemeProperty("jqx-rc-all")),j.width(p-18),z.rtl&&(m.css("direction","rtl"),j.css("direction","rtl"));var g=a("<div class='filter' style='height: 35px; text-align:center; margin-top: 15px; margin-left:-2px;'></div>"),f=a('<span tabIndex=0 id="filterbutton'+z.element.id+'" class="primary filterbutton" style="padding: 6px 15px;">'+z.gridlocalization.filterstring+"</span>");g.append(f);var x=a('<span tabIndex=0 id="filterclearbutton'+z.element.id+'" class="secondary filterclearbutton" style="position: relative; left: 1px; padding: 6px 15px; margin-left: 7px;">'+z.gridlocalization.filterclearstring+"</span>");g.append(x),f.jqxButton({height:this.filterMenuItemsHeight,theme:z.theme}),x.jqxButton({height:this.filterMenuItemsHeight,theme:z.theme});var y=function(A){if(A){if(-1!=A.text().indexOf("case sensitive")){var i=A.text();i=i.replace("case sensitive","match case"),A.text(i)}return A.css("font-family",z.host.css("font-family")),A.css("font-size",z.host.css("font-size")),A.css("top","2px"),A.css("position","relative"),A}return""};if("default"!==this.filtermode||w){if("excel"===this.filtermode||w){t.append(n),t.append(v),v.attr("tabindex",0),v.jqxListBox({rtl:z.rtl,_checkForHiddenParent:!1,checkboxes:!0,selectedIndex:2,width:p-10,height:130,theme:z.theme});var d=!0;z.addHandler(v,"checkChange",(function(B){if(d)if(B.args.label!=z.gridlocalization.filterselectallstring){d=!1,v.jqxListBox("checkIndex",0,!0,!1);var i=v.jqxListBox("getCheckedItems"),A=v.jqxListBox("getItems");1==i.length?v.jqxListBox("uncheckIndex",0,!0,!1):A.length!=i.length&&v.jqxListBox("indeterminateIndex",0,!0,!1),d=!0}else d=!1,B.args.checked?v.jqxListBox("checkAll",!1):v.jqxListBox("uncheckAll",!1),d=!0}))}}else{t.append(n),t.append(v),v.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:z.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:p-10,height:24,dropDownHeight:150,dropDownWidth:p-10,selectionRenderer:y,source:q,theme:z.theme}),t.append(k);var r=new Array;r[0]=z.gridlocalization.filterandconditionstring,r[1]=z.gridlocalization.filterorconditionstring,h.jqxDropDownList({_checkForHiddenParent:!1,rtl:z.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:24,source:r,selectionRenderer:y,theme:z.theme}),t.append(h),s.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:z.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:p-10,height:24,dropDownHeight:150,dropDownWidth:p-10,selectionRenderer:y,source:q,theme:z.theme}),t.append(s),t.append(l)}t.append(g),z.updatefilterpanel&&z.updatefilterpanel(v,s,h,k,l,f,x,null,null,q)}})}(jqxBaseFramework),function(a){a.extend(a.jqx._jqxGrid.prototype,{_updatefilterrowui:function(f){var m=this.columns.records.length,e=0,l=this;if(this.filterrow){for(var i=0;i<m;i++){var g=this.columns.records[i],c=parseInt(g.width);c<g.minwidth&&(c=g.minwidth),c>g.maxwidth&&(c=g.maxwidth);var k=a(this.filterrow[0].cells[i]);k.css("left",e);var h=!0;if(k.width()==c&&(h=!1),f&&(h=!0),k.width(c),k[0].left=e,g.element&&(k[0].style.width=g.element.style.width,k[0].style.left=g.element.style.left),g.hidden&&g.hideable?k.css("display","none"):e+=c,h)if(g.createfilterwidget&&"custom"==g.filtertype)g.createfilterwidget(g,k);else if(g.filterable){var d=function(n,o){var j=a(o.children()[0]);j[0]&&(j[0].style.width=c-8+"px",a.jqx.browser.msie&&(j[0].style.width=c-16+"px")),j.attr("disabled",n.disabled)};switch(g.filtertype){case"number":case"input":a(k.children()[0]).width(c),k.find("input")[0].style.width=c-30+"px",a.jqx.browser.msie&&(k.find("input")[0].style.width=c-36+"px"),k.find("input").attr("disabled",l.disabled),a(k.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({theme:l.theme,disabled:l.disabled});break;case"date":case"range":this.host.jqxDateTimeInput?a(k.children()[0]).jqxDateTimeInput({theme:l.theme,disabled:l.disabled,width:c-10}):d(this,k);break;case"textbox":case"default":d(this,k);break;case"list":case"checkedlist":this.host.jqxDropDownList?a(k.children()[0]).jqxDropDownList({theme:l.theme,disabled:l.disabled,width:c-10}):d(this,k);break;case"bool":case"boolean":this.host.jqxCheckBox?a(k.children()[0]).jqxCheckBox({theme:l.theme,disabled:l.disabled}):d(this,k)}}}var b=a(this.filterrow.children()[0]);b.width(parseInt(e)+2),b.height(this.filterrowheight)}},clearfilterrow:function(d){if(this._disablefilterrow=!0,this.columns.records){for(var m=this.columns.records.length,i=0;i<m;i++){var f=this.columns.records[i],l=a(this.filterrow[0].cells[i]);if(("string"!=typeof d||f.displayfield==d)&&f.filterable){var c=function(o,p){var j=a(p.children()[0]);j.val(""),j[0]&&(o["_oldWriteText"+j[0].id]="")};switch(f.filtertype){case"number":case"input":if(l.find("input").val(""),this.host.jqxDropDownList){var k=a(a(a(l).children()[0]).children()[1]);k.jqxDropDownList("clearSelection");var g=0;if(0==g){this._getfiltersbytype("number"==f.filtertype?"number":"string");var h=(new a.jqx.filter).getoperatorsbyfiltertype("number"==f.filtertype?"numberfilter":"stringfilter");null!=f.filtercondition?-1==(g=h.indexOf(f.filtercondition.toUpperCase()))&&(g="number"==f.filtertype?0:2):g="number"==f.filtertype?0:2}k.jqxDropDownList({selectedIndex:g}),k.jqxDropDownList("ensureVisible",g)}break;case"date":case"range":this.host.jqxDateTimeInput?a(l.children()[0]).jqxDateTimeInput("setDate",null):c(this,l);break;case"textbox":case"default":c(this,l);break;case"list":this.host.jqxDropDownList?a(l.children()[0]).jqxDropDownList("clearSelection"):c(this,l);break;case"checkedlist":this.host.jqxDropDownList?a(l.children()[0]).jqxDropDownList("checkAll",!1):c(this,l);break;case"bool":case"boolean":this.host.jqxCheckBox?a(l.children()[0]).jqxCheckBox({checked:null}):c(this,l)}}}this._disablefilterrow=!1}},_applyfilterfromfilterrow:function(){if(1!=this._disablefilterrow&&!this.disabled){for(var B=this.columns.records.length,F=this.that,v=0;v<B;v++){var l=new a.jqx.filter,w=this.columns.records[v];if(w.filterable&&null!==w.datafield){var f=F._getcolumntypebydatafield(w),d=F._getfiltertype(f),G=!0,D=(w.filtertype,function(j,N,K){var i=!0;if(j._filterwidget){var I=j._filterwidget.val();if(""!=I){var L="equal";if("stringfilter"==N)L="contains";if("numericfilter"==N&&","==F.gridlocalization.decimalseparator&&I.indexOf(F.gridlocalization.decimalseparator)>=0&&(I=I.replace(F.gridlocalization.decimalseparator,".")),"stringfilter"!=N){var M=0;if(-1!=I.indexOf(">")&&(L="greater_than",M=1),-1!=I.indexOf("<")&&(L="less_than",M=1),-1!=I.indexOf("=")&&("greater_than"==L?(L="greater_than_or_equal",M=2):"less_than"==L?(L="less_than_or_equal",M=2):(L="equal",M=1)),0!=M&&(I=I.substring(M)).length<1)return!1}if(null!=j.filtercondition&&(L=j.filtercondition),"datefilter"==N)var J=K.createfilter(N,I,L,null,j.cellsformat,F.gridlocalization);else J=K.createfilter(N,I,L);K.addfilter(1,J)}else i=!1}return i});switch(w.filtertype){case"range":case"date":if(w._filterwidget.jqxDateTimeInput)if("range"==w.filtertype)if(null!=(r=w._filterwidget.jqxDateTimeInput("getRange"))&&null!=r.from&&null!=r.to){var q="GREATER_THAN_OR_EQUAL";(t=new Date(0)).setHours(0),t.setMinutes(0),t.setFullYear(r.from.getFullYear(),r.from.getMonth(),r.from.getDate());var s=new Date(0);s.setHours(0),s.setMinutes(0),s.setFullYear(r.to.getFullYear(),r.to.getMonth(),r.to.getDate()),s.setHours(r.to.getHours()),s.setMinutes(r.to.getMinutes()),s.setSeconds(r.to.getSeconds());var A=l.createfilter(d,t,q);l.addfilter(0,A);var z=l.createfilter(d,s,"LESS_THAN_OR_EQUAL");l.addfilter(0,z)}else G=!1;else if(null!=(r=w._filterwidget.jqxDateTimeInput("getDate"))){var t;(t=new Date(0)).setHours(0),t.setMinutes(0),t.setFullYear(r.getFullYear(),r.getMonth(),r.getDate());var h=w._filterwidget.jqxDateTimeInput("showTimeButton");h&&(t.setHours(r.getHours()),t.setMinutes(r.getMinutes()));q="EQUAL";null!=w.filtercondition&&(q=w.filtercondition);A=l.createfilter(d,t,q);h&&(A=l.createfilter(d,t,q,null,w.cellsformat)),l.addfilter(0,A)}else G=!1;else G=D(w,d,l);break;case"input":if(w._filterwidget){var r=w._filterwidget.find("input").val(),k=w._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),y=l.getoperatorsbyfiltertype(d)[k];if(F.updatefilterconditions){null!=(H=F.updatefilterconditions(d,l.getoperatorsbyfiltertype(d)))&&l.setoperatorsbyfiltertype(d,H);y=l.getoperatorsbyfiltertype(d)[k]}var p="NULL"==y||"NOT_NULL"==y,u="EMPTY"==y||"NOT_EMPTY"==y;null!=r&&r.length>0||p||u?(A=l.createfilter(d,r,y,null,w.cellsformat,F.gridlocalization),l.addfilter(0,A)):G=!1}else G=!1;break;case"number":if(w._filterwidget){r=w._filterwidget.find("input").val();","==F.gridlocalization.decimalseparator&&r.indexOf(F.gridlocalization.decimalseparator)>=0&&(r=r.replace(F.gridlocalization.decimalseparator,"."));k=w._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),y=l.getoperatorsbyfiltertype(d)[k];if(F.updatefilterconditions){var H;null!=(H=F.updatefilterconditions(d,l.getoperatorsbyfiltertype(d)))&&l.setoperatorsbyfiltertype(d,H);y=l.getoperatorsbyfiltertype(d)[k]}p="NULL"==y||"NOT_NULL"==y,u="EMPTY"==y||"NOT_EMPTY"==y;null!=r&&r.length>0||p||u?(A=l.createfilter(d,new Number(r),y,null,w.cellsformat,F.gridlocalization),l.addfilter(0,A)):G=!1}else G=!1;break;case"textbox":case"default":G=D(w,d,l);break;case"bool":case"boolean":if(w._filterwidget.jqxCheckBox)if(null!=(r=w._filterwidget.jqxCheckBox("checked"))){q="equal";var o=l.createfilter(d,r,q);l.addfilter(1,o)}else G=!1;else G=D(w,d,l);break;case"list":if((g=w._filterwidget.jqxDropDownList("listBox")).selectedIndex>=0){var b=g.getSelectedItem(),n=(r=b.label,this.gridlocalization.filterchoosestring);if("Please Choose:"!==r&&r!==n){var C=b.value;q="equal";""===r&&(q="NULL");o=l.createfilter(d,r,q);l.addfilter(1,o),C!==r&&(o.data=C)}}else G=!1;break;case"checkedlist":if(w._filterwidget.jqxDropDownList){var g,E=(g=w._filterwidget.jqxDropDownList("listBox")).getCheckedItems();if(0==E.length){for(var x=1;x<g.items.length;x++){r=g.items[x].label,C=g.items[x].value,q="not_equal";""===r&&(q="NOT_NULL");o=l.createfilter(d,r,q);C!==r&&(o.data=C),l.addfilter(0,o)}G=!0}else if(E.length!=g.items.length)for(x=0;x<E.length;x++){r=E[x].label,C=E[x].value,q="equal";""===r&&(q="NULL");o=l.createfilter(d,r,q);C!==r&&(o.data=C),l.addfilter(1,o)}else G=!1}else G=D(w,d,l)}this._loading||(G?this.addfilter(w.displayfield,l,!1):this.removefilter(w.displayfield,!1))}}this._loading||this.applyfilters("filterrow")}},_updatefilterrow:function(){var b=a('<div style="position: relative;" id="row00'+this.element.id+'"></div>'),f=0,o=this.columns.records.length,m=this.toThemeProperty("jqx-grid-cell");m+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),m+=" "+this.toThemeProperty("jqx-grid-cell-filter-row");var r=o+10,s=new Array,n=this.that;this.filterrow[0].cells=s,b.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(b),this._filterrowcache||(this._filterrowcache=new Array),this._initcolumntypes();for(var g=!1,d=new Array,q=document.createDocumentFragment(),h=0;h<o;h++){var e=this.columns.records[h],c=e.width;c<e.minwidth&&(c=e.minwidth),c>e.maxwidth&&(c=e.maxwidth);var l=document.createElement("div");l.style.overflow="hidden",l.style.position="absolute",l.style.height="100%",l.className=m,l=a(l),q.appendChild(l[0]),l[0].style.left=f+"px",this.rtl?(l.css("z-index",r++),l.css("border-left-width","1px")):l.css("z-index",r--),"auto"==c&&(c=0),l[0].style.width=parseFloat(c)+"px",l[0].left=f,e.hidden&&e.hideable?l.css("display","none"):f+=c,s[s.length]=l[0];var k=!0;if(this.rtl){if(this.groupable){p=this.showrowdetailscolumn&&this.rowdetails?1:0;this.groups.length+p+h>o-1&&(k=!1)}this.showrowdetailscolumn&&this.rowdetails&&h==o-1&&(k=!1)}else{if(this.groupable){var p=this.showrowdetailscolumn&&this.rowdetails?1:0;this.groups.length+p>h&&(k=!1)}this.showrowdetailscolumn&&this.rowdetails&&0==h&&(k=!1)}if(k)if("custom"==e.filtertype&&e.createfilterwidget){e.createfilterwidget(e,l,(function(){n._applyfilterfromfilterrow()}))}else e.filterable&&(this._filterrowcache[e.datafield]?(g=!0,l.append(this._filterrowcache[e.datafield]),e._filterwidget=this._filterrowcache[e.datafield]):(this._addfilterwidget(e,l,c),d[e.datafield]=e._filterwidget))}b[0].appendChild(q),this._filterrowcache=d,a.jqx.browser.msie&&a.jqx.browser.version<8&&b.css("z-index",r--),b.width(parseFloat(f)+2),this.filterrow.addClass(m),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),g&&this._updatefilterrowui(!0)},_addfilterwidget:function(D,d,B){for(var I=this.that,s=this,A="",F="",G=0;G<I.dataview.filters.length;G++){var y=I.dataview.filters[G];if(y.datafield&&y.datafield==D.datafield){G=y.filter.getfilters()[0];A=G.value,"range"===D.filtertype&&(A={from:A,to:y.filter.getfilters()[1].value}),F=G.condition,D.filtercondition=F;break}}var K,L,J,g=function(J,K){var f=a('<input autocomplete="off" type="textarea"/>');f.attr("tabindex",5+D.visibleindex),f[0].id=a.jqx.utilities.createId(),f.addClass(J.toThemeProperty("jqx-widget")),f.addClass(J.toThemeProperty("jqx-filter-input jqx-input jqx-input-widget")),f.addClass(J.toThemeProperty("jqx-rc-all")),f.addClass(J.toThemeProperty("jqx-widget-content")),J.rtl&&f.css("direction","rtl"),J.disabled&&f.attr("disabled",!0),f.attr("disabled",!1),f.appendTo(K),f.css("margin","4px"),f.width(B-8),f.height(J.filterrowheight-9),D.createfilterwidget&&D.createfilterwidget(D,K,f),D._filterwidget=f,f.focus((function(){J.content[0].scrollLeft=0,setTimeout((function(){J.content[0].scrollLeft=0}),10),J.focusedfilter=f,f.addClass(J.toThemeProperty("jqx-fill-state-focus"))})),f.blur((function(){f.removeClass(J.toThemeProperty("jqx-fill-state-focus"))})),f.keydown((function(L){"13"==L.keyCode&&J._applyfilterfromfilterrow(),f[0]._writeTimer&&clearTimeout(f[0]._writeTimer),f[0]._writeTimer=setTimeout((function(){J._loading||(J["_oldWriteText"+f[0].id]||(J["_oldWriteText"+f[0].id]=""),(J["_oldWriteText"+f[0].id].length>0&&J["_oldWriteText"+f[0].id]!=f.val()||0==J["_oldWriteText"+f[0].id].length)&&(J._applyfilterfromfilterrow(),J["_oldWriteText"+f[0].id]=f.val()))}),D.filterdelay),J.focusedfilter=f})),J.host.removeClass("jqx-disableselect"),J.content.removeClass("jqx-disableselect"),f.val(A)};switch(null!=D.datatype&&("number"==D.filtertype&&("string"!=D.datatype&&"date"!=D.datatype&&"bool"!=D.datatype||(D.filtertype="textbox")),"date"==D.filtertype&&("string"!=D.datatype&&"number"!=D.datatype&&"bool"!=D.datatype||(D.filtertype="textbox")),"bool"==D.filtertype&&("string"!=D.datatype&&"number"!=D.datatype&&"date"!=D.datatype||(D.filtertype="textbox"))),D.filtertype){case"number":case"input":var m=a("<div></div>");m.width(d.width()),m.height(this.filterrowheight),d.append(m);B=d.width()-21;K=m,L=B,J=a('<input style="float: left;" autocomplete="off" type="textarea"/>'),I.rtl&&(J.css("float","right"),J.css("direction","rtl")),J.attr("tabindex",5+D.visibleindex),J[0].id=a.jqx.utilities.createId(),J.addClass(I.toThemeProperty("jqx-widget jqx-input jqx-rc-all jqx-input-widget jqx-filter-input jqx-widget-content")),J.appendTo(K),J.width(L-10),I.disabled&&J.attr("disabled",!0),J.attr("disabled",!1),J[0].style.height=I.filterrowheight-9+"px",J.css("margin","4px"),J.css("margin-right","3px"),J.focus((function(){I.focusedfilter=J,J.addClass(I.toThemeProperty("jqx-fill-state-focus"))})),J.blur((function(){J.removeClass(I.toThemeProperty("jqx-fill-state-focus"))})),J.keydown((function(M){"13"==M.keyCode&&I._applyfilterfromfilterrow(),"9"!=M.keyCode&&(J[0]._writeTimer&&clearTimeout(J[0]._writeTimer),J[0]._writeTimer=setTimeout((function(){I._loading||I["_oldWriteText"+J[0].id]!=J.val()&&(I._applyfilterfromfilterrow(),I["_oldWriteText"+J[0].id]=J.val())}),D.filterdelay),I.focusedfilter=J)})),J.val(A);var C=I._getfiltersbytype("number"==D.filtertype?"number":"string");(u=a("<div class='filter' style='float: left;'></div>")).css("margin-top","4px"),u.appendTo(m),I.rtl&&u.css("float","right");var h=0;if(null!=D.filtercondition)-1!=(e=(G=new a.jqx.filter).getoperatorsbyfiltertype("number"==D.filtertype?"numericfilter":"stringfilter").indexOf(D.filtercondition.toUpperCase()))&&(h=e);var e,E=180;if("input"==D.filtertype)if(E=240,0==h)h=-1!=(e=C.indexOf("contains")||2)&&null==D.filtercondition?e:-1;u.jqxDropDownList({disabled:I.disabled,touchMode:I.touchmode,rtl:I.rtl,dropDownHorizontalAlignment:"right",enableBrowserBoundsDetection:!0,selectedIndex:h,width:20,height:27,dropDownHeight:150,dropDownWidth:E,source:C,theme:I.theme}),u.jqxDropDownList({selectionRenderer:function(f){return""}}),u.attr("tabindex",5+D.visibleindex),u.jqxDropDownList("setContent",""),u.find(".jqx-dropdownlist-content").hide(),D.createfilterwidget&&D.createfilterwidget(D,d,m),D._filterwidget=m;var j=null;this.addHandler(u,"open",(function(){s._activeFilterElement=u})),this.addHandler(u,"select",(function(){var f=u.jqxDropDownList("getSelectedItem").label;D._filterwidget.find("input").val().length>0&&!I.refreshingfilter&&I._applyfilterfromfilterrow(),("input"!=D.filtertype||I.refreshingfilter)&&(0!=D._filterwidget.find("input").val().length||I.refreshingfilter||"null"!=j&&"not null"!=j&&"null"!=f&&"not null"!=f)||I._applyfilterfromfilterrow(),j=f}));break;case"textbox":case"default":default:g(this,d);break;case"none":break;case"date":case"range":if(this.host.jqxDateTimeInput){var b=a("<div></div>");b.css("margin","4px"),b.css("margin-left","5px"),b.appendTo(d);var n={calendar:this.gridlocalization,todayString:this.gridlocalization.todaystring,clearString:this.gridlocalization.clearstring};b.jqxDateTimeInput({firstDayOfWeek:this.gridlocalization.firstDay,readonly:!0,disabled:I.disabled,localization:n,rtl:I.rtl,showFooter:!0,formatString:D.cellsformat,selectionMode:D.filtertype,value:null,theme:this.theme,width:B-9,height:this.filterrowheight-9}),D.createfilterwidget&&D.createfilterwidget(D,d,b),A&&A.from?b.jqxDateTimeInput("setRange",A.from,A.to):A&&A.toString().length>1&&b.val(A),b.find("input").attr("tabindex",5+D.visibleindex),D._filterwidget=b,this.addHandler(b,"valueChanged",(function(f){I.refreshingfilter||(I._applyfilterfromfilterrow(),I.focusedfilter=null)}))}else g(this,d);break;case"list":case"checkedlist":if(this.host.jqxDropDownList){var l,u,q=this._getfilterdataadapter(D);(u=a("<div></div>")).css("margin","4px"),u.css("margin-left","5px");var v=D.datafield,w="checkedlist"==D.filtertype;E=B<150?220:"auto";q.dataBind();var k=q.records.length<8;l=k,u.appendTo(d),u.jqxDropDownList({hint:!1,placeHolder:I.gridlocalization.filterchoosestring,disabled:I.disabled,touchMode:I.touchmode,rtl:I.rtl,checkboxes:w,dropDownWidth:E,source:q.records,autoDropDownHeight:k,theme:this.theme,width:B-9,height:this.filterrowheight-9,displayMember:D.displayfield,valueMember:v}),u.attr("tabindex",5+D.visibleindex),u.attr("default-placeholder",!0),D.createfilterwidget&&D.createfilterwidget(D,d,u),this.addHandler(u,"open",(function(){s._activeFilterElement=u}));var c=u.jqxDropDownList("listBox");if(w){u.jqxDropDownList({selectionRenderer:function(){return'<span class="'+I.toThemeProperty("jqx-item")+'" style="top: 4px; position: relative; color: inherit; border: none; background-color: transparent;">'+I.gridlocalization.filterselectstring+"</span>"}});var z=a('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+I.gridlocalization.filterselectstring+"</span>");if(z.addClass(this.toThemeProperty("jqx-item")),null!=c){l||c.host.height(200),c.insertAt({label:I.gridlocalization.filterselectallstring},0),u.jqxDropDownList("setContent",z);var i=!0;new Array;c.checkAll(!1),I.addHandler(c.host,"checkChange",(function(K){if(u[0]._selectionChanged=!0,i)if(K.args.label!=I.gridlocalization.filterselectallstring){i=!1,c.host.jqxListBox("checkIndex",0,!0,!1);var f=c.host.jqxListBox("getCheckedItems"),J=c.host.jqxListBox("getItems");1==f.length?c.host.jqxListBox("uncheckIndex",0,!0,!1):J.length!=f.length&&c.host.jqxListBox("indeterminateIndex",0,!0,!1),i=!0}else i=!1,K.args.checked?c.host.jqxListBox("checkAll",!1):c.host.jqxListBox("uncheckAll",!1),i=!0}))}}else c.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),u.jqxDropDownList({selectedIndex:0});D._filterwidget=u;u.jqxDropDownList("dropdownlistWrapper");"list"==D.filtertype?this.addHandler(u,"select",(function(f){I.refreshingfilter||f.args&&"none"!=f.args.type&&(I._applyfilterfromfilterrow(),I.focusedfilter=null)})):this.addHandler(u,"close",(function(f){u[0]._selectionChanged&&(I._applyfilterfromfilterrow(),I.focusedfilter=null,u[0]._selectionChanged=!1)}))}else g(this,d);break;case"bool":case"boolean":if(this.host.jqxCheckBox){var x=a('<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -9px; margin-left: -12px;"></div>');x.appendTo(d),x.jqxCheckBox({disabled:I.disabled,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,hasThreeStates:!0,theme:this.theme,checked:null}),x.attr("tabindex",5+D.visibleindex),D.createfilterwidget&&D.createfilterwidget(D,d,x),!0===A||"true"==A?x.jqxCheckBox({checked:!0}):!1!==A&&"false"!=A||x.jqxCheckBox({checked:!1}),D._filterwidget=x,this.addHandler(x,"change",(function(f){I.refreshingfilter||f.args&&(I.focusedfilter=null,I._applyfilterfromfilterrow())}))}else g(this,d)}},_getfilterdataadapter:function(b){if(!!this.source._source){var e={localdata:a.extend(!0,{},this.source.records),datatype:this.source.datatype,async:!1},d=this;f=new a.jqx.dataAdapter(e,{autoBind:!1,autoSort:!0,autoSortField:b.displayfield,async:!1,uniqueDataFields:[b.displayfield],beforeLoadComplete:function(g){var l=new Array;if(b.cellsformat){for(var k=d._getcolumntypebydatafield(b),h=0;h<g.length;h++){l.push(g[h]);var j=g[h][b.displayfield];g[h][b.displayfield+"JQValue"]=j,"date"===k?g[h][b.displayfield]=null!=j?f.formatDate(j,b.cellsformat,d.gridlocalization):"":"number"!==k&&"float"!==k&&"int"!==k||(g[h][b.displayfield]=null!=j?f.formatNumber(j,b.cellsformat,d.gridlocalization):"")}return l}return g}})}else var f=new a.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[b.displayfield],autoSort:!0,autoSortField:b.displayfield,async:!1});if(b.filteritems&&b.filteritems.length>0)e={localdata:b.filteritems,datatype:this.source.datatype,async:!1},f=new a.jqx.dataAdapter(e,{autoBind:!1,async:!1});else if(b.filteritems){if(b.filteritems._source)return b.filteritems._options.autoBind=!1,b.filteritems._options.async=!1,b.filteritems;if(a.isFunction(b.filteritems))return b.filteritems()}return f},refreshfilterrow:function(){if(this.showfilterrow){this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0);for(var h=this.that,l=this.columns.records.length,d=0;d<l;d++){var c=this.columns.records[d];if(c.filterable&&c.filter){var b=c.filter.getfilters();if(b.length>0){var k=b[0].value,e=c._filterwidget,f=c._filterwidget.parent();if(null!=e)switch(c.filtertype){case"number":if(f.find("input").val(k),this.host.jqxDropDownList){var i=c.filter.getoperatorsbyfiltertype("numericfilter");e.find(".filter").jqxDropDownList("selectIndex",i.indexOf(b[0].condition))}break;case"input":if(f.find("input").val(k),this.host.jqxDropDownList){i=c.filter.getoperatorsbyfiltertype("stringfilter");e.find(".filter").jqxDropDownList("selectIndex",i.indexOf(b[0].condition))}break;case"date":case"range":if(this.host.jqxDateTimeInput){if(null!=(k=c.filter.getfilterat(0).filtervalue)){if(c.filter.getfilterat(1))var g=c.filter.getfilterat(1).filtervalue;else g=k;"range"==c.filtertype?a(f.children()[0]).jqxDateTimeInput("setRange",new Date(k),new Date(g)):a(f.children()[0]).jqxDateTimeInput("setDate",new Date(k))}}else e.val(k);break;case"textbox":case"default":e.val(k),h["_oldWriteText"+e[0].id]=k;break;case"bool":case"boolean":this.host.jqxCheckBox?a(f.children()[0]).jqxCheckBox({checked:k}):e.val(k)}}}}this.refreshingfilter=!1}},_destroyedfilters:function(){this.that;for(var b=this.columns.records.length,f=0;f<b;f++){var c=this.columns.records[f];if(c.filterable){var h=c._filterwidget;if("list"==c.filtertype||"checkedlist"==c.filtertype)this.removeHandler(h,"select"),this.removeHandler(h,"close"),h.jqxDropDownList("destroy");else if("date"==c.filtertype||"range"==c.filtertype)this.removeHandler(h,"valueChanged"),h.jqxDateTimeInput("destroy");else if("bool"==c.filtertype)this.removeHandler(h,"change"),h.jqxCheckBox("destroy");else if("number"==c.filtertype||"input"===c.filtertype){var d=h.find(".jqx-input");this.removeHandler(d,"keydown"),a(h.children()[1]).jqxDropDownList("destroy")}else this.removeHandler(h,"keydown");h.remove()}}},_updatelistfilters:function(l,k){for(var v=this.that,t=this.columns.records.length,p=0;p<t;p++){var q=this.columns.records[p];if(q.filterable&&("list"==q.filtertype||"checkedlist"==q.filtertype)){var h=q._filterwidget;if(l){var e=this._getfilterdataadapter(q);h.jqxDropDownList({source:e});var o=!0;if((d=h.jqxDropDownList("getItems")).length!=e.records.length+1&&(o=!1),o)for(var s=1;s<d.length;s++)if(d[s].label!=e.records[s-1][q.displayfield]){o=!1;break}if(o&&!k)continue}else if(null==q.filter){h.jqxDropDownList("renderSelection");continue}var m="checkedlist"==q.filtertype,d=h.jqxDropDownList("getItems"),b=h.jqxDropDownList("listBox");if(h.jqxDropDownList("dataBind"),m){h.jqxDropDownList({selectionRenderer:function(){return v.gridlocalization.filterselectstring}}),null==b.getItem(this.gridlocalization.filterselectallstring)&&b.insertAt({label:this.gridlocalization.filterselectallstring},0);var n=a('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+this.gridlocalization.filterselectstring+"</span>");if(n.addClass(this.toThemeProperty("jqx-item")),h.jqxDropDownList("setContent",n),b.checkAll(!1),q.filter){var g=q.filter.getfilters();for(s=0;s<b.items.length;s++){var f=b.items[s].label,r=void 0;a.each(g,(function(){var i;"NOT_EQUAL"==this.condition?i=f!=this.value:"EQUAL"==this.condition&&(i=f==this.value),r=null==r&&void 0!==i?i:"EQUAL"==this.condition?r||i:r&&i})),r?b.checkIndex(s,!1,!1):b.uncheckIndex(s,!1,!1)}b._updateCheckedItems();var u=b.getCheckedItems().length;b.items.length!=u&&u>0&&b.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else if(null==b.getItem(this.gridlocalization.filterchoosestring)&&b.items[0].label!==this.gridlocalization.filterchoosestring&&b.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),h.jqxDropDownList({selectedIndex:0}),q.filter){g=q.filter.getfilters();var c=-1;for(s=0;s<b.items.length;s++){f=b.items[s].label;a.each(g,(function(){return"NOT_EQUAL"==this.condition||(f==this.value?(c=s,!1):void 0)}))}-1!=c&&b.selectIndex(c)}d.length<8?h.jqxDropDownList("autoDropDownHeight",!0):h.jqxDropDownList("autoDropDownHeight",!1)}}},_renderfiltercolumn:function(){var b=this.that;if(this.filterable){if(!this.columns.records)return;a.each(this.columns.records,(function(d,e){var c=!1;b.autoshowfiltericon?this.filter?(a(this.filtericon).show(),c=!0):a(this.filtericon).hide():this.filterable&&(a(this.filtericon).show(),c=!0),this.element.removeAttribute("filter"),c&&this.element.setAttribute("filter",!0),"right"!=this.align||this.renderer||this.element&&(this.element.firstChild.firstChild.style.marginRight=c?"18px":"2px")}))}},_initcolumntypes:function(){if(this.columns&&this.columns.records){var b=this.source._source.datafields;if(b)for(var c=0;c<this.columns.records.length;c++){var d=this.columns.records[c];if(!d.datatype){var e="";a.each(b,(function(){if(this.name==d.displayfield)return this.type&&(e=this.type),!1})),d.datatype=""!=e?e:""}}}},_getcolumntypebydatafield:function(f){var g=this.that,e="string",d=g.source.datafields||(g.source._source?g.source._source.datafields:null);if(d){var i="";if(a.each(d,(function(){if(this.name==f.displayfield)return this.type&&(i=this.type),!1})),i)return i}if(null!=f){if(null==this.dataview.cachedrecords)return e;var b=null;if(this.virtualmode)a.each(this.dataview.cachedrecords,(function(){return b=this[f.displayfield],!1}));else{if(0==this.dataview.cachedrecords.length)return e;if(null!=(b=this.dataview.cachedrecords[0][f.displayfield])&&""==b.toString())return"string"}if(null!=b)if("boolean"==typeof b)e="boolean";else if(a.jqx.dataFormat.isNumber(b))e="number";else{var h=new Date(b);if("NaN"==h.toString()||"Invalid Date"==h.toString())if(a.jqx.dataFormat){if(null!=(h=a.jqx.dataFormat.tryparsedate(b))){if(h&&h.getFullYear()&&1970==h.getFullYear()&&0==h.getMonth()&&1==h.getDate()){var c=new Number(b);return isNaN(c)?"string":"number"}return"date"}e="string"}else e="string";else e="date"}}return e},_getfiltersbytype:function(b){var c=this.that,d="";switch(b){case"number":case"float":case"int":d=c.gridlocalization.filternumericcomparisonoperators;break;case"date":d=c.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":d=c.gridlocalization.filterbooleancomparisonoperators;break;default:d=c.gridlocalization.filterstringcomparisonoperators}return d},_getfiltertype:function(b){var c="stringfilter";switch(b){case"number":case"int":case"float":case"decimal":c="numericfilter";break;case"boolean":case"bool":c="booleanfilter";break;case"date":case"time":case"range":c="datefilter";break;case"string":case"input":c="stringfilter"}return c},_buildfilter:function(r,l,F){var f=a(l).find(".filter1"),G=a(l).find(".filter2"),K=a(l).find(".filter3"),k=a(l).find(".filtertext1"+r.element.id),j=a(l).find(".filtertext2"+r.element.id),A=k.val(),z=j.val(),M=r._getcolumntypebydatafield(F),J=(r._getfiltersbytype(M),new a.jqx.filter),w=r._getfiltertype(M);if("default"===r.filtermode&&"list"!==F.filtertype&&"checkedlist"!==F.filtertype){var E=f.jqxDropDownList("selectedIndex"),c=G.jqxDropDownList("selectedIndex"),D=K.jqxDropDownList("selectedIndex"),e=null,d=null;if(r.updatefilterconditions){var p=r.updatefilterconditions(w,J.getoperatorsbyfiltertype(w));null!=p&&J.setoperatorsbyfiltertype(w,p)}var q=!1,L=J.getoperatorsbyfiltertype(w)[E],v=(K=J.getoperatorsbyfiltertype(w)[D],"NULL"==L||"NOT_NULL"==L),h="EMPTY"==L||"NOT_EMPTY"==L;null==L&&(L=J.getoperatorsbyfiltertype(w)[0]),null==K&&(K=J.getoperatorsbyfiltertype(w)[0]),(A.length>0||v||h)&&(e=J.createfilter(w,A,L,null,F.cellsformat,r.gridlocalization),J.addfilter(c,e),q=!0);var u="NULL"==K||"NOT_NULL"==K,g="EMPTY"==K||"NOT_EMPTY"==K;if((z.length>0||u||g)&&(d=J.createfilter(w,z,K,null,F.cellsformat,r.gridlocalization),J.addfilter(c,d),q=!0),q){var C=F.displayfield;this.addfilter(C,J,!0)}else this._clearfilter(r,l,F)}else if("excel"===r.filtermode||"list"===F.filtertype||"checkedlist"===F.filtertype){var n=!1,x=f.data().jqxListBox.instance,I="excel"===this.filtermode||"checkedlist"===F.filtertype,o=x.getCheckedItems();if(!I)o=x.getSelectedItems();if(0==o.length){for(var H=1;H<x.items.length;H++){void 0===(m=x.items[H].value)&&(m="");var b="not_equal";if(m&&m.indexOf&&(m.indexOf("|")>=0||m.indexOf(" AND ")>=0||m.indexOf(" OR ")>=0||m.indexOf(" and ")>=0||m.indexOf(" or ")>=0)){m=(m=(m=(m=(m=m.replace("|","")).replace("AND","")).replace("OR","")).replace("and","")).replace("or","");b="equal"}if("datefilter"==w)var y=J.createfilter(w,m,b,null,F.cellsformat,r.gridlocalization);else y=J.createfilter(w,m,b,null);J.addfilter(0,y)}n=!0}else if(o.length!=x.items.length){n=!0;for(H=0;H<o.length;H++)if(r.gridlocalization.filterselectallstring!==o[H].value){var m;void 0===(m=o[H].value)&&(m="");b="equal";if("datefilter"==w)y=J.createfilter(w,m,b,null,F.cellsformat,r.gridlocalization);else y=J.createfilter(w,m,b,null);J.addfilter(1,y)}}else n=!1;if(n){C=F.displayfield;this.addfilter(C,J,!0)}else{C=F.displayfield;this.removefilter(C,!0)}}},_clearfilter:function(e,c,d){var b=d.displayfield;this.removefilter(b,!0)},addfilter:function(d,e,c){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var f=this.getcolumn(d),b=this._getcolumn(d);null!=f&&null!=f&&(f.filter=e,null!=b&&null!=b&&(b.filter=e,this.dataview.addfilter(d,e),1==c&&null!=c&&this.applyfilters("add")))},removefilter:function(d,c){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var e=this.getcolumn(d),b=this._getcolumn(d);null!=e&&null!=e&&null!=e.filter&&(this.dataview.removefilter(d,e.filter),e.filter=null,b.filter=null,this.showfilterrow&&this.clearfilterrow(d),1!=c&&!1===c||this.applyfilters("remove"))},applyfilters:function(f){if(this.dataview.filters.length>=0&&(this.virtualmode||!this.source.localdata)&&null!=this.source&&this.source.filter){var g=-1;this.pageable?(g=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.pageable&&this.virtualmode&&(this.dataview.pagenum=0),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&!this.virtualmode&&(this.dataview.pagenum=g)}if(this._cellscache=new Array,this.dataview.clearsortdata&&this.dataview.clearsortdata(),this.virtualmode)return this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&"string"!=typeof f&&a.isEmptyObject(f)&&this.refreshfilterrow(),this._postrender("filter"),void this._raiseEvent(13,{filters:this.dataview.filters});this.selectedrowindexes,this.that;if(this.dataview.refresh(),this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection){var e=this.sortdirection.ascending?"asc":"desc";this._loading?this.sortby(this.sortcolumn,e,null,!1,!1):this.sortby(this.sortcolumn,e,null,!1)}this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&0==this.groups.length?(this._rowdetailscache=new Array,this.virtualsizeinfo=null,this._pagescache=new Array,this.columns&&this.columns.records&&this.columns.records.length>0&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this._postrender("filter")):(this.collapseallgroups(),this._rowdetailscache=new Array,this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this._postrender("group")),this.showfilterrow&&"string"!=typeof f&&a.isEmptyObject(f)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){for(var d=new Array,b=0;b<this.dataview.filters.length;b++){var c=this.getcolumn(this.dataview.filters[b].datafield);d[b]={filter:this.dataview.filters[b].filter,datafield:c.datafield,displayfield:c.displayfield,filtercolumn:c.datafield,filtercolumntext:c.text}}return d},clearfilters:function(b){var d=this.that;if(this.showfilterrow&&this.clearfilterrow(),this.columns.records){var c=1==b||!1!==b;a.each(this.columns.records,(function(){d.removefilter(this.displayfield,!c)}))}!1!==b&&(1!=b&&!1===b||this.applyfilters("clear"))},_destroyfilterpanel:function(){var e=a(a.find("#filterclearbutton"+this.element.id)),d=a(a.find("#filterbutton"+this.element.id)),h=a(a.find("#filter1"+this.element.id)),c=a(a.find("#filter2"+this.element.id)),g=a(a.find("#filter3"+this.element.id)),f=a(a.find(".filtertext1"+this.element.id)),b=a(a.find(".filtertext2"+this.element.id));f.length>0&&b.length>0&&(f.removeClass(),b.removeClass(),f.remove(),b.remove()),e.length>0&&(e.jqxButton("destroy"),d.jqxButton("destroy"),this.removeHandler(e,"click"),this.removeHandler(d,"click")),h.length>0&&h.jqxDropDownList("destroy"),c.length>0&&c.jqxDropDownList("destroy"),g.length>0&&g.jqxDropDownList("destroy");h=a(a.find("#filter1"+this.element.id+"ex")),c=a(a.find("#filter2"+this.element.id+"ex")),g=a(a.find("#filter3"+this.element.id+"ex"));if(h.length>0&&h.jqxDropDownList("destroy"),c.length>0&&c.jqxDropDownList("destroy"),g.length>0&&g.jqxDropDownList("destroy"),this.excelfilterpanel){h=a(this.excelfilterpanel).find("#filter1"+this.element.id+"ex"),c=a(this.excelfilterpanel).find("#filter2"+this.element.id+"ex"),g=a(this.excelfilterpanel).find("#filter3"+this.element.id+"ex");h.length>0&&(this.removeHandler(h,"checkChange"),h.jqxListBox("destroy")),c.length>0&&c.jqxDropDownList("destroy"),g.length>0&&g.jqxDropDownList("destroy");e=a(this.excelfilterpanel).find("#filterclearbutton"+this.element.id+"ex"),d=a(this.excelfilterpanel).find("#filterbutton"+this.element.id+"ex"),h=a(this.excelfilterpanel).find("#filter1"+this.element.id+"ex"),c=a(this.excelfilterpanel).find("#filter2"+this.element.id+"ex"),g=a(this.excelfilterpanel).find("#filter3"+this.element.id+"ex"),f=a(this.excelfilterpanel).find(".filtertext1"+this.element.id+"ex"),b=a(this.excelfilterpanel).find(".filtertext2"+this.element.id+"ex");f.length>0&&b.length>0&&(f.removeClass(),b.removeClass(),f.remove(),b.remove()),e.length>0&&(e.jqxButton("destroy"),d.jqxButton("destroy"),this.removeHandler(e,"click"),this.removeHandler(d,"click")),this.excelfilterpanel.removeData(),this.excelfilterpanel.remove(),delete this.excelfilterpanel}},_updatefilterpanel:function(s,p,F){null!=s&&null!=s||(s=this);var R=s._getcolumntypebydatafield(F),u=s._getfiltersbytype(R);if(!s.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");s.filterpanel.detach(),s.excelfilterpanel.detach(),F.filterpanel&&F.filterpanel.detach(),a(p).children().detach();var k=a(s.menuitemsarray[6]);if(a(k).css("height","220px"),F.createfilterpanel&&!F.filterpanel){var L=a("<div class='filter' style='margin-left: 7px;'></div>");a(p).append(L),F.createfilterpanel(F.displayfield,L),F.filterpanel=L}"list"===F.filtertype||"checkedlist"===F.filtertype?a(p).append(s.excelfilterpanel):"custom"!==F.filtertype?a(p).append(s.filterpanel):F.filterpanel&&a(p).append(F.filterpanel),this._showwhere=a(p).find(".filter.showwhere");var g=a(p),O=g.find("#filterclearbutton"+s.element.id),l=g.find("#filterbutton"+s.element.id),f=g.find(".filter1"),m=g.find(".filter2"),Q=g.find(".filter3"),j=g.find(".filtertext1"+s.element.id),h=g.find(".filtertext2"+s.element.id);if(this._hasdatefilter&&"list"!==F.filtertype&&"checkedlist"!==F.filtertype&&"custom"!==F.filtertype){var e=j.parent(),d=h.parent();if("date"==F.filtertype){j.jqxDateTimeInput("destroy"),h.jqxDateTimeInput("destroy"),e.children().remove(),d.children().remove(),s._showwhere.text(s.gridlocalization.filtershowrowdatestring);var b=a("<div class='filtertext1"+s.element.id+"' style=''></div>");e.append(b),(n=function(c){var i={calendar:s.gridlocalization,todayString:s.gridlocalization.todaystring,clearString:s.gridlocalization.clearstring};c.jqxDateTimeInput({disabled:s.disabled,firstDayOfWeek:s.gridlocalization.firstDay,localization:i,rtl:s.rtl,width:s._filterpanelwidth-10,height:24,value:null,formatString:F.cellsformat,theme:s.theme})})(b);b=a("<div class='filtertext2"+s.element.id+"' style=''></div>");d.append(b),n(b)}else{e.children().remove(),d.children().remove(),s._showwhere.text(s.gridlocalization.filtershowrowstring);var n;b=a("<input autocomplete='off' class='filtertext1"+s.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>");e.append(b),(n=function(c){c.addClass(s.toThemeProperty("jqx-input")),c.addClass(s.toThemeProperty("jqx-filter-input jqx-widget-content")),c.addClass(s.toThemeProperty("jqx-rc-all")),c.width(s._filterpanelwidth-18)})(b);b=a("<input autocomplete='off' class='filtertext2"+s.element.id+"' style='box-sizing: content-box; height: 16px; padding: 3px;' type='text'></input>");d.append(b),n(b)}j=g.find(".filtertext1"+s.element.id),h=g.find(".filtertext2"+s.element.id)}if("date"!=F.filtertype?(j.val(""),h.val("")):(j.val(null),h.val(null)),l.length>0&&(l.jqxButton({height:this.filterMenuItemsHeight}),O.jqxButton({height:this.filterMenuItemsHeight}),this.removeHandler(l,"click"),this.addHandler(l,"click",(function(){s._buildfilter(s,p,F),s._closemenu()})),this.removeHandler(O,"click"),this.addHandler(O,"click",(function(){s._clearfilter(s,p,F),s._closemenu()})),this.removeHandler(l,"keydown"),this.addHandler(l,"keydown",(function(c){13===c.keyCode&&(s._buildfilter(s,p,F),s._closemenu())})),this.removeHandler(O,"keydown"),this.addHandler(O,"keydown",(function(c){13===c.keyCode&&(s._clearfilter(s,p,F),s._closemenu())}))),j.length>0&&(this.removeHandler(j,"keydown"),this.addHandler(j,"keydown",(function(c){13===c.keyCode&&l.trigger("click"),27===c.keyCode&&s._closemenu()})),this.removeHandler(h,"keydown"),this.addHandler(h,"keydown",(function(c){13===c.keyCode&&l.trigger("click"),27===c.keyCode&&s._closemenu()}))),"default"===this.filtermode&&"list"!==F.filtertype&&"checkedlist"!==F.filtertype&&"custom"!==F.filtertype){if(f.jqxDropDownList("source")!=u&&(f.jqxDropDownList({enableBrowserBoundsDetection:!1,source:u}),Q.jqxDropDownList({enableBrowserBoundsDetection:!1,source:u})),"boolean"==R||"bool"==R)f.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),Q.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0});else{var I=!1;u&&u.length&&u.length<5&&(I=!0),f.jqxDropDownList({autoDropDownHeight:I,selectedIndex:2}),Q.jqxDropDownList({autoDropDownHeight:I,selectedIndex:2})}m.jqxDropDownList({selectedIndex:0});var A=F.filter,N=new a.jqx.filter,y="";switch(R){case"number":case"int":case"float":case"decimal":y="numericfilter",o=N.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":y="booleanfilter",o=N.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":y="datefilter",o=N.getoperatorsbyfiltertype("datefilter");break;case"string":y="stringfilter",o=N.getoperatorsbyfiltertype("stringfilter")}if(null!=A){e=A.getfilterat(0),d=A.getfilterat(1),A.getoperatorat(0);if(s.updatefilterconditions){var o=[],r=s.updatefilterconditions(y,o);if(null!=r){for(var P=0;P<r.length;P++)r[P]=r[P].toUpperCase();A.setoperatorsbyfiltertype(y,r),o=r}}var x="default";if(null!=e){var E=o.indexOf(e.comparisonoperator),B=e.filtervalue;j.val(B),f.jqxDropDownList({selectedIndex:E,animationType:x})}if(null!=d){var D=o.indexOf(d.comparisonoperator),z=d.filtervalue;h.val(z),Q.jqxDropDownList({selectedIndex:D,animationType:x})}null==A.getoperatorat(0)?m.jqxDropDownList({selectedIndex:0,animationType:x}):"and"==A.getoperatorat(0)||0==A.getoperatorat(0)?m.jqxDropDownList({selectedIndex:0}):m.jqxDropDownList({selectedIndex:1})}s.updatefilterpanel&&s.updatefilterpanel(f,Q,m,j,h,l,O,A,y,o),(!this._hasdatefilter||this._hasdatefilter&&"date"!=F.filtertype)&&(this.touchdevice||(j.focus(),setTimeout((function(){j.focus()}),10)))}else if("excel"===this.filtermode||"list"===F.filtertype||"checkedlist"===F.filtertype){var v=s._getfilterdataadapter(F),M=(y=s._getfiltertype(R),"excel"===this.filtermode||"checkedlist"===F.filtertype);if(f.jqxListBox("focus"),this.removeHandler(f,"keyup"),this.addHandler(f,"keyup",(function(c){13===c.keyCode&&l.trigger("click"),27===c.keyCode&&s._closemenu()})),F.cellsformat?f.jqxListBox({checkboxes:M,displayMember:F.displayfield,valueMember:F.displayfield+"JQValue",source:v}):f.jqxListBox({checkboxes:M,displayMember:F.displayfield,valueMember:F.displayfield,source:v}),M){var w=f.jqxListBox("getItem",0);w&&w.label===s.gridlocalization.filterselectallstring||f.jqxListBox("insertAt",{label:s.gridlocalization.filterselectallstring},0),(G=f.data().jqxListBox.instance).checkAll(!1);if(F.filter){G.uncheckAll(!1);for(var t=F.filter.getfilters(),K=0;K<G.items.length;K++){var H=G.items[K].value;a.each(t,(function(){if("NOT_EQUAL"==this.condition){if(H!=this.value)return G.uncheckIndex(K,!1,!1),!1;if(null!=H&&null!=this.value&&H.toString()!=this.value.toString())return G.uncheckIndex(K,!1,!1),!1}else if("EQUAL"==this.condition){if(H==this.value)return G.checkIndex(K,!1,!1),!1;if(null!=H&&null!=this.value&&H.toString()==this.value.toString())return G.checkIndex(K,!1,!1),!1}}))}G._updateCheckedItems();var q=G.getCheckedItems().length;G.items.length!=q&&q>0&&G.host.jqxListBox("indeterminateIndex",0,!0,!1),q===G.items.length-1&&G.host.jqxListBox("checkIndex",0,!0,!1)}}else if(F.filter){var G;(G=f.data().jqxListBox.instance).clearSelection();for(t=F.filter.getfilters(),K=0;K<G.items.length;K++){H=G.items[K].value;a.each(t,(function(){if("NOT_EQUAL"==this.condition){if(H!=this.value)return G.unselectIndex(K,!1,!1),!1}else if("EQUAL"==this.condition&&H==this.value)return G.selectIndex(K,!0,!1),!1}))}G._renderItems()}}},_initfilterpanel:function(z,b,c,p,w){null!=z&&null!=z||(z=this),b[0].innerHTML="";var t=a("<div class='filter' style='position: absolute; bottom: 3px; margin-left: 3px;'></div>");b.append(t);var n=a("<div class='filter showwhere' style='height: 18px; margin-top: 3px; margin-bottom: 3px;'></div>");n.text(z.gridlocalization.filtershowrowstring),this._showwhere=n;var o=w?"ex":"",v=a("<div class='filter filter1' id='filter1"+z.element.id+o+"'></div>"),h=a("<div class='filter filter2' id='filter2"+z.element.id+o+"' style='margin-top: 3px; margin-bottom: 3px;'></div>"),s=a("<div class='filter filter3' id='filter3"+z.element.id+o+"'></div>"),e=z._getcolumntypebydatafield(c);if(!v.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");var q=z._getfiltersbytype(e);if(this._hasdatefilter=!1,this._filterpanelwidth=p,this.columns&&this.columns.records){for(var u=0;u<this.columns.records.length;u++)if("date"==this.columns.records[u].filtertype){this._hasdatefilter=!0;break}}else if(this.columns&&!this.columns.records)for(u=0;u<this.columns.length;u++)if("date"==this.columns[u].filtertype){this._hasdatefilter=!0;break}this._hasdatefilter=!0;var k=a("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext1"+z.element.id+"' style='padding: 3px; height: 16px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"),m=k.find("input");m.addClass(this.toThemeProperty("jqx-input")),m.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),m.addClass(this.toThemeProperty("jqx-rc-all")),m.width(p-18);var l=a("<div style='margin-top:3px;' class='filter'><input autocomplete='off' class='filtertext2"+z.element.id+"' style='padding: 3px; height: 16px; margin-top: 3px;' type='text'></input></div>"),j=l.find("input");j.addClass(this.toThemeProperty("jqx-input")),j.addClass(this.toThemeProperty("jqx-filter-input jqx-widget-content")),j.addClass(this.toThemeProperty("jqx-rc-all")),j.width(p-18),z.rtl&&(m.css("direction","rtl"),j.css("direction","rtl"));var g=a("<div class='filter' style='height: 35px; text-align:center; margin-top: 15px; margin-left:-2px;'></div>"),f=a('<span tabIndex=0 id="filterbutton'+z.element.id+'" class="primary filterbutton" style="padding: 6px 15px;">'+z.gridlocalization.filterstring+"</span>");g.append(f);var x=a('<span tabIndex=0 id="filterclearbutton'+z.element.id+'" class="filterclearbutton secondary" style="position: relative; left: 2px; padding: 6px 15px; margin-left: 7px;">'+z.gridlocalization.filterclearstring+"</span>");g.append(x),f.jqxButton({height:this.filterMenuItemsHeight,theme:z.theme}),x.jqxButton({height:this.filterMenuItemsHeight,theme:z.theme});var y=function(A){if(A){if(-1!=A.text().indexOf("case sensitive")){var i=A.text();i=i.replace("case sensitive","match case"),A.text(i)}return A.css("font-family",z.host.css("font-family")),A.css("font-size",z.host.css("font-size")),A.css("top","2px"),A.css("position","relative"),A}return""};if("default"!==this.filtermode||w){if("excel"===this.filtermode||w){t.append(n),t.append(v),v.attr("tabindex",0),v.jqxListBox({rtl:z.rtl,_checkForHiddenParent:!1,checkboxes:!0,selectedIndex:2,width:p-10,height:160,theme:z.theme});var d=!0;z.addHandler(v,"checkChange",(function(B){if(d)if(B.args.label!=z.gridlocalization.filterselectallstring){d=!1,v.jqxListBox("checkIndex",0,!0,!1);var i=v.jqxListBox("getCheckedItems"),A=v.jqxListBox("getItems");1==i.length?v.jqxListBox("uncheckIndex",0,!0,!1):A.length!=i.length&&v.jqxListBox("indeterminateIndex",0,!0,!1),d=!0}else d=!1,B.args.checked?v.jqxListBox("checkAll",!1):v.jqxListBox("uncheckAll",!1),d=!0}))}}else{t.append(n),t.append(v),v.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:z.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:p-10,height:this.filterMenuItemsHeight,dropDownHeight:200,dropDownWidth:p-10,selectionRenderer:y,source:q,theme:z.theme}),t.append(k);var r=new Array;r[0]=z.gridlocalization.filterandconditionstring,r[1]=z.gridlocalization.filterorconditionstring,h.jqxDropDownList({_checkForHiddenParent:!1,rtl:z.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:this.filterMenuItemsHeight,source:r,selectionRenderer:y,theme:z.theme}),t.append(h),s.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:z.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:p-10,height:this.filterMenuItemsHeight,dropDownHeight:200,dropDownWidth:p-10,selectionRenderer:y,source:q,theme:z.theme}),t.append(s),t.append(l)}t.append(g),z.updatefilterpanel&&z.updatefilterpanel(v,s,h,k,l,f,x,null,null,q)}})}(jqxBaseFramework);