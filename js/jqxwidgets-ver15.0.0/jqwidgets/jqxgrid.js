!function(e){function t(t,i){return this.owner=t,this.datafield=null,this.displayfield=null,this.text="",this.createfilterpanel=null,this.sortable=!0,this.hideable=!0,this.editable=!0,this.hidden=!1,this.adaptivehidden=!1,this.groupable=!0,this.renderer=null,this.cellsrenderer=null,this.checkchange=null,this.threestatecheckbox=!1,this.buttonclick=null,this.columntype=null,this.cellsformat="",this.align="left",this.cellsalign="left",this.width="auto",this.minwidth=25,this.maxwidth="auto",this.pinned=!1,this.visibleindex=-1,this.filterable=!0,this.filter=null,this.filteritems=[],this.resizable=!0,this.initeditor=null,this.createeditor=null,this.createwidget=null,this.initwidget=null,this.destroywidget=null,this.destroyeditor=null,this.geteditorvalue=null,this.validation=null,this.classname="",this.cellclassname="",this.cellendedit=null,this.cellbeginedit=null,this.cellvaluechanging=null,this.aggregates=null,this.aggregatesrenderer=null,this.menu=!0,this.createfilterwidget=null,this.filtertype="default",this.filtercondition=null,this.rendered=null,this.exportable=!0,this.exporting=!1,this.draggable=!0,this.nullable=!0,this.clipboard=!0,this.selectable=!1,this.autofill=!0,this._applyStyle=function(){var e=this;return e.hovered?(e.style.headerBackgroundHoveredColor&&(e.element.style.backgroundColor=e.style.headerBackgroundHoveredColor),void(e.style.headerHoveredColor&&(e.element.style.color=e.style.headerHoveredColor))):e.selected?(e.style.headerBackgroundSelectedColor&&(e.element.style.backgroundColor=e.style.headerBackgroundSelectedColor),void(e.style.headerSelectedColor&&(e.element.style.color=e.style.headerSelectedColor))):(e.style.headerBackgroundColor?e.element.style.backgroundColor=e.style.headerBackgroundColor:e.element.style.backgroundColor="",void(e.style.headerColor?e.element.style.color=e.style.headerColor:e.element.style.color=""))},this._applyCellStyle=function(e){var t=this,i=!1;if(e.length)for(var r=0;r<e.length;r++)this._applyCellStyle(e[r]);else if((t.style.backgroundColor||t.style.color||t.style.hoveredColor||t.style.hoveredColor||t.style.backgroundSelectedColor||t.style.selectedColor)&&(i=!0),i){if(e.className.indexOf("hover")>=0)return t.style.backgroundHoveredColor&&(e.style.backgroundColor=t.style.backgroundHoveredColor),void(t.style.hoveredColor&&(e.style.color=t.style.hoveredColor));if(e.className.indexOf("selected")>=0)return t.style.backgroundSelectedColor&&(e.style.backgroundColor=t.style.backgroundSelectedColor),void(t.style.selectedColor&&(e.style.color=t.style.selectedColor));t.style.backgroundColor&&(e.style.backgroundColor=t.style.backgroundColor),t.style.color&&(e.style.color=t.style.color),t.style.fontFamily&&(e.style.fontFamily=t.style.fontFamily),t.style.fontWeight&&(e.style.fontWeight=t.style.fontWeight)}},this.style={headerBackgroundColor:"",headerColor:"",headerBackgroundHoveredColor:"",headerHoveredColor:"",headerBackgroundSelectedColor:"",headerSelectedColor:"",backgroundColor:"",color:"",backgroundHoveredColor:"",hoveredColor:"",backgroundSelectedColor:"",selectedColor:"",fontFamily:"",fontWeight:""},this.enabletooltips=!0,this.columngroup=null,this.filterdelay=800,this.reseteverpresentrowwidgetvalue=null,this.geteverpresentrowwidgetvalue=null,this.createeverpresentrowwidget=null,this.initeverpresentrowwidget=null,this.validateeverpresentrowwidgetvalue=null,this.destroyeverpresentrowwidget=null,this.getcolumnproperties=function(){return{nullable:this.nullable,sortable:this.sortable,hideable:this.hideable,hidden:this.hidden,groupable:this.groupable,width:this.width,align:this.align,editable:this.editable,minwidth:this.minwidth,maxwidth:this.maxwidth,resizable:this.resizable,datafield:this.datafield,text:this.text,exportable:this.exportable,cellsalign:this.cellsalign,pinned:this.pinned,cellsformat:this.cellsformat,columntype:this.columntype,classname:this.classname,cellclassname:this.cellclassname,menu:this.menu}},this.setproperty=function(e,t){if(this[e]){var i=this[e];this[e]=t,this.owner._columnPropertyChanged(this,e,t,i)}else if(this[e.toLowerCase()]){i=this[e.toLowerCase()];this[e.toLowerCase()]=t,this.owner._columnPropertyChanged(this,e.toLowerCase(),t,i)}},this._initfields=function(i){if(null!=i){var r=this.that;if(e.jqx.hasProperty(i,"dataField")&&(this.datafield=e.jqx.get(i,"dataField")),e.jqx.hasProperty(i,"selectable")&&(this.selectable=e.jqx.get(i,"selectable")),e.jqx.hasProperty(i,"displayField")?this.displayfield=e.jqx.get(i,"displayField"):this.displayfield=this.datafield,e.jqx.hasProperty(i,"enableTooltips")&&(this.enabletooltips=e.jqx.get(i,"enableTooltips")),e.jqx.hasProperty(i,"text")?this.text=e.jqx.get(i,"text"):this.text=this.displayfield,e.jqx.hasProperty(i,"style")&&(this.style=e.jqx.get(i,"style")),e.jqx.hasProperty(i,"createfilterpanel")&&(this.createfilterpanel=e.jqx.get(i,"createfilterpanel")),e.jqx.hasProperty(i,"sortable")&&(this.sortable=e.jqx.get(i,"sortable")),e.jqx.hasProperty(i,"hideable")&&(this.hideable=e.jqx.get(i,"hideable")),e.jqx.hasProperty(i,"hidden")&&(this.hidden=e.jqx.get(i,"hidden")),e.jqx.hasProperty(i,"adaptivehidden")&&(this.adaptivehidden=e.jqx.get(i,"adaptivehidden")),e.jqx.hasProperty(i,"groupable")&&(this.groupable=e.jqx.get(i,"groupable")),e.jqx.hasProperty(i,"renderer")&&(this.renderer=e.jqx.get(i,"renderer")),e.jqx.hasProperty(i,"align")&&(this.align=e.jqx.get(i,"align")),e.jqx.hasProperty(i,"cellsAlign")&&(this.cellsalign=e.jqx.get(i,"cellsAlign")),e.jqx.hasProperty(i,"clipboard")&&(this.clipboard=e.jqx.get(i,"clipboard")),e.jqx.hasProperty(i,"cellsFormat")&&(this.cellsformat=e.jqx.get(i,"cellsFormat")),e.jqx.hasProperty(i,"width")&&(this.width=e.jqx.get(i,"width")),e.jqx.hasProperty(i,"autofill")&&(this.autofill=e.jqx.get(i,"autofill")),e.jqx.hasProperty(i,"minWidth")&&(this.minwidth=parseInt(e.jqx.get(i,"minWidth")),isNaN(this.minwidth)&&(this.minwidth=25)),e.jqx.hasProperty(i,"maxWidth")&&(this.maxwidth=parseInt(e.jqx.get(i,"maxWidth")),isNaN(this.maxwidth)&&(this.maxwidth="auto")),e.jqx.hasProperty(i,"cellsRenderer")?this.cellsrenderer=e.jqx.get(i,"cellsRenderer"):i.cellsRenderer&&(this.cellsrenderer=i.cellsRenderer),e.jqx.hasProperty(i,"columnType")&&(this.columntype=e.jqx.get(i,"columnType")),e.jqx.hasProperty(i,"checkChange")&&(this.checkchange=e.jqx.get(i,"checkChange")),e.jqx.hasProperty(i,"buttonClick")?this.buttonclick=e.jqx.get(i,"buttonClick"):i.buttonClick&&(this.buttonclick=i.buttonClick),e.jqx.hasProperty(i,"pinned")&&(this.pinned=e.jqx.get(i,"pinned")),e.jqx.hasProperty(i,"visibleIndex")&&(this.visibleindex=e.jqx.get(i,"visibleIndex")),e.jqx.hasProperty(i,"filterable")&&(this.filterable=e.jqx.get(i,"filterable")),e.jqx.hasProperty(i,"filter")&&(this.filter=e.jqx.get(i,"filter")),e.jqx.hasProperty(i,"resizable")&&(this.resizable=e.jqx.get(i,"resizable")),e.jqx.hasProperty(i,"editable")&&(this.editable=e.jqx.get(i,"editable")),e.jqx.hasProperty(i,"initEditor")?this.initeditor=e.jqx.get(i,"initEditor"):i.initEditor&&(this.initeditor=i.initEditor),e.jqx.hasProperty(i,"createEditor")?this.createeditor=e.jqx.get(i,"createEditor"):i.createEditor&&(this.createeditor=i.createEditor),e.jqx.hasProperty(i,"initWidget")?this.initwidget=e.jqx.get(i,"initWidget"):i.initWidget&&(this.initwidget=i.initWidget),e.jqx.hasProperty(i,"createWidget")?this.createwidget=e.jqx.get(i,"createWidget"):i.createWidget&&(this.createwidget=i.createWidget),e.jqx.hasProperty(i,"destroyWidget")?this.destroywidget=e.jqx.get(i,"destroyWidget"):i.destroyWidget&&(this.destroywidget=i.destroyWidget),e.jqx.hasProperty(i,"reseteverpresentrowwidgetvalue")||e.jqx.hasFunction(i,"reseteverpresentrowwidgetvalue")?this.reseteverpresentrowwidgetvalue=e.jqx.get(i,"reseteverpresentrowwidgetvalue"):i.resetEverPresentRowWidgetValue&&(this.reseteverpresentrowwidgetvalue=i.resetEverPresentRowWidgetValue),e.jqx.hasProperty(i,"geteverpresentrowwidgetvalue")||e.jqx.hasFunction(i,"geteverpresentrowwidgetvalue")?this.geteverpresentrowwidgetvalue=e.jqx.get(i,"geteverpresentrowwidgetvalue"):i.getEverPresentRowWidgetValue&&(this.geteverpresentrowwidgetvalue=i.getEverPresentRowWidgetValue),e.jqx.hasProperty(i,"createeverpresentrowwidget")||e.jqx.hasFunction(i,"createeverpresentrowwidget")?this.createeverpresentrowwidget=e.jqx.get(i,"createeverpresentrowwidget"):i.createEverPresentRowWidget&&(this.createeverpresentrowwidget=i.createEverPresentRowWidget),e.jqx.hasProperty(i,"initeverpresentrowwidget")||e.jqx.hasFunction(i,"initeverpresentrowwidget")?this.initeverpresentrowwidget=e.jqx.get(i,"initeverpresentrowwidget"):i.initEverPresentRowWidget&&(this.initeverpresentrowwidget=i.initEverPresentRowWidget),e.jqx.hasProperty(i,"validateeverpresentrowwidgetvalue")?this.validateeverpresentrowwidgetvalue=e.jqx.get(i,"validateeverpresentrowwidgetvalue"):i.validateEverPresentRowWidgetValue&&(this.validateeverpresentrowwidgetvalue=i.validateEverPresentRowWidgetValue),e.jqx.hasProperty(i,"destroyeverpresentrowwidget")||e.jqx.hasFunction(i,"destroyeverpresentrowwidget")?this.destroyeverpresentrowwidget=e.jqx.get(i,"destroyeverpresentrowwidget"):i.destroyEverPresentRowWidget&&(this.destroyEverPresentRowWidget=i.destroyEverPresentRowWidget),e.jqx.hasProperty(i,"destroyEditor")?this.destroyeditor=e.jqx.get(i,"destroyEditor"):i.destroyEditor&&(this.destroyeditor=i.destroyEditor),e.jqx.hasProperty(i,"getEditorValue")?this.geteditorvalue=e.jqx.get(i,"getEditorValue"):i.getEditorValue&&(this.geteditorvalue=i.getEditorValue),e.jqx.hasProperty(i,"validation")?this.validation=e.jqx.get(i,"validation"):i.validation&&(this.validation=i.validation),e.jqx.hasProperty(i,"cellBeginEdit")?this.cellbeginedit=e.jqx.get(i,"cellBeginEdit"):i.cellBeginEdit&&(this.cellbeginedit=i.cellBeginEdit),e.jqx.hasProperty(i,"cellEndEdit")?this.cellendedit=e.jqx.get(i,"cellEndEdit"):i.cellEndEdit&&(this.cellendedit=i.cellEndEdit),e.jqx.hasProperty(i,"className")&&(this.classname=e.jqx.get(i,"className")),e.jqx.hasProperty(i,"cellClassName")?this.cellclassname=e.jqx.get(i,"cellClassName"):i.cellClassName&&(this.cellclassname=i.cellClassName),e.jqx.hasProperty(i,"menu")&&(this.menu=e.jqx.get(i,"menu")),e.jqx.hasProperty(i,"aggregates")&&(this.aggregates=e.jqx.get(i,"aggregates")),e.jqx.hasProperty(i,"aggregatesRenderer")&&(this.aggregatesrenderer=e.jqx.get(i,"aggregatesRenderer")),e.jqx.hasProperty(i,"createFilterWidget")&&(this.createfilterwidget=e.jqx.get(i,"createFilterWidget")),e.jqx.hasProperty(i,"filterType")&&(this.filtertype=e.jqx.get(i,"filterType")),e.jqx.hasProperty(i,"filterDelay")&&(this.filterdelay=e.jqx.get(i,"filterDelay")),e.jqx.hasProperty(i,"rendered")&&(this.rendered=e.jqx.get(i,"rendered")),e.jqx.hasProperty(i,"exportable")&&(this.exportable=e.jqx.get(i,"exportable")),e.jqx.hasProperty(i,"filterItems")&&(this.filteritems=e.jqx.get(i,"filterItems")),e.jqx.hasProperty(i,"cellValueChanging")&&(this.cellvaluechanging=e.jqx.get(i,"cellValueChanging")),e.jqx.hasProperty(i,"draggable")&&(this.draggable=e.jqx.get(i,"draggable")),e.jqx.hasProperty(i,"filterCondition")&&(this.filtercondition=e.jqx.get(i,"filterCondition")),e.jqx.hasProperty(i,"threeStateCheckbox")&&(this.threestatecheckbox=e.jqx.get(i,"threeStateCheckbox")),e.jqx.hasProperty(i,"nullable")&&(this.nullable=e.jqx.get(i,"nullable")),e.jqx.hasProperty(i,"columnGroup")&&(this.columngroup=e.jqx.get(i,"columnGroup")),!i instanceof String&&"string"!=typeof i)for(var s in i)if(!r.hasOwnProperty(s)&&!r.hasOwnProperty(s.toLowerCase()))throw t.host.remove(),new Error("jqxGrid: Invalid property name - "+s+".")}},this._initfields(i),this}function i(e,t){return this.setdata=function(e){null!=e&&(this.bounddata=e,this.boundindex=e.boundindex,this.visibleindex=e.visibleindex,this.group=e.group,this.parentbounddata=e.parentItem,this.uniqueid=e.uniqueid,this.level=e.level)},this.setdata(t),this.parentrow=null,this.subrows=new Array,this.owner=e,this.height=25,this.hidden=!1,this.rowdetails=null,this.rowdetailsheight=100,this.rowdetailshidden=!0,this.top=-1,this.setrowinfo=function(e){this.hidden=e.hidden,this.rowdetails=e.rowdetails,this.rowdetailsheight=e.rowdetailsheight,this.rowdetailshidden=!e.showdetails,this.height=e.height},this}e.jqx.jqxWidget("jqxGrid","",{}),e.extend(e.jqx._jqxGrid.prototype,{defineInstance:function(){var t={adaptive:!1,adaptivewidth:600,disabled:!1,width:600,height:400,pagerheight:40,groupsheaderheight:34,pagesize:10,pagesizeoptions:["5","10","20"],rowsheight:25,columnsheight:25,filterrowheight:32,groupindentwidth:30,rowdetails:!1,enablerowdetailsindent:!0,enablemousewheel:!0,initrowdetails:null,layoutrowdetails:null,editable:!1,editmode:"selectedcell",batcheditable:!1,pageable:!1,pagermode:"default",pagerbuttonscount:5,groupable:!1,sortable:!1,sortmode:"one",sortmodekey:"",filterable:!1,filtermode:"default",filterbarmode:"default",autoshowfiltericon:!0,showfiltercolumnbackground:!0,showpinnedcolumnbackground:!0,showsortcolumnbackground:!0,altrows:!1,altstart:1,altstep:1,showrowdetailscolumn:!0,showrowlines:!0,showcolumnlines:!0,showcolumnheaderlines:!0,showtoolbar:!1,showfilterbar:!1,toolbarheight:36,showstatusbar:!1,statusbarheight:36,enableellipsis:!0,groups:[],groupsrenderer:null,groupcolumnrenderer:null,groupsexpandedbydefault:!1,pagerrenderer:null,touchmode:"auto",columns:[],selectedrowindex:-1,selectedrowindexes:new Array,selectedcells:new Array,autobind:!0,selectedcell:null,tableZIndex:79,headerZIndex:29,updatefilterconditions:null,showgroupaggregates:!1,showaggregates:!1,showfilterrow:!1,showeverpresentrow:!1,everpresentrowposition:"top",everpresentrowactions:"add reset",everpresentrowactionsmode:"buttons",everpresentrowheight:30,autorowheight:!1,autokoupdates:!0,handlekeyboardnavigation:null,showsortmenuitems:!0,showfiltermenuitems:!0,showgroupmenuitems:!0,enablebrowserselection:!1,enablekeyboarddelete:!0,clipboard:!0,clipboardbegin:null,clipboardend:null,copytoclipboardwithheaders:!1,copytoclipboardhiddencolumns:!1,ready:null,updatefilterpanel:null,autogeneratecolumns:!1,rowdetailstemplate:null,scrollfeedback:null,rendertoolbar:null,renderstatusbar:null,rendered:null,multipleselectionbegins:null,columngroups:null,cellhover:null,commandcolumn:!1,commandcolumnrenderer:null,source:{beforeprocessing:null,beforesend:null,loaderror:null,localdata:null,data:null,datatype:"array",datafields:[],url:"",root:"",record:"",id:"",totalrecords:0,recordstartindex:0,recordendindex:0,loadallrecords:!0,sortcolumn:null,sortdirection:null,sort:null,filter:null,sortcomparer:null},filter:null,dataview:null,updatedelay:null,autoheight:!1,autowidth:!1,showheader:!0,showgroupsheader:!0,closeablegroups:!0,scrollbarsize:e.jqx.utilities.scrollBarSize,touchscrollbarsize:e.jqx.utilities.touchScrollBarSize,scrollbarautoshow:e.jqx.utilities.scrollBarAutoShow,virtualmode:!1,sort:null,columnsmenu:!0,columnsresize:!1,columnsautoresize:!0,columnsreorder:!1,columnsmenuwidth:16,autoshowcolumnsmenubutton:!0,showcolumnsactionbutton:!1,popupwidth:"auto",popupheight:"auto",columnmenuopening:null,columnmenuclosing:null,sorttogglestates:2,rendergridrows:null,enableanimations:!0,enablecolumnsvirtualization:!0,enabletooltips:!1,selectionmode:"singlerow",autofill:!1,enableoptimization:!1,enablehover:!0,loadingerrormessage:"The data is still loading. When the data binding is completed, the Grid raises the 'bindingcomplete' event. Call this function in the 'bindingcomplete' event handler.",verticalscrollbarstep:30,verticalscrollbarlargestep:400,horizontalscrollbarstep:10,horizontalscrollbarlargestep:50,keyboardnavigation:!0,keyboardmenunavigation:!0,touchModeStyle:"auto",autoshowloadelement:!0,showdefaultloadelement:!0,showemptyrow:!0,autosavestate:!1,autoloadstate:!1,cardview:!1,cardviewcolumns:["20%","20%","20%","20%","20%"],cardheight:250,cardsize:3,enableSanitize:!0,enableSanitizeAll:!1,_updating:!1,_pagescache:new Array,_pageviews:new Array,_cellscache:new Array,_rowdetailscache:new Array,_rowdetailselementscache:new Array,_requiresupdate:!1,_hasOpenedMenu:!1,scrollmode:"physical",deferreddatafields:null,localization:null,rtl:!1,menuitemsarray:[],charting:{appendTo:null,colorScheme:"scheme02",dialog:{header:"Data Visualization",height:400,width:400,position:"center",enabled:!0},ready:null,formatSettings:{}},events:["initialized","rowClick","rowSelect","rowUnselect","groupExpand","groupCollapse","sort","columnClick","cellClick","pageChanged","pageSizeChanged","bindingComplete","groupsChanged","filter","columnResized","cellSelect","cellUnselect","cellBeginEdit","cellEndEdit","cellValueChanged","rowExpand","rowCollapse","rowDoubleClick","cellDoubleClick","columnReordered","pageChanging","columnChooserOkClick","columnChooserCancelClick"]};return this===e.jqx._jqxGrid.prototype||e.extend(!0,this,t),t},_applyThemeSettings:function(){var t=this;if(t.isMaterialized()){var i=window.getComputedStyle(t.element),r=i.getPropertyValue("--jqx-grid-row-height"),s=i.getPropertyValue("--jqx-grid-column-height"),l=i.getPropertyValue("--jqx-grid-show-column-lines"),a=i.getPropertyValue("--jqx-grid-filter-menu-items-height"),o=i.getPropertyValue("--jqx-scrollbar-size");r&&32===this.rowsheight&&!this.cardview&&(t.rowsheight=parseInt(r)),s&&36===this.columnsheight&&(t.columnsheight=parseInt(s)),l&&(t.showcolumnlines=t.showcolumnheaderlines=parseInt(l)),t.filterMenuItemsHeight=a?parseInt(a):23,o&&(t.scrollbarsize=o,e.jqx.utilities.scrollBarSize=o)}},createInstance:function(t){this.that=this;var i=this;i.pagesize=parseInt(i.pagesize),i.toolbarheight=parseInt(i.toolbarheight),i.columnsheight=parseInt(i.columnsheight),i.filterrowheight=parseInt(i.filterrowheight),i.statusbarheight=parseInt(i.statusbarheight),i.groupsheaderheight=parseInt(i.groupsheaderheight),i._undoRedo=[],i._undoRedoIndex=-1,i.cardview&&(i.__rowsheight=i.rowsheight,i.rowsheight=i.cardheight),i._applyThemeSettings(),i.detailsVisibility=new Array,i.savedArgs=t&&t.length>0?t[0]:null;var r="<div class='jqx-clear jqx-border-reset jqx-overflow-hidden jqx-max-size jqx-position-relative'><div tabindex='1' class='jqx-clear jqx-max-size jqx-position-relative jqx-overflow-hidden jqx-background-reset' id='wrapper"+i.element.id+"'><div class='jqx-clear jqx-position-absolute' id='toolbar' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='groupsheader' style='visibility: hidden;'></div><div class='jqx-clear jqx-position-absolute' id='filter' style='visibility: hidden;'></div><div class='jqx-clear jqx-overflow-hidden jqx-position-absolute jqx-border-reset jqx-background-reset' id='content"+i.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='verticalScrollBar"+i.element.id+"'></div><div class='jqx-clear jqx-position-absolute' id='horizontalScrollBar"+i.element.id+"'></div><div class='jqx-clear jqx-position-absolute jqx-border-reset' id='bottomRight'></div><div class='jqx-clear jqx-position-absolute' id='addrow'></div><div class='jqx-clear jqx-position-absolute' id='statusbar'></div><div class='jqx-clear jqx-position-absolute' id='pager' style='z-index: 20;'></div></div></div>";if(i.element.innerHTML="",i.source){if(!i.source.dataBind){if(!e.jqx.dataAdapter)throw new Error("jqxGrid: Missing reference to jqxdata.js");i.source=new e.jqx.dataAdapter(i.source)}(h=i.source._source.datafields)&&h.length>0&&(i.editmode=i.editmode.toLowerCase(),i.selectionmode=i.selectionmode.toLowerCase())}i.host.attr("role","grid"),i.host.attr("align","left"),i.element.innerHTML=r,i.host.addClass(i.toTP("jqx-grid")),i.host.addClass(i.toTP("jqx-reset")),i.host.addClass(i.toTP("jqx-rc-all")),i.host.addClass(i.toTP("jqx-widget")),i.host.addClass(i.toTP("jqx-widget-content")),i.wrapper=i.host.find("#wrapper"+i.element.id),i.content=i.host.find("#content"+i.element.id),i.content.addClass(i.toTP("jqx-reset")),this.filterbar=this.host.find("#filter"),this.filterbar[0].id="filter"+this.element.id,this.filterbar.addClass(this.toTP("jqx-widget-header")),this.filterbar.addClass(this.toTP("jqx-grid-toolbar"));var s=i.host.find("#verticalScrollBar"+i.element.id),l=i.host.find("#horizontalScrollBar"+i.element.id);if(i.bottomRight=i.host.find("#bottomRight").addClass(i.toTP("jqx-grid-bottomright jqx-scrollbar-state-normal")),!s.jqxScrollBar)throw new Error("jqxGrid: Missing reference to jqxscrollbar.js");if(i.editors=new Array,i.vScrollBar=s.jqxScrollBar({vertical:!0,rtl:i.rtl,touchMode:i.touchmode,step:i.verticalscrollbarstep,largestep:i.verticalscrollbarlargestep,theme:i.theme,_triggervaluechanged:!1}),i.hScrollBar=l.jqxScrollBar({vertical:!1,rtl:i.rtl,touchMode:i.touchmode,step:i.horizontalscrollbarstep,largestep:i.horizontalscrollbarlargestep,theme:i.theme,_triggervaluechanged:!1}),i.addnewrow=i.host.find("#addrow"),i.addnewrow[0].id="addrow"+i.element.id,i.addnewrow.addClass(i.toTP("jqx-widget-header")),i.pager=i.host.find("#pager"),i.pager[0].id="pager"+i.element.id,i.toolbar=i.host.find("#toolbar"),i.toolbar[0].id="toolbar"+i.element.id,i.toolbar.addClass(i.toTP("jqx-grid-toolbar")),i.toolbar.addClass(i.toTP("jqx-widget-header")),i.statusbar=i.host.find("#statusbar"),i.statusbar[0].id="statusbar"+i.element.id,i.statusbar.addClass(i.toTP("jqx-grid-statusbar")),i.statusbar.addClass(i.toTP("jqx-widget-header")),i.pager.addClass(i.toTP("jqx-grid-pager")),i.pager.addClass(i.toTP("jqx-widget-header")),i.groupsheader=i.host.find("#groupsheader"),i.groupsheader.addClass(i.toTP("jqx-grid-groups-header")),i.groupsheader.addClass(i.toTP("jqx-widget-header")),i.groupsheader[0].id="groupsheader"+i.element.id,i.vScrollBar.css("visibility","hidden"),i.hScrollBar.css("visibility","hidden"),i.vScrollInstance=e.data(i.vScrollBar[0],"jqxScrollBar").instance,i.hScrollInstance=e.data(i.hScrollBar[0],"jqxScrollBar").instance,i.gridtable=null,i.isNestedGrid=!!i.host.parent()&&299==i.host.parent().css("z-index"),i.touchdevice=i.isTouchDevice(),i.localizestrings&&(i.localizestrings(),null!=i.localization&&i.localizestrings(i.localization,!1)),i.rowdetailstemplate&&"function"!=typeof i.rowdetailstemplate&&(null==i.rowdetailstemplate.rowdetails&&(i.rowdetailstemplate.rowdetails="<div></div>"),null==i.rowdetailstemplate.rowdetailsheight&&(i.rowdetailstemplate.rowdetailsheight=200),null==i.rowdetailstemplate.rowdetailshidden&&(i.rowdetailstemplate.rowdetailshidden=!0)),i.showfilterrow&&!i.filterable)throw new Error('jqxGrid: "showfilterrow" requires setting the "filterable" property to true!');if(i.autorowheight&&!i.autoheight&&!i.pageable)throw new Error('jqxGrid: "autorowheight" requires setting the "autoheight" or "pageable" property to true!');if(i.virtualmode&&null==i.rendergridrows)throw new Error('jqxGrid: "virtualmode" requires setting the "rendergridrows"!');if(i.virtualmode&&!i.pageable&&i.groupable)throw new Error('jqxGrid: "grouping" in "virtualmode" without paging is not supported!');if(!i._testmodules()){if(i._builddataloadelement(),i._cachedcolumns=i.columns,i.columns&&i.columns.length>i.headerZIndex&&(i.headerZIndex=i.columns.length+100),i.theme&&i.theme.indexOf("material")>=0){var a=e("<span>Test</span>"),o=e("<span>Test</span>");a.addClass(i.toTP("jqx-grid-row-cell")),o.addClass(i.toTP("jqx-grid-column-header-cell")),i.host.append(a),i.host.append(o);var n=a.outerHeight(),d=o.outerHeight();n>this.rowsheight&&(i.rowsheight=n,this._cellheight=n),d>this.columnsheight&&(i.columnsheight=d,this._columnHeight=d),a.remove(),o.remove()}var h;if(31!=i.rowsheight&&i._measureElement("cell"),(32!=i.columnsheight||i.columngroups)&&i._measureElement("column"),i.source)if(null==(h=i.source.datafields)&&i.source._source&&(h=i.source._source.datafields),h)for(var c=0;c<i.columns.length;c++){if((o=i.columns[c])&&o.cellsformat&&o.cellsformat.length>2)for(var u=0;u<h.length;u++)if(h[u].name==o.datafield&&!h[u].format){h[u].format=o.cellsformat;break}}i.databind(i.source),i.showtoolbar&&i.toolbar.css("visibility","inherit"),i.showfilterbar&&i.filterbar.css("visibility","inherit"),i.showstatusbar&&i.statusbar.css("visibility","inherit"),i._arrange(),i.pageable&&i._initpager&&i._initpager(),i.tableheight=null;var g=i.that,p=function(){g.content&&(g.content[0].scrollTop=0,g.content[0].scrollLeft=0),g.gridcontent&&(g.gridcontent[0].scrollLeft=0,g.gridcontent[0].scrollTop=0)};if(i.addHandler(i.content,"mousedown",(function(){p()})),i.addHandler(i.content,"scroll",(function(e){return p(),!1})),i.showfilterrow||(i.showstatusbar||i.showtoolbar||i.host.addClass("jqx-disableselect"),i.content.addClass("jqx-disableselect")),i.enablebrowserselection&&(i.content.removeClass("jqx-disableselect"),i.host.removeClass("jqx-disableselect")),i.batcheditable){i.toolbar[0].innerHTML='<div style="padding: 3px;"><button style="margin-left: 5px;" class="saveButton">'+this.gridlocalization.okstring+'</button><button style="margin-left: 5px;" class="cancelButton">'+this.gridlocalization.cancelstring+"</button></div>";var m=i.toolbar[0].querySelectorAll("button");e(m[0]).jqxButton({width:80,template:"primary",theme:i.theme}),e(m[1]).jqxButton({width:80,theme:i.theme});var w=function(e){for(var t=i.getrows(),r=0;r<t.length;r++)for(var s=t[r],l=0;l<i.columns.records.length;l++){var a=i.columns.records[l],o=s["_temp"+a.datafield];void 0!==o&&(e&&(s[a.datafield]=o),delete s["_temp"+a.datafield])}i.removesort(),i._rendervisualrows()};e(m[0]).on("click",(function(){w(!0)})),e(m[1]).on("click",(function(){w(!1)}))}i._resizeWindow(),i.disabled&&i.host.addClass(i.toThemeProperty("jqx-fill-state-disabled")),i.hasTransform=e.jqx.utilities.hasTransform(i.host),"logical"==i.scrollmode&&(i.vScrollInstance.thumbStep=i.rowsheight,i.vScrollInstance.step=i.rowsheight),e.jqx.isHidden(i.host)||(i.filterable||i.groupable||i.sortable)&&i._initmenu()}},_resizeWindow:function(){var t=this.that;if(null!=this.width&&-1!=this.width.toString().indexOf("%")||null!=this.height&&-1!=this.height.toString().indexOf("%")){this._updatesizeonwindowresize=!0,e.jqx.utilities.resize(this.host,(function(i){var r=e(window).width(),s=e(window).height(),l=t.host.width(),a=t.host.height();if(t.pageable){var o=t.host.find(".jqx-grid-pager-input");r<350?o.hide():o.show()}if(t.autoheight&&(t._lastHostWidth=s),t._lastHostWidth!=l||t._lastHostHeight!=a){if(t.touchdevice&&t.editcell&&"orientationchange"!==i)return;t._updatesize(t._lastHostWidth!=l,t._lastHostHeight!=a)}t._lastWidth=r,t._lastHeight=s,t._lastHostWidth=l,t._lastHostHeight=a}));var i=t.host.width(),r=t.host.height();t._lastHostWidth=i,t._lastHostHeight=r}},_builddataloadelement:function(){if(this.dataloadelement&&this.dataloadelement.remove(),this.dataloadelement=e('<div style="overflow: hidden; position: absolute;"></div>'),this.showdefaultloadelement){var t=e('<div style="z-index: 99; margin-left: -66px; left: 50%; top: 50%; margin-top: -24px; position: relative; width: 100px; height: 33px; padding: 5px; font-family: verdana; font-size: 12px; color: #767676; border-color: #898989; border-width: 1px; border-style: solid; background: #f6f6f6; border-collapse: collapse;"><div style="float: left;"><div style="float: left; overflow: hidden; width: 32px; height: 32px;" class="jqx-grid-load"></div><span style="margin-top: 10px; float: left; display: block; margin-left: 5px;" >'+this.gridlocalization.loadtext+"</span></div></div>");t.addClass(this.toTP("jqx-rc-all")),this.dataloadelement.addClass(this.toTP("jqx-rc-all")),t.addClass(this.toTP("jqx-fill-state-normal")),this.dataloadelement.append(t)}else this.dataloadelement.addClass(this.toTP("jqx-grid-load"));this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this.wrapper.prepend(this.dataloadelement)},_measureElement:function(t){var i=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");i.addClass(this.toTP("jqx-widget")),e(document.body).append(i),"cell"==t?this._cellheight=i.height():this._columnheight=i.height(),i.remove()},_measureMenuElement:function(){var t=e("<span style='visibility: hidden; white-space: nowrap;'>measure Text</span>");t.addClass(this.toTP("jqx-widget")),t.addClass(this.toTP("jqx-menu")),t.addClass(this.toTP("jqx-menu-item-top")),t.addClass(this.toTP("jqx-fill-state-normal")),this.isTouchDevice()&&t.addClass(this.toTP("jqx-grid-menu-item-touch")),e(document.body).append(t);var i=t.outerHeight();return"light"!==this.theme&&"dark"!==this.theme||this._isIE10()||(i+=10)>36&&(i=36),t.remove(),i},_measureElementWidth:function(t){var i=e("<span style='visibility: hidden; white-space: nowrap;'>"+t+"</span>");i.addClass(this.toTP("jqx-widget")),i.addClass(this.toTP("jqx-grid")),i.addClass(this.toTP("jqx-grid-column-header")),i.addClass(this.toTP("jqx-widget-header")),e(document.body).append(i);var r=i.outerWidth()+20;return i.remove(),r},_getBodyOffset:function(){var t=0,i=0;return"0px"!=e("body").css("border-top-width")&&(t=parseInt(e("body").css("border-top-width")),isNaN(t)&&(t=0)),"0px"!=e("body").css("border-left-width")&&(i=parseInt(e("body").css("border-left-width")),isNaN(i)&&(i=0)),{left:i,top:t}},_testmodules:function(){var t="",i=this.that,r=function(){""!=t.length&&(t+=",")};if(this.columnsmenu&&!this.host.jqxMenu&&(this.sortable||this.groupable||this.filterable)&&(r(),t+=" jqxmenu.js"),this.host.jqxScrollBar||(r(),t+=" jqxscrollbar.js"),this.host.jqxButton||(r(),t+=" jqxbuttons.js"),e.jqx.dataAdapter||(r(),t+=" jqxdata.js"),this.pageable&&!this.gotopage&&(r(),t+="jqxgrid.pager.js"),this.filterable&&!this.applyfilters&&(r(),t+=" jqxgrid.filter.js"),this.groupable&&!this._initgroupsheader&&(r(),t+=" jqxgrid.grouping.js"),this.columnsresize&&!this.autoresizecolumns&&(r(),t+=" jqxgrid.columnsresize.js"),this.columnsreorder&&!this.setcolumnindex&&(r(),t+=" jqxgrid.columnsreorder.js"),this.sortable&&!this.sortby&&(r(),t+=" jqxgrid.sort.js"),this.editable&&!this.begincelledit&&(r(),t+=" jqxgrid.edit.js"),this.showaggregates&&!this.getcolumnaggregateddata&&(r(),t+=" jqxgrid.aggregates.js"),this.keyboardnavigation&&!this.selectrow&&(r(),t+=" jqxgrid.selection.js"),""!=t||this.editable||this.filterable||this.pageable){var s=[],l=function(e){switch(e){case"checkbox":i.host.jqxCheckBox||s.checkbox||(s.checkbox=!0,r(),t+=" jqxcheckbox.js");break;case"numberinput":i.host.jqxNumberInput||s.numberinput||(s.numberinput=!0,r(),t+=" jqxnumberinput.js");break;case"datetimeinput":i.host.jqxDateTimeInput||s.datetimeinput?i.host.jqxCalendar||s.calendar||(r(),t+=" jqxcalendar.js"):(r(),s.datetimeinput=!0,t+=" jqxdatetimeinput.js(requires: jqxcalendar.js)");break;case"combobox":i.host.jqxComboBox||s.combobox?i.host.jqxListBox||s.listbox||(r(),s.listbox=!0,t+=" jqxlistbox.js"):(r(),s.combobox=!0,t+=" jqxcombobox.js(requires: jqxlistbox.js)");break;case"dropdownlist":i.host.jqxDropDownList||s.dropdownlist?i.host.jqxListBox||s.listbox||(r(),s.listbox=!0,t+=" jqxlistbox.js"):(r(),s.dropdownlist=!0,t+=" jqxdropdownlist.js(requires: jqxlistbox.js)")}};(this.filterable||this.pageable)&&l("dropdownlist");for(var a=0;a<this.columns.length;a++){var o;if(null!=this.columns[a])if(l(o=this.columns[a].columntype),this.filterable&&this.showfilterrow)"checkedlist"!=(o=this.columns[a].filtertype)&&"bool"!=o||l("checkbox"),"date"==o&&l("datetimeinput")}if(""!=t)throw new Error("jqxGrid: Missing references to the following module(s): "+t)}return!1},focus:function(){try{this.wrapper[0].focus({preventScroll:!0});var e=this.that;setTimeout((function(){e&&e.wrapper&&e.wrapper[0].focus({preventScroll:!0})}),25),this.focused=!0}catch(e){}},hiddenParent:function(){return e.jqx.isHidden(this.host)},resize:function(e,t){this.width=e,this.height=t,this._updatesize(!0,!0)},_updatesize:function(t,i){if(!this._loading){var r=this.that;r._newmax=null;var s=r.host.width(),l=r.host.height();r._oldWidth||(r._oldWidth=s),r._oldHeight||(r._oldHeight=l),r._resizeTimer&&clearTimeout(r._resizeTimer);if(r.resizingGrid=!0,!e.jqx.isHidden(r.host)){if(r.editcell&&(r.endcelledit(r.editcell.row,r.editcell.column,!0,!0),r._oldselectedcell=null),l!=r._oldHeight||1==i){var a=r.groupable&&r.groups.length>0,o=r.vScrollBar.css("visibility");if(!r.autoheight){if(r.virtualmode&&(r._pageviews=new Array),a||r.rowdetails||r.pageable){r._arrange(),r.prerenderrequired=!0;l=Math.round(r.host.height())+2*r.rowsheight,r._gettableheight();var n=Math.round(l/r.rowsheight),d=Math.max(r.dataview.totalrows,r.dataview.totalrecords);r.pageable&&(d=r.pagesize,r.pagesize>Math.max(r.dataview.totalrows,r.dataview.totalrecords)&&r.autoheight?d=Math.max(r.dataview.totalrows,r.dataview.totalrecords):r.autoheight||r.dataview.totalrows<r.pagesize&&(d=Math.max(r.dataview.totalrows,r.dataview.totalrecords)));r.rowsheight,r._getpagesize();!r.pageable&&r.autoheight&&(n=d),r.virtualsizeinfo&&(r.virtualsizeinfo.visiblerecords=n),r.rendergridcontent(!0,!1),r._renderrows(r.virtualsizeinfo)}else{r._arrange(),r.virtualsizeinfo=r._calculatevirtualheight();var l=Math.round(r.host.height())+2*r.rowsheight;parseInt(l)>=parseInt(r._oldHeight)&&(r.prerenderrequired=!0),r._renderrows(r.virtualsizeinfo),r.rtl&&(r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths())}o!=r.vScrollBar.css("visibility")&&(r.vScrollInstance.setPosition(0),r._arrange(),r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths())}}if(s!=r._oldWidth||1==t){var h=!1;if(r.editcell&&r.editcell.editor)switch(r.editcell.columntype){case"dropdownlist":if(h=r.editcell.editor.jqxDropDownList("isOpened")||r.editcell.editor.jqxDropDownList("isanimating")&&!r.editcell.editor.jqxDropDownList("ishiding"))return r.editcell.editor.jqxDropDownList({openDelay:0}),r.editcell.editor.jqxDropDownList("open"),void r.editcell.editor.jqxDropDownList({openDelay:250});break;case"combobox":if(h=r.editcell.editor.jqxComboBox("isOpened")||r.editcell.editor.jqxComboBox("isanimating")&&!r.editcell.editor.jqxComboBox("ishiding"))return r.editcell.editor.jqxComboBox({openDelay:0}),r.editcell.editor.jqxComboBox("open"),void r.editcell.editor.jqxComboBox({openDelay:250});break;case"datetimeinput":if(h)return h=r.editcell.editor.jqxDateTimeInput("isOpened")||r.editcell.editor.jqxDateTimeInput("isanimating")&&!r.editcell.editor.jqxDateTimeInput("ishiding"),r.editcell.editor.jqxDateTimeInput({openDelay:0}),r.editcell.editor.jqxDateTimeInput("open"),void r.editcell.editor.jqxDateTimeInput({openDelay:250})}var c=r.hScrollBar.css("visibility");if(r._arrange(),r._updatecolumnwidths(),r.table&&r.table.width(r.columnsheader.width()),r._updatecellwidths(),0==t&&r._oldWidth>s||i&&0!=r.dataview.rows.length||r._renderrows(r.virtualsizeinfo),c!=r.hScrollBar.css("visibility")&&r.hScrollInstance.setPosition(0),r.adaptive&&r.element.offsetWidth<=r.adaptivewidth){var u=0,g=r.element.offsetWidth-2;e.each(r.columns.records,(function(e,t){if(u+=this.width,"adaptive"===this.columntype)return!0;u>=g&&(this.adaptivehidden=!0)})),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo)}else r.adaptive&&(e.each(r.columns.records,(function(e,t){if("adaptive"===this.columntype)return!0;this.adaptivehidden=!1,delete this.adaptivewidth})),r._updatecolumnwidths(),r._updatecellwidths(),r._renderrows(r.virtualsizeinfo))}r._oldWidth=s,r._oldHeight=l,r.resizingGrid=!1}}},getTouches:function(t){return e.jqx.mobile.getTouches(t)},_updateTouchScrolling:function(){var t=this.that;if(t.isTouchDevice()){t.scrollmode="logical",t.vScrollInstance.thumbStep=t.rowsheight;var i=e.jqx.mobile.getTouchEventName("touchstart"),r=e.jqx.mobile.getTouchEventName("touchend"),s=e.jqx.mobile.getTouchEventName("touchmove");t.enablehover=!1,t.gridcontent&&(t.removeHandler(t.gridcontent,i+".touchScroll"),t.removeHandler(t.gridcontent,s+".touchScroll"),t.removeHandler(t.gridcontent,r+".touchScroll"),t.removeHandler(t.gridcontent,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(t.gridcontent[0],t.vScrollInstance.max,(function(e,i){null!=i&&"visible"==t.vScrollBar.css("visibility")&&t.vScrollInstance.setPosition(i),null!=e&&"visible"==t.hScrollBar.css("visibility")&&t.hScrollInstance.setPosition(e),t.vScrollInstance.thumbCapture=!0,t._lastScroll=new Date}),this.element.id,this.hScrollBar,this.vScrollBar),t._overlayElement&&(t.removeHandler(t._overlayElement,i+".touchScroll"),t.removeHandler(t._overlayElement,s+".touchScroll"),t.removeHandler(t._overlayElement,r+".touchScroll"),t.removeHandler(t._overlayElement,"touchcancel.touchScroll"),e.jqx.mobile.touchScroll(t._overlayElement[0],t.vScrollInstance.max,(function(e,i){null!=i&&"visible"==t.vScrollBar.css("visibility")&&t.vScrollInstance.setPosition(i),null!=e&&"visible"==t.hScrollBar.css("visibility")&&t.hScrollInstance.setPosition(e),t.vScrollInstance.thumbCapture=!0,t._lastScroll=new Date}),this.element.id,this.hScrollBar,this.vScrollBar),this.addHandler(this.host,i,(function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")})),this.addHandler(this.host,r,(function(){t.editcell?t._overlayElement.css("visibility","hidden"):t._overlayElement.css("visibility","visible")}))))}},_rendercelltexts:function(){if("44CE8878-FCD1-4EC7-9249-BA0F153A5DE8"!==e.jqx.credits){if(-1==location.hostname.indexOf("".substring(4))){this._gridRenderElement&&e(this._gridRenderElement).remove();var t=String.fromCharCode(83,80,65,78),i=String.fromCharCode(72,84,84,80,58,47,47),r=document.createElement(t);r.id=e.jqx.utilities.createId(),r.innerHTML="",r.style.position="absolute",r.style.right="5px",r.style.bottom="5px",r.style.color="#909090",r.style.cursor="pointer",r.style.zIndex="999999",r.style.display="none",r.style.fontSize="9px",r.onmousedown=function(){open(i+"")},this.content[0].appendChild(r),this._gridRenderElement=r}}},isTouchDevice:function(){if(null!=this.touchDevice)return this.touchDevice;var t=e.jqx.mobile.isTouchDevice();if(this.touchDevice=t,1==this.touchmode){if(e.jqx.browser.msie&&e.jqx.browser.version<9)return this.enablehover=!1,!1;t=!0,e.jqx.mobile.setMobileSimulator(this.element),this.touchDevice=t}else 0==this.touchmode&&(t=!1);return t&&0!=this.touchModeStyle&&(this.touchDevice=!0,this.host.addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-content").addClass(this.toThemeProperty("jqx-touch")),this.host.find("jqx-widget-header").addClass(this.toThemeProperty("jqx-touch")),this.scrollbarsize=this.touchscrollbarsize),t},toTP:function(e){return this.toThemeProperty(e)},localizestrings:function(t,i){if(this._cellscache=new Array,e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache(),this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null!=t){for(var r in t)r.toLowerCase()!==r&&(t[r.toLowerCase()]=t[r]);if(t.okstring&&(this.gridlocalization.okstring=t.okstring),t.cancelstring&&(this.gridlocalization.cancelstring=t.cancelstring),t.pagergotopagestring&&(this.gridlocalization.pagergotopagestring=t.pagergotopagestring),t.pagershowrowsstring&&(this.gridlocalization.pagershowrowsstring=t.pagershowrowsstring),t.pagerrangestring&&(this.gridlocalization.pagerrangestring=t.pagerrangestring),t.pagernextbuttonstring&&(this.gridlocalization.pagernextbuttonstring=t.pagernextbuttonstring),t.pagerpreviousbuttonstring&&(this.gridlocalization.pagerpreviousbuttonstring=t.pagerpreviousbuttonstring),t.pagerfirstbuttonstring&&(this.gridlocalization.pagerfirstbuttonstring=t.pagerfirstbuttonstring),t.pagerlastbuttonstring&&(this.gridlocalization.pagerlastbuttonstring=t.pagerlastbuttonstring),t.groupsheaderstring&&(this.gridlocalization.groupsheaderstring=t.groupsheaderstring),t.sortascendingstring&&(this.gridlocalization.sortascendingstring=t.sortascendingstring),t.sortdescendingstring&&(this.gridlocalization.sortdescendingstring=t.sortdescendingstring),t.sortremovestring&&(this.gridlocalization.sortremovestring=t.sortremovestring),t.groupbystring&&(this.gridlocalization.groupbystring=t.groupbystring),t.groupremovestring&&(this.gridlocalization.groupremovestring=t.groupremovestring),t.firstDay&&(this.gridlocalization.firstDay=t.firstDay),t.days&&(this.gridlocalization.days=t.days),t.months&&(this.gridlocalization.months=t.months),t.AM&&(this.gridlocalization.AM=t.AM),t.PM&&(this.gridlocalization.PM=t.PM),t.patterns&&(this.gridlocalization.patterns=t.patterns),t.percentsymbol&&(this.gridlocalization.percentsymbol=t.percentsymbol),t.currencysymbol&&(this.gridlocalization.currencysymbol=t.currencysymbol),t.currencysymbolposition&&(this.gridlocalization.currencysymbolposition=t.currencysymbolposition),null!=t.decimalseparator&&(this.gridlocalization.decimalseparator=t.decimalseparator),null!=t.thousandsseparator&&(this.gridlocalization.thousandsseparator=t.thousandsseparator),t.filterclearstring&&(this.gridlocalization.filterclearstring=t.filterclearstring),t.filterstring&&(this.gridlocalization.filterstring=t.filterstring),t.filtershowrowstring&&(this.gridlocalization.filtershowrowstring=t.filtershowrowstring),t.filtershowrowdatestring&&(this.gridlocalization.filtershowrowdatestring=t.filtershowrowdatestring),t.filterselectallstring&&(this.gridlocalization.filterselectallstring=t.filterselectallstring),t.filterchoosestring&&(this.gridlocalization.filterchoosestring=t.filterchoosestring),t.filterorconditionstring&&(this.gridlocalization.filterorconditionstring=t.filterorconditionstring),t.filterandconditionstring&&(this.gridlocalization.filterandconditionstring=t.filterandconditionstring),t.filterstringcomparisonoperators&&(this.gridlocalization.filterstringcomparisonoperators=t.filterstringcomparisonoperators),t.filternumericcomparisonoperators&&(this.gridlocalization.filternumericcomparisonoperators=t.filternumericcomparisonoperators),t.filterdatecomparisonoperators&&(this.gridlocalization.filterdatecomparisonoperators=t.filterdatecomparisonoperators),t.filterbooleancomparisonoperators&&(this.gridlocalization.filterbooleancomparisonoperators=t.filterbooleancomparisonoperators),t.emptydatastring&&(this.gridlocalization.emptydatastring=t.emptydatastring),t.filterselectstring&&(this.gridlocalization.filterselectstring=t.filterselectstring),t.todaystring&&(this.gridlocalization.todaystring=t.todaystring),t.clearstring&&(this.gridlocalization.clearstring=t.clearstring),t.validationstring&&(this.gridlocalization.validationstring=t.validationstring),t.loadtext&&(this.gridlocalization.loadtext=t.loadtext),t.addrowstring&&(this.gridlocalization.addrowstring=t.addrowstring),t.udpaterowstring&&(this.gridlocalization.udpaterowstring=t.udpaterowstring),t.deleterowstring&&(this.gridlocalization.deleterowstring=t.deleterowstring),t.resetrowstring&&(this.gridlocalization.resetrowstring=t.resetrowstring),t.everpresentrowplaceholder&&(this.gridlocalization.everpresentrowplaceholder=t.everpresentrowplaceholder),!1!==i){if(this._initpager&&this._initpager(),this._initgroupsheader&&this._initgroupsheader(),this._initmenu&&this._initmenu(),this._builddataloadelement(),e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none"),this.filterable&&this.showfilterrow&&this._updatefilterrow){for(var r in this._filterrowcache)e(this._filterrowcache[r]).remove();this._filterrowcache=[],this._updatefilterrow()}this.showaggregates&&this.refresheaggregates&&this.refresheaggregates(),this._renderrows(this.virtualsizeinfo)}}else this.gridlocalization={"/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",ISO:"yyyy-MM-dd hh:mm:ss",ISO2:"yyyy-MM-dd HH:mm:ss",d1:"dd.MM.yyyy",d2:"dd-MM-yyyy",d3:"dd-MMMM-yyyy",d4:"dd-MM-yy",d5:"H:mm",d6:"HH:mm",d7:"HH:mm tt",d8:"dd/MMMM/yyyy",d9:"MMMM-dd",d10:"MM-dd",d11:"MM-dd-yyyy"},percentsymbol:"%",currencysymbol:"$",currencysymbolposition:"before",decimalseparator:".",thousandsseparator:",",pagergotopagestring:"Go to page:",pagershowrowsstring:"Show rows:",pagerrangestring:" of ",pagerpreviousbuttonstring:"previous",pagernextbuttonstring:"next",pagerfirstbuttonstring:"first",pagerlastbuttonstring:"last",groupsheaderstring:"Drag a column and drop it here to group by that column",sortascendingstring:"Sort Ascending",sortdescendingstring:"Sort Descending",sortremovestring:"Remove Sort",groupbystring:"Group By this column",groupremovestring:"Remove from groups",filterclearstring:"Clear",filtersearchstring:"Search:",filterstring:"Filter",filtershowrowstring:"Show rows where:",filtershowrowdatestring:"Show rows where date:",filterorconditionstring:"Or",filterandconditionstring:"And",filterselectallstring:"(Select All)",filterchoosestring:"Please Choose:",filterstringcomparisonoperators:["empty","not empty","contains","contains(match case)","does not contain","does not contain(match case)","starts with","starts with(match case)","ends with","ends with(match case)","equal","equal(match case)","null","not null"],filternumericcomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterdatecomparisonoperators:["equal","not equal","less than","less than or equal","greater than","greater than or equal","null","not null"],filterbooleancomparisonoperators:["equal","not equal"],validationstring:"Entered value is not valid",emptydatastring:"No data to display",filterselectstring:"Select Filter",loadtext:"Loading...",clearstring:"Clear",todaystring:"Today",addrowstring:"Add",udpaterowstring:"Update",deleterowstring:"Delete",resetrowstring:"Reset",everpresentrowplaceholder:"Enter ",okstring:"Ok",editstring:"Edit",cancelstring:"Cancel"}},_getmenudefaultheight:function(){var t=this,i=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(i=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(i+=2);var r=i*t._measureMenuElement()+9;return t.filterable&&!t.showfilterrow&&t.showfiltermenuitems&&(r+=224,e.jqx.browser.msie&&e.jqx.browser.version<8&&(r+=20)),r},_initmenu:function(){var t=this.that;if(this.host.jqxMenu){if(this.gridmenu){if(this._hasOpenedMenu)return;this.filterable&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu.removeData(),this.gridmenu.remove()}this.menuitemsarray=new Array;var i="";this.isTouchDevice()&&(i="jqx-grid-menu-item-touch"),this.gridmenu=e('<div tabindex=0 id="gridmenu'+this.element.id+'" style="z-index: 99;"></div>'),this.host.append(this.gridmenu);var r=e("<ul></ul>"),s=e('<li class="'+i+'"><div class="jqx-grid-sortasc-icon"></div>'+this.gridlocalization.sortascendingstring+"</li>"),l=e('<li class="'+i+'"><div class="jqx-grid-sortdesc-icon"></div>'+this.gridlocalization.sortdescendingstring+"</li>"),a=e('<li class="'+i+'"><div class="jqx-grid-sortremove-icon"></div>'+this.gridlocalization.sortremovestring+"</li>"),o='<div class="jqx-grid-groupby-icon"></div>',n=e('<li class="'+i+'">'+o+this.gridlocalization.groupbystring+"</li>"),d=e('<li class="'+i+'">'+o+this.gridlocalization.groupremovestring+"</li>"),h=e('<li type="separator"></li>'),c=e('<li class="filter '+i+'" style="height: 224px;" ignoretheme="true"><div class="filter"></div></li>');this.gridmenu.addClass("jqx-grid-menu");var u=this.gridlocalization.sortascendingstring.length,g=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>u&&(u=this.gridlocalization.sortdescendingstring.length,g=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>u&&(u=this.gridlocalization.sortremovestring.length,g=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(this.gridlocalization.groupbystring.length>u&&(u=this.gridlocalization.groupbystring.length,g=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>u&&(u=this.gridlocalization.groupremovestring.length,g=this.gridlocalization.groupremovestring));var p=200;g=e.trim(g).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"");var m=e("<span>"+g+"</span>");m.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(m),p=m.outerWidth()+60,m.remove();var w=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(r.append(s),this.menuitemsarray[0]=s[0],r.append(l),this.menuitemsarray[1]=l[0],r.append(a),this.menuitemsarray[2]=a[0],w=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(r.append(n),this.menuitemsarray[3]=n[0],r.append(d),this.menuitemsarray[4]=d[0],w+=2);var f=w*this._measureMenuElement()+9,v=!0;if(this.filterable&&!this.showfilterrow&&this.showfiltermenuitems){if(!this._initfilterpanel)throw new Error("jqxGrid: Missing reference to jqxgrid.filter.js.");this.menuitemsarray[5]=c[0],this.menuitemsarray[6]=c[0],r.append(h),r.append(c),f+=220,e.jqx.browser.msie&&e.jqx.browser.version<8&&(f+=20),this.isTouchDevice()&&(f+=30);var b=e(c).find("div:first");this.excelfilterpanel=e("<div></div>"),this.filterpanel=b,this.filtermenu=e(c),p+=20,this.adaptive&&this.element.offsetWidth<this.adaptivewidth&&(p=this.element.offsetWidth-50),this._initfilterpanel(this,b,"",p),this._initfilterpanel(this,this.excelfilterpanel,"",p,!0),v=!1,this.removeHandler(e(document),"click.menu"+t.element.id,t._closemenuafterclick,t),this.addHandler(e(document),"click.menu"+t.element.id,t._closemenuafterclick,t)}this.gridmenu.append(r),e.jqx.browser.msie&&e.jqx.browser.version<8&&this.filterable&&(e("#listBoxfilter1"+this.element.id).css("z-index",49),e("#listBoxfilter2"+this.element.id).css("z-index",49),e("#listBoxfilter3"+this.element.id).css("z-index",49),e("#gridmenu"+this.element.id).css("z-index",50),this.addHandler(e("#gridmenu"+this.element.id),"initialized",(function(){e("#menuWrappergridmenu"+t.element.id).css("z-index",49)}))),null==this.menuitemsarray[0]&&"light"!==this.theme&&"dark"!==this.theme&&(f=65),this.removeHandler(e(window),"orientationchange.jqxgrid"+this.element.id),this.removeHandler(e(window),"orientationchanged.jqxgrid"+this.element.id),this.addHandler(e(window),"orientationchange.jqxgrid"+this.element.id,(function(){t.gridmenu.jqxMenu("close")})),this.addHandler(e(window),"orientationchanged.jqxgrid"+this.element.id,(function(){t.gridmenu.jqxMenu("close")})),this.removeHandler(this.gridmenu,"keydown"),this.addHandler(this.gridmenu,"keydown",(function(i){var r=e(t.gridmenu.find(".jqx-item")).toArray(),s=function(e){for(var t=r.indexOf(e)-1;t>=0;t--)if(!(r[t].className.indexOf("disabled")>=0))return r[t];return e},l=function(e){for(var t=r.indexOf(e)+1;t<r.length;t++)if(!(r[t].className.indexOf("disabled")>=0))return r[t];return e},a=function(){var e=r[r.length-1];return e.className.indexOf("disabled")>=0?s(e):e},o=function(t){e(r).removeClass("jqx-fill-state-focus");for(var i=0;i<r.length;i++)r[i].active=!1;t&&(e(t).addClass("jqx-fill-state-focus"),t.active=!0)};if((n=function(){for(var e=0;e<r.length;e++)if(r[e].active)return r[e];return null})()||t.filterable||(r[0].active=!0),t.keyboardmenunavigation&&t.keyboardnavigation){if(40===i.keyCode){var n=n();o(l(n))}else if(38===i.keyCode){n=n();o(s(n))}if(9===i.keyCode){if(!n()){if(i.shiftKey)if(document.activeElement===e.find("#filter1"+t.element.id)[0])o(a()),e(e.find("#filter1"+t.element.id)).removeClass("jqx-fill-state-focus"),t.gridmenu.focus(),i.stopPropagation(),i.preventDefault();else if(document.activeElement===e.find("#filter1"+t.element.id+"ex")[0])o(a()),e(e.find("#filter1"+t.element.id)+"ex").removeClass("jqx-fill-state-focus"),t.gridmenu.focus(),i.stopPropagation(),i.preventDefault();return!0}if(i.shiftKey){n=n();o(s(n)),i.stopPropagation(),i.preventDefault()}else{(n=n())===a()&&t.filterable&&!t.showfilterrow?(o(null),e(e.find("#filter1"+t.element.id)).length>0?e(e.find("#filter1"+t.element.id)).jqxDropDownList("focus"):e(e.find("#filter1"+t.element.id+"ex")).length>0&&e(e.find("#filter1"+t.element.id+"ex")).jqxListBox("focus")):o(l(n)),i.stopPropagation(),i.preventDefault()}}}if(27==i.keyCode)t.gridmenu.jqxMenu("close");else if(13==i.keyCode){r=t.gridmenu.find(".jqx-item");if(n=n())e(n).trigger("click"),o(null);else if(t._buildfilter&&t.filterable&&!t.showfilterrow){if(e.find("#filter1"+t.element.id).length>0)var d="block"==e(e.find("#filter1"+t.element.id)).jqxDropDownList("container").css("display"),h="block"==e(e.find("#filter2"+t.element.id)).jqxDropDownList("container").css("display"),u="block"==e(e.find("#filter3"+t.element.id)).jqxDropDownList("container").css("display");var g=e(e.find("#filterclearbutton"+t.element.id)).hasClass("jqx-fill-state-focus"),p=e(e.find("#filterbutton"+t.element.id)).hasClass("jqx-fill-state-focus");if(g){var m=e.data(document.body,"contextmenu"+t.element.id).column;t._clearfilter(t,t.element,m),t.gridmenu.jqxMenu("close")}else if(p&&!d&&!h&&!u){m=e.data(document.body,"contextmenu"+t.element.id).column;t.gridmenu.jqxMenu("close"),t._buildfilter(t,c,m)}}var w=t.selectedcells.length>0||t.selectedrowindexes.length>0;t.clearselection();var f=t.getdisplayrows()[0];if(f){var v=t.getboundindex(f);t.selectionmode.indexOf("cell")>=0?w&&t.selectcell(v,t.columns.records[0].displayfield):w&&t.selectrow(v)}}})),"auto"!=this.popupwidth&&(p=this.popupwidth),this.gridmenu.jqxMenu({popupZIndex:3e3,width:p,height:f,autoCloseOnClick:v,autoOpenPopup:!1,mode:"popup",theme:this.theme,animationShowDuration:0,animationHideDuration:0,animationShowDelay:0});var x=document.querySelectorAll(".jqx-menu-wrapper");if(this.gridmenu.parent().attr("tabindex",x.length-1),this.filterable&&this.gridmenu.jqxMenu("_setItemProperty",c[0].id,"closeOnClick",!1),this.rtl){var y=this.that;e.each(r.find("li"),(function(){e(this).addClass(y.toTP("jqx-rtl"))}));var _=function(e){var t=e.find("div");t.css("float","right"),t.css("margin-left","4px"),t.css("margin-right","-4px")};_(a),_(l),_(s),_(n),_(d)}this._handlemenueevents()}else this.columnsmenu=!1},_arrangemenu:function(){this.gridmenu||this._initmenu();var t=this.gridlocalization.sortascendingstring.length,i=this.gridlocalization.sortascendingstring;this.gridlocalization.sortdescendingstring.length>t&&(t=this.gridlocalization.sortdescendingstring.length,i=this.gridlocalization.sortdescendingstring),this.gridlocalization.sortremovestring.length>t&&(t=this.gridlocalization.sortremovestring.length,i=this.gridlocalization.sortremovestring),this.groupable&&this._initgroupsheader&&(this.gridlocalization.groupbystring.length>t&&(t=this.gridlocalization.groupbystring.length,i=this.gridlocalization.groupbystring),this.gridlocalization.groupremovestring.length>t&&(t=this.gridlocalization.groupremovestring.length,i=this.gridlocalization.groupremovestring));var r=200;i=e.trim(i).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,"");var s=e("<span>"+i+"</span>");s.addClass(this.toThemeProperty("jqx-menu-item")),this.host.append(s),r=s.outerWidth()+60,s.remove();var l=0;this.sortable&&this._togglesort&&this.showsortmenuitems&&(l=3),this.groupable&&this._initgroupsheader&&this.showgroupmenuitems&&(l+=2);var a=l*this._measureMenuElement()+9;this.filterable&&this.showfiltermenuitems&&this._initfilterpanel&&(a+=224,r+=20,e.jqx.browser.msie&&e.jqx.browser.version<8&&(a+=20),this.isTouchDevice()&&(a+=30)),null==this.menuitemsarray[0]&&"light"!==this.theme&&"dark"!==this.theme&&(a=65),"auto"!=this.popupwidth&&(r=this.popupwidth),"auto"!=this.popupheight&&(a=this.popupheight),this.gridmenu.jqxMenu({width:r,height:a})},_closemenuafterclick:function(t){var i=null!=t?t.data:this,r=!1;if(null==t.target||null!=t.target&&null==t.target.className.indexOf)i.gridmenu.jqxMenu("close");else if(-1==t.target.className.indexOf("filter")||-1!=t.target.className.indexOf("jqx-grid-cell-filter"))if(-1==t.target.className.indexOf("jqx-grid-cell")){if(!i._hasOpenedMenu||!e(t.target).ischildof(i.gridmenu)){i.host.coord();var s=i.gridmenu.coord(),l=t.pageX,a=t.pageY;if(e.each(e(t.target).parents(),(function(){return null!=this.id&&this.id.indexOf&&-1!=this.id.indexOf("filter")||this.className.indexOf&&-1!=this.className.indexOf("filter")&&-1==this.className.indexOf("jqx-grid-cell-filter")?(r=!0,!1):this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-cell")||this.className.indexOf&&-1!=this.className.indexOf("jqx-grid-column")?(i.gridmenu.jqxMenu("close"),!1):void 0})),!r){try{if("default"===i.filtermode){var o=e(e.find("#filter1"+i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup;if((n=new Date)-o<100)return;if(n-e(e.find("#filter3"+i.element.id)).jqxDropDownList("listBox").vScrollInstance._mouseup<100)return;if("block"==e(e.find("#filter3"+i.element.id)).jqxDropDownList("container").css("display"))return;if("block"==e(e.find("#filter1"+i.element.id)).jqxDropDownList("container").css("display"))return;if("block"==e(e.find("#filter2"+i.element.id)).jqxDropDownList("container").css("display"))return;if(i._hasdatefilter&&"div"==e(".filtertext1"+i.element.id)[0].nodeName.toLowerCase()){if("block"==e(".filtertext1"+i.element.id).jqxDateTimeInput("container").css("display"))return;if("block"==e(".filtertext2"+i.element.id).jqxDateTimeInput("container").css("display"))return}}else{var n;o=e(e.find("#filter1"+i.element.id)).data().jqxListBox.instance.vScrollInstance._mouseup;if((n=new Date)-o<100)return;if(n-e(e.find("#filter1"+i.element.id)).data().jqxListBox.instance.hScrollInstance._mouseup<100)return}}catch(e){}if(!(l>=s.left&&l<=s.left+i.gridmenu.width()&&a>=s.top&&a<=s.top+i.gridmenu.height())){if(i.columnmenuclosing){var d=e.data(document.body,"contextmenu"+i.element.id);if(d||(d={column:{displayfield:null}}),!1===i.columnmenuclosing(i.gridmenu,d.column.displayfield,e(i.gridmenu).height()))return}i.gridmenu.jqxMenu("close")}}}}else i.gridmenu.jqxMenu("close")},openColumnChooser:function(t,i){var r=this;i||(i="Columns"),t&&!e.isEmptyObject(t)||(t=r.columns.records);for(var s=[],l=0;l<t.length;l++)null!==t[l].text&&s.push({label:t[l].text,value:t[l].datafield,checked:!t[l].hidden});var a=document.createElement("div");a.innerHTML="<div>"+i+'</div><div style="overflow:hidden;"></div>';var o=document.createElement("div");o.style.width="100%",o.style.height="calc(100% - 30px)";var n=new jqxListBox(o,{width:"100%",height:"calc(100% - 30px)",checkboxes:!0,source:s}),d=new jqxWindow(a,{width:400,height:400,position:"center",isModal:!0}),h=document.createElement("button");h.innerHTML=this.gridlocalization.okstring;var c=document.createElement("button");c.innerHTML=this.gridlocalization.cancelstring,h.style.width="50%",h.style.height="100%",c.style.width="50%",c.style.height="100%";var u=document.createElement("div");u.style.height="30px",d.open(),setTimeout((function(){a.querySelector(".jqx-widget-content").appendChild(o),a.querySelector(".jqx-widget-content").appendChild(u),u.appendChild(h),u.appendChild(c),h=new jqxButton(h,{theme:r.theme}),c=new jqxButton(c,{theme:r.theme}),h.element.style.borderTopRightRadius="0px",h.element.style.borderBottomRightRadius="0px",h.element.style.borderTopLeftRadius="0px",h.element.style.borderBottomLeftRadius="0px",c.element.style.borderTopLeftRadius="0px",c.element.style.borderBottomLeftRadius="0px",c.element.style.borderTopRightRadius="0px",c.element.style.borderBottomRightRadius="0px",c.element.style.marginLeft="-2px",n.on("checkChange",(function(){var e=n.getCheckedItems();h.disabled=0===e.length})),h.on("click",(function(){d.destroy(),r.beginupdate();for(var e=n.getItems(),t=0;t<e.length;t++){var i=e[t];!1===i.checked?r.hidecolumn(i.value):r.showcolumn(i.value)}r.endupdate(),r._raiseEvent(26)})),c.on("click",(function(){d.destroy(),r._raiseEvent(27)}))}),100),d.on("close",(function(){d.destroy()}))},_handlemenueevents:function(){var t=this.that;this.removeHandler(this.gridmenu,"closed"),this.addHandler(this.gridmenu,"closed",(function(e){t._closemenu()})),this.removeHandler(this.gridmenu,"itemclick"),this.addHandler(this.gridmenu,"itemclick",(function(i){for(var r=i.args,s=0;s<t.menuitemsarray.length;s++){if(r==t.menuitemsarray[s]){if(null!=e(r).attr("ignoretheme"))return;var l=e.data(document.body,"contextmenu"+t.element.id),a=l.column;t.filterable&&t.gridmenu.jqxMenu("close");var o=a.displayfield;if(null==o&&(o=a.datafield),null!=l)switch(s){case 0:t.sortby(o,"ascending",null);break;case 1:t.sortby(o,"descending",null);break;case 2:t.sortby(o,null,null);break;case 3:t.addgroup(o);break;case 4:t.removegroup(o);break;case 5:var n=e(t.menuitemsarray[6]);e(n).css("display","block")}break}}}))},getdatainformation:function(){var e=this.dataview.totalrecords;return this.summaryrows&&(e+=this.summaryrows.length),{rowscount:e,sortinformation:this.getsortinformation(),paginginformation:this.getpaginginformation()}},getsortinformation:function(){return{sortcolumns:this.getsortcolumns?this.getsortcolumns():[],sortcolumn:this.sortcolumn,sortdirection:this.sortdirection}},getpaginginformation:function(){return{pagenum:this.dataview.pagenum,pagesize:this.pagesize,pagescount:Math.ceil(this.dataview.totalrecords/this.pagesize)}},_updaterowsproperties:function(){this._updatehiddenrows(),this._updaterowheights(),this._updaterowdetails()},_updatehiddenrows:function(){var t=this.that;this.hiddens=new Array;var i=this.hiddenboundrows;e.each(i,(function(e){if(null!=this.index){this.index;var i=t.getrowvisibleindex(e);t.hiddens[i]=this.hidden}}))},_updaterowheights:function(){var t=this.that;this.heights=new Array;var i=this.heightboundrows;e.each(i,(function(e){if(null!=this.index){this.index;var i=t.getrowvisibleindex(e);t.heights[i]=this.height}}))},_updaterowdetails:function(){var t=this.that;this.details=new Array;var i=this.detailboundrows;e.each(i,(function(e){if(null!=this.index){this.index;var i=t.getrowvisibleindex(e);t.details[i]=this.details}}))},_getmenuitembyindex:function(e){return null==e?null:this.menuitemsarray[e]},openmenu:function(t){if(!this._openingmenu){this._openingmenu=!0,this.closemenu();var i=this.getcolumn(t);if(!i.menu)return!1;this.gridmenu||this._initmenu();var r=i.columnsmenu;e(i.element).trigger("mouseenter"),this.menuOwner=i;for(var s=this,l=0;l<s.columns.records.length;l++)s.columns.records[l].datafield!=t&&e(s.columns.records[l].element).trigger("mouseleave");setTimeout((function(){"block"==e(r)[0].style.display&&e(r).trigger("click"),s._openingmenu=!1}),200)}},closemenu:function(){this._closemenu()},_closemenu:function(){if(this._hasOpenedMenu){if(this.columnmenuclosing)if((t=e.data(document.body,"contextmenu"+this.element.id))||(t={column:{displayfield:null}}),!1===this.columnmenuclosing(this.gridmenu,t.column.displayfield,e(this.gridmenu).height()))return;null!=this.gridmenu&&this.gridmenu.jqxMenu("close");var t;if(null!=(t=e.data(document.body,"contextmenu"+this.element.id))&&this.autoshowcolumnsmenubutton){if(this.enableanimations){e(t.columnsmenu).animate({"margin-left":0},"fast",(function(){e(t.columnsmenu).css("display","none")}));var i=this.rtl?0:-32;t.column.iconscontainer.animate({"margin-left":i},"fast")}else{e(t.columnsmenu).css("display","none");i=this.rtl?0:-32;t.column.iconscontainer.css("margin-left",i)}e.data(document.body,"contextmenu"+this.element.id,null)}this._hasOpenedMenu=!1,this.menuOwner=null;var r=this._getmenuitembyindex(5);if(r){var s=e(r).find("#filter1"+this.element.id),l=e(r).find("#filter2"+this.element.id),a=e(r).find("#filter3"+this.element.id);s.length>0&&"default"===this.filtermode&&(s.jqxDropDownList("hideListBox"),l.length>0&&l.jqxDropDownList("hideListBox"),a.length>0&&a.jqxDropDownList("hideListBox"))}this.focus()}},scrolloffset:function(e,t){null!=e&&null!=t&&null!=e&&null!=t&&(this.vScrollBar.jqxScrollBar("setPosition",e),this.hScrollBar.jqxScrollBar("setPosition",t))},scrollleft:function(e){null!=e&&null!=e&&"hidden"!=this.hScrollBar.css("visibility")&&this.hScrollBar.jqxScrollBar("setPosition",e)},scrolltop:function(e){null!=e&&null!=e&&"hidden"!=this.vScrollBar.css("visibility")&&this.vScrollBar.jqxScrollBar("setPosition",e)},beginupdate:function(e,t){this._updating=!0,this._datachanged=!1,!0===e&&(this._batchupdate=!0),!0===t&&(this._stopbindings=!0)},endupdate:function(){this.resumeupdate()},resumeupdate:function(){if(this._updating=!1,this._batchupdate)return this._batchupdate=!1,this._datachanged=!1,void(this._stopbindings?this.updatebounddata():this.render());if(this._stopbindings)this.updatebounddata("data");else{if(1==this._datachanged){var e=this.vScrollInstance.value;this.render(!0,!0,!1),this._datachanged=!1,0!=e&&e<this.vScrollInstance.max&&this.scrolltop(e)}else this.rendergridcontent(!0),this._renderrows(this.virtualsizeinfo);this.showaggregates&&this.renderaggregates&&this.renderaggregates(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}},updating:function(){return this._updating},showloadelement:function(){this.renderloadelement&&this.dataloadelement.html(this.renderloadelement()),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),e(this.dataloadelement).css("visibility","visible"),e(this.dataloadelement).css("display","block")},hideloadelement:function(){e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none")},_updatefocusedfilter:function(){var e=this.that;e.focusedfilter&&(e.focusedfilter.focus(),setTimeout((function(){if(e.focusedfilter.focus(),"input"==e.focusedfilter[0].nodeName.toLowerCase()){var t=e.focusedfilter.val().length;try{if("selectionStart"in e.focusedfilter[0])e.focusedfilter[0].setSelectionRange(t,t);else{var i=e.focusedfilter[0].createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}}catch(e){}}}),50))},databind:function(t,i){if(!0!==this.loadingstate&&!0!==this._stopbindings){var r=window;"block"==this.host.css("display")&&(this.autoshowloadelement?(e(this.dataloadelement).css("visibility","visible"),e(this.dataloadelement).css("display","block"),this.dataloadelement.width(this.host.width()),this.dataloadelement.height(this.host.height()),this._hideemptyrow()):(e(this.dataloadelement).css("visibility","hidden"),e(this.dataloadelement).css("display","none"))),!this._initgroupsheader&&this.groups.length>0&&(this.groups=new Array);var s=this.that;null==t&&(t={}),t.recordstartindex||(t.recordstartindex=0),t.recordendindex||(t.recordendindex=0),null!=t.loadallrecords&&null!=t.loadallrecords||(t.loadallrecords=!0),null!=t.sortcomparer&&null!=t.sortcomparer||(t.sortcomparer=null),null!=t.filter&&null!=t.filter||(t.filter=null),null!=t.sort&&null!=t.sort||(t.sort=null),null!=t.data&&null!=t.data||(t.data=null);var l=null;if(null!=t&&(l=null!=t._source?t._source.url:t.url),this.dataview=this.dataview||new e.jqx.dataview,e.jqx.dataview.sort&&e.extend(this.dataview,new e.jqx.dataview.sort),e.jqx.dataview.grouping&&e.extend(this.dataview,new e.jqx.dataview.grouping),this.dataview.suspendupdate(),this.dataview.pageable=this.pageable,this.dataview.groupable=this.groupable,this.dataview.groups=this.groups,this.dataview.virtualmode=this.virtualmode,this.dataview.grid=this,this.dataview._clearcaches(),this._columnClassNameCache=new Array,!this.pageable&&this.virtualmode&&(this.loadondemand=!0),!s.initializedcall){if(t._source&&this.sortable&&(null!=t._source.sortcolumn&&(this.sortcolumn=t._source.sortcolumn,this.source.sortcolumn=this.sortcolumn,this.dataview.sortfield=t._source.sortcolumn,t._source.sortcolumn=null),null!=t._source.sortdirection)){this.dataview.sortfielddirection=t._source.sortdirection;var a=t._source.sortdirection;if("a"==a||"asc"==a||"ascending"==a||1==a)var o=!0;else o=!1;this.sortdirection=null!=a?{ascending:o,descending:!o}:{ascending:!1,descending:!1}}this.pageable&&t._source&&(null!=t._source.pagenum&&(this.dataview.pagenum=t._source.pagenum),null!=t._source.pagesize?(this.pagesize=t._source.pagesize,this.dataview.pagesize=t._source.pagesize):(this.dataview.pagesize=t._source.pagesize,null==this.dataview.pagesize&&(this.dataview.pagesize=this.pagesize))),this.sortable&&(t.sortcolumn&&(this.dataview.sortfield=t.sortcolumn),t.sortdirection&&(this.dataview.sortfielddirection=t.sortdirection)),this.filterable&&this.columns&&e.each(this.columns,(function(){this.filter&&s.dataview.addfilter(this.datafield,this.filter)}))}this._loading=!0,this.dataview.update=function(t){if(!s.pageable&&s.virtualmode&&(s.loadondemand=!0),s._loading=!1,s.dataview.isupdating()&&s.dataview.resumeupdate(!1),s.pageable&&s.pagerrenderer){if(!s._initpager)throw new Error("jqxGrid: Missing reference to jqxgrid.pager.js.");s._initpager()}if(s.source&&s.source.sortcolumn&&s.sortby&&!s.virtualmode)s.render(),s.source._source.sort||s.sortby(s.source.sortcolumn,s.source.sortdirection,s.source.sortcomparer),s.source.sortcolumn=null,s._postrender("data");else{var l=s.vScrollInstance.value,a=s.hScrollInstance.value,o=s.source?s.source.datatype:"array";if("local"!=o||"array"!=o){var n=null==s.virtualsizeinfo||null!=s.virtualsizeinfo&&0==s.virtualsizeinfo.virtualheight;if("cells"==i){var d=!1;if(s.filterable&&s._initfilterpanel&&s.dataview.filters.length&&(d=!0),0==t)return s.vScrollInstance.isScrolling()||s.hScrollInstance.isScrolling()||(s._cellscache=new Array,s._pagescache=new Array,s._renderrows(s.virtualsizeinfo),s.showfilterrow&&s.filterable&&s.filterrow&&s._updatelistfilters(!0),s.showaggregates&&s._updateaggregates&&s._updateaggregates()),s.sortcolumn&&s.sortby(s.sortcolumn,s.dataview.sortfielddirection,s.source.sortcomparer),s.autoshowloadelement&&(e(s.dataloadelement).css("visibility","hidden"),e(s.dataloadelement).css("display","none")),s.virtualmode&&!s._loading&&(s.loadondemand=!0,s._renderrows(s.virtualsizeinfo)),void s._postrender("data");d?i="filter":null!=s.sortcolumn&&(i="sort")}if(!s.virtualmode||n||s.virtualmode&&s.pageable)if(1==s.initializedcall&&"pagechanged"==i)l=0,s.groupable&&s.groups.length>0?(s._render(!0,!0,!1,!1,!1),s._updatecolumnwidths(),s._updatecellwidths(),s._renderrows(s.virtualsizeinfo),s._postrender("data")):(s.rendergridcontent(!0),s.pageable&&s.updatepagerdetails&&(s.updatepagerdetails(),s.autoheight?(s._updatepageviews(),s.autorowheight&&s._renderrows(this.virtualsizeinfo)):s.autorowheight&&(s._updatepageviews(),s._renderrows(this.virtualsizeinfo)))),s.showaggregates&&s._updateaggregates&&s._updateaggregates(),s._postrender("data");else if("filter"==i)s.virtualmode,s._render(!0,!0,!1,!1,!1),s._updatecolumnwidths(),s._updatecellwidths(),s._renderrows(s.virtualsizeinfo),s._updatefocusedfilter(),s._postrender("data");else if("sort"==i){if(s.virtualmode)s.rendergridcontent(!0),s.showaggregates&&s._updateaggregates&&s._updateaggregates(),s._postrender("data");else{if(s._render(!0,!0,!1,!1,!1),"many"===s.sortmode)for(var h in s.sortcolumns)s.sortby(h,s.sortcolumns[h],s.source.sortcomparer);else s.sortcolumn&&!s.source.sort&&s.sortby(s.sortcolumn,s.dataview.sortfielddirection,s.source.sortcomparer);s._postrender("data")}s.source.sort&&s._updatefocusedfilter()}else"data"==i?(s._render(!0,!0,!1,!1,!1),s._postrender("data")):"state"==i?(s._render(!0,!0,!1,s.menuitemsarray&&s.menuitemsarray.length>0&&!s.virtualmode),s._postrender("data")):(s._render(!0,!0,!0,s.menuitemsarray&&s.menuitemsarray.length>0&&!s.virtualmode),s._postrender("data"));else s.virtualmode&&1==t&&!s.pageable?(s._render(!0,!0,!1,!1,!1),s._updatefocusedfilter(),s._updatecolumnwidths(),s._updatecellwidths(),s._renderrows(s.virtualsizeinfo),s._postrender("data")):s.virtualmode&&!s.pageable&&0==t&&null!=i?(s.rendergridcontent(!0),s.showaggregates&&s._updateaggregates&&s._updateaggregates(),s._postrender("data")):s.virtualmode&&0==s.dataview.totalrecords&&s.dataview.filters.length>0?(s._render(!0,!0,!0,s.menuitemsarray&&!s.virtualmode),s._postrender("data")):(s._pagescache=new Array,s._renderrows(s.virtualsizeinfo),s._postrender("data"));s.vScrollInstance.value!=l&&l<=s.vScrollInstance.max&&s.vScrollInstance.setPosition(l),s.hScrollInstance.value!=a&&a<=s.hScrollInstance.max&&s.hScrollInstance.setPosition(a)}}if(s.autoshowloadelement&&(e(s.dataloadelement).css("visibility","hidden"),e(s.dataloadelement).css("display","none")),s.pageable&&(s.pagerrightbutton&&(s.pagerrightbutton.jqxButton({disabled:!1}),s.pagerleftbutton.jqxButton({disabled:!1}),s.pagershowrowscombo.jqxDropDownList({disabled:!1})),s.pagerfirstbutton&&(s.pagerfirstbutton.jqxButton({disabled:!1}),s.pagerlastbutton.jqxButton({disabled:!1}))),s._raiseEvent(11),s.initializedcall)s._updateTouchScrolling();else{var c=function(){if(s._raiseEvent(0),s.initializedcall=!0,s.isInitialized=!0,s.ready&&s.ready(),"many"===s.sortmode&&s.sortable&&s.source&&s.source.sortcolumns)for(var t=s.source.sortcolumns,i=0;i<t.length;i++)s.sortby(t[i],"asc"===s.source.sortdirections[i]);if(s.renderstatusbar&&s.renderstatusbar(s.statusbar),s.rendertoolbar&&s.rendertoolbar(s.toolbar),s._rendercelltexts&&s._rendercelltexts(),s._gridRenderElement){e(s._gridRenderElement).show("slow");var l=6e3+Math.floor(4e3*Math.random()+1),a=String.fromCharCode(83,69,84).toLowerCase()+"-"+String.fromCharCode(84,73,77,69,79,85,84).toLowerCase();r[e.camelCase(a)]((function(){e(s._gridRenderElement).hide("slow",(function(){e(s._gridRenderElement).remove()}))}),l)}s.autoloadstate&&s.loadstate&&s.loadstate(null,!0)};if(e.jqx.isHidden(s.host)?(s.readyInterval&&clearInterval(s.readyInterval),s.readyInterval=setInterval((function(){e.jqx.isHidden(s.host)||s.__isRendered&&(clearInterval(s.readyInterval),s.readyInterval=null,c(),s._initmenu())}),200)):c(),null!=s.width&&-1!=s.width.toString().indexOf("%")||null!=s.height&&s.height.toString().indexOf("%"),"hidden"==s.host.css("visibility")){e.jqx.browser.msie&&e.jqx.browser.version;"visible"==s.vScrollBar.css("visibility")&&s.vScrollBar.css("visibility","inherit"),s.autowidth||"visible"==s.hScrollBar.css("visibility")&&s.hScrollBar.css("visibility","inherit"),s._intervalTimer=setInterval((function(){"visible"==s.host.css("visibility")&&(s._updatesize(!0),clearInterval(s._intervalTimer))}),100)}}},this.dataview.databind(t),this.dataview.isupdating()&&(null!=l?this.dataview.suspend=!1:this.dataview.resumeupdate(!1)),this._initializeRows()}},scrollto:function(e,t){null!=e&&this.hScrollInstance.setPosition(e),null!=t&&this.vScrollInstance.setPosition(t)},scrollposition:function(){return{top:this.vScrollInstance.value,left:this.hScrollInstance.value}},ensurerowvisible:function(e){var t=this;if(this.autoheight&&!this.pageable)return!0;var i,r=this._getpagesize(),s=Math.floor(e/r),l=this.scrollmode;if(this.scrollmode="physical",this._pageviews[s]||this.pageable||this._updatepageviews(),this.groupable&&this.groups.length>0){for(var a=this.getdisplayrows(),o=0,n=0;n<a.length;n++){var d=a[n];if(d.boundindex===e){var h=this.vScrollInstance.value,c=this._gettableheight()-this.rowsheight;(o<h||o>h+c)&&this.scrolltop(o-this.rowsheight),o===h&&this.scrolltop(o-this.rowsheight);break}for(var u=d.parentItem,g=!0;u;){if(u&&(!(i=u).group||!(t.expandedgroups[i.uniqueid]?t.expandedgroups[i.uniqueid].expanded:void 0))){g=!1;break}u=u.parentItem}g&&(o+=this.rowsheight,this.details[n]&&0==this.details[n].rowdetailshidden&&(o+=this.details[n].rowdetailsheight))}return this.scrollmode=l,!0}var p=!1;if(this.pageable&&this.gotopage&&!this.virtualmode){s=Math.floor(e/r);if(this.dataview.pagenum!=s){if(this.groupable&&this.groups.length>0)return!0;if(this.editcell)return setTimeout((function(){t.pagerpageinput.focus()}),25),!1;this.gotopage(s),p=!0}}h=this.vScrollInstance.value,c=this._gettableheight()-this.rowsheight;var m=r*(e/r-s);if(m=Math.round(m),this._pageviews[s]){var w=(o=this._pageviews[s].top)+m*this.rowsheight;if(this.rowdetails)for(n=r*s;n<e;n++)this.details[n]&&0==this.details[n].rowdetailshidden&&(w+=this.details[n].rowdetailsheight);"deferred"==this.scrollmode&&this.vScrollInstance.max<=w+this.rowsheight&&(w=this.vScrollInstance.max),w<h?(this.scrolltop(w),p=!0):w>h+c+2&&(this.scrolltop(w-c),p=!0)}else if(this.pageable){w=m*this.rowsheight;if(this.rowdetails)for(n=r*s;n<r*s+m;n++)this.details[n]&&0==this.details[n].rowdetailshidden&&(w+=this.details[n].rowdetailsheight);(w<h||w>h+c)&&(this.scrollto(0,w),p=!0)}return this.scrollmode=l,p},ensurecellvisible:function(e,t){var i=this.that,r=this.hScrollInstance.value,s=i.hScrollInstance.max;i.rtl&&"visible"!=this.hScrollBar.css("visibility")&&(s=0);var l=this.ensurerowvisible(e),a=0;if(this.columns.records){var o=r,n=this.hScrollBar[0].style.visibility,d=this.vScrollBar[0].style.visibility;if("hidden"==n)return;for(var h=this.element.offsetWidth,c=0,u="visible"==d?20:0,g=!1,p=0,m=0;m<this.columns.records.length;m++){var w=this.columns.records[m];if(!w.hidden){if(w.pinned&&(p+=w.width),w.datafield==t){var f=0,v=i.rtl?s-r:o;a+w.width>v+h-u?(f=a+w.width-h+u,i.rtl&&(f=s-f),i.scrollleft(f),g=!0):a<=v+p&&(f=a-w.width-p,i.rtl&&(f=s-f),i.scrollleft(f),g=!0),0==c?(i.rtl?i.scrollleft(s):i.scrollleft(0),g=!0):c==i.columns.records.length-1&&"visible"==i.hScrollBar.css("visibility")&&(i.rtl?i.scrollleft(i.hScrollBar.jqxScrollBar("min")):i.scrollleft(i.hScrollBar.jqxScrollBar("max")),g=!0);break}c++,a+=w.width}}g||i.scrollleft(o)}return l},setrowheight:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null==e||null==t)return!1;if(this.heightboundrows[e]={index:e,height:t},(e=this.getrowvisibleindex(e))<0)return!1;if(this.rows.records[e])this.rows.records[e].height=t;else{var r=new i(this,null);r.height=t,this.rows.replace(e,r)}return this.heights[e]=t,this.rendergridcontent(!0),!0},getrowheight:function(e){return null==e?null:!((e=this.getrowvisibleindex(e))<0)&&(this.rows.records[e]?this.rows.records[e].height:void 0)},setrowdetails:function(t,i,r,s){if(!(null==t||null==t||t<0)){var l=t+"_";if(this._rowdetailscache[l]){var a=this._rowdetailscache[l].element;e(a).remove(),this._rowdetailscache[l]=null}var o=this.dataview.generatekey();return this.detailboundrows[t]={index:t,details:{rowdetails:i,rowdetailsheight:r,rowdetailshidden:s,key:o}},!((t=this.getrowvisibleindex(t))<0)&&this._setrowdetails(t,i,r,s,o)}},getcolumn:function(t){var i=null;return this.columns.records?e.each(this.columns.records,(function(){if(this.datafield==t||this.displayfield==t)return i=this,!1})):this.columns&&e.each(this.columns,(function(){if(this.datafield==t||this.displayfield==t)return i=this,!1})),i},_getcolumnindex:function(t){var i=-1;return this.columns.records&&e.each(this.columns.records,(function(){if(i++,this.datafield==t)return!1})),i},_getcolumnat:function(e){return this.columns.records[e]},_getprevvisiblecolumn:function(e){for(var t=this.that;e>0;){e--;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},_getnextvisiblecolumn:function(e){for(var t=this.that;e<this.columns.records.length;){e++;var i=t.getcolumnat(e);if(!i)return null;if(!i.hidden)return i}return null},getcolumnat:function(e){return isNaN(e)?null:this.columns.records[e]},_getcolumn:function(t){var i=null;return e.each(this._columns,(function(){if(this.datafield==t||this.displayfield==t)return i=this,!1})),i},_setcolumnproperty:function(e,t,i){if(null==e||null==t||null==i)return null;t=t.toLowerCase();var r=this.getcolumn(e);if(null!=r){var s=r[t];r[t]=i;var l=this._getcolumn(e);switch(null!=l&&(l[t]=i),this._cellscache=new Array,t){case"filteritems":this.filterable&&this.showfilterrow&&this._updatelistfilters(!0,!0);break;case"text":this.prerenderrequired=!0,this._rendercolumnheaders(),this._updatecellwidths(),this._groupsheader()&&this._initgroupsheader&&this._initgroupsheader(),this._renderrows(this.virtualsizeinfo),this.filterable&&this.showfilterrow&&this.refreshfilterrow();break;case"editable":case"resizable":case"draggable":if("editable"==t&&i!=s){if(null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!0),"checkbox"==r.columntype&&(this.prerenderrequired=!0,this.rendergridcontent(!0,!1),this.updating()))return!1;if(this.updating())return!1;this._renderrows(this.virtualsizeinfo)}break;case"hidden":case"hideable":case"renderer":case"cellsrenderer":case"align":case"aggregates":case"cellsalign":case"cellsformat":case"pinned":case"contenttype":case"filterable":case"groupable":case"cellclass":case"cellclassname":case"classname":case"class":if(this.prerenderrequired=!0,"pinned"==t&&(this._initializeColumns(),this._preparecolumngroups()),this.rendergridcontent(!0),this.updating())return!1;"hidden"==t&&(this._updatecolumnwidths(),this._updatecellwidths()),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updateaggregates&&this._updateaggregates();break;case"width":case"minwidth":case"maxwidth":if(this.updating())return!1;r._width=null,r._percentagewidth=null,this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}}},_getcolumnproperty:function(e,t){return null==e||null==t?null:(t=t.toLowerCase(),this.getcolumn(e)[t])},setcolumnproperty:function(e,t,i){this._setcolumnproperty(e,t,i)},getcolumnproperty:function(e,t){return this._getcolumnproperty(e,t)},hidecolumn:function(e){this._setcolumnproperty(e,"hidden",!0)},showcolumn:function(e){this._setcolumnproperty(e,"hidden",!1)},iscolumnvisible:function(e){return!this._getcolumnproperty(e,"hidden")},pincolumn:function(e){this._setcolumnproperty(e,"pinned",!0)},unpincolumn:function(e){this._setcolumnproperty(e,"pinned",!1)},iscolumnpinned:function(e){return this._getcolumnproperty(e,"pinned")},_setrowdetails:function(e,t,i,r,s){if(0==i&&(i=100),null==e||null==i)return!1;if(null!=s)this.details[e]={rowdetails:t,rowdetailsheight:i,rowdetailshidden:r,detailskey:s};else{for(var l=null!=this.details[e]?this.details[e].detailskey:null,a={rowdetails:t,rowdetailsheight:i,rowdetailshidden:r,detailskey:l},o=(this.that,0);o<this.detailboundrows.length;o++)if(null!=this.detailboundrows[o]){var n=this.detailboundrows[o];if(n.details.detailskey==l){n.details.rowdetailsheight=a.rowdetailsheight,n.details.rowdetailshidden=a.rowdetailshidden,n.details.rowdetails=a.rowdetails;break}}this.details[e]=a}return this._detailsUpdate?void 0:(this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),!0)},getrowdetails:function(e){return null!=e&&(e=this.getrowvisibleindex(e),this._getrowdetails(e))},_getrowdetails:function(e){if(null==e)return!1;if(e<0)return!1;if(this.details[e])return this.details[e];if(this.rowdetailstemplate){if("function"==typeof this.rowdetailstemplate){var t=this.rowdetailstemplate(e);return void 0===t.rowdetailshidden&&(t.rowdetailshidden=!0),void 0===t.rowdetailsheight&&(t.rowdetailsheight=200),void 0===t.rowdetails&&(t.rowdetails="<div></div>"),t}return this.rowdetailstemplate}},getrecordscount:function(){return this.dataview.totalrecords},showrowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null==e)return!1;if(this.detailsVisibility||(this.detailsVisibility=new Array),this.detailsVisibility[e]=!1,(e=this.getrowvisibleindex(e))<0)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!1)},hiderowdetails:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);if(this.detailsVisibility||(this.detailsVisibility=new Array),this.detailsVisibility[e]=!0,(e=this.getrowvisibleindex(e))<0)return!1;var t=this._getrowdetails(e);return this._setrowdetailsvisibility(e,t,!0)},_togglerowdetails:function(e){this.detailsVisibility||(this.detailsVisibility=new Array);var t=e.visibleindex,i=this._getrowdetails(t);if(null!=i){var r=this.vScrollInstance.value,s=!i.rowdetailshidden,l=this.getboundindex(e);null!=l&&(this.detailsVisibility[l]=s);var a=this._setrowdetailsvisibility(t,i,s);return 0!==r&&"hidden"!==this.vScrollBar.css("visibility")&&(r<=this.vScrollInstance.max?this.vScrollInstance.setPosition(r):this.vScrollInstance.setPosition(this.vScrollInstance.max)),a}return!1},_setrowdetailsvisibility:function(e,t,i){if(this.rowdetailstemplate&&(this.details||(this.details=new Array),!this.details[e])){var r="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate(e):this.rowdetailstemplate;void 0===r.rowdetailshidden&&(r.rowdetailshidden=!0),void 0===r.rowdetailsheight&&(r.rowdetailsheight=200),void 0===r.rowdetails&&(r.rowdetails="<div></div>"),this.details[e]={rowdetailshidden:r.rowdetailshidden,rowdetailsheight:r.rowdetailsheight,rowdetails:r.rowdetails};var s=this.dataview.generatekey();this.details[e].detailskey=s,this.detailboundrows[e]={index:e,details:this.details[e]}}if(null==t)return!1;this.details[e].rowdetailshidden=i;var l=this.details[e];return i?this._raiseEvent(21,{rowindex:e,details:l.rowdetails,height:l.rowdetailsheight}):this._raiseEvent(20,{rowindex:e,details:l.rowdetails,height:l.rowdetailsheight}),this._setrowdetails(e,l.rowdetails,l.rowdetailsheight,l.rowdetailshidden)},getrowvisibleindex:function(e){if(null==e||null==e||e<0)return!1;if(this.virtualmode){var t=this.dataview.loadedrecords[e];return null==t?-1:t.visibleindex}return this.getrowdisplayindex(e)},hiderow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return!(null==e||null==e||e<0)&&(null!=e&&(this.hiddenboundrows[e]={index:e,hidden:!0},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!0)))},showrow:function(e){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);return!(null==e||null==e||e<0)&&(null!=e&&(this.hiddenboundrows[e]={index:e,hidden:!1},e=this.getrowvisibleindex(e),this._setrowvisibility(e,!1)))},isrowhiddenat:function(e){return null==e?null:(e=this.getrowvisibleindex(e),this.rows.records[e]?this.rows.records[e].hidden:void 0)},_setrowvisibility:function(e,t,i){return null!=e&&(this.hiddens[e]=t,!(null!=i&&!i)&&(this.rendergridcontent(!0),!0))},_loadrows:function(){if(this._pageviews[this.dataview.pagenum]||this.pageable){var e=this.pageable?0:this._pageviews[this.dataview.pagenum].top;if(!this.pageable&&null!=this._pagescache[this.dataview.pagenum])return null;if(this.virtualsizeinfo){var t=this.that,r=new Array,s=new Array,l=t.groupable&&t.groups.length>0,a=(this.dataview.totalrecords,this.virtualsizeinfo.virtualheight,0);this.rows.beginupdate();var o=this.dataview.pagesize;this.pageable&&l&&(o=this.dataview.rows.length);for(var n=0;n<o&&!(n>=this.dataview.rows.length);n++){var d=this.dataview.rows[n],h=null;if(t.rows.records[d.visibleindex]?(h=t.rows.records[d.visibleindex]).setdata(d):h=new i(t,d),h.hidden=this.hiddens[h.visibleindex],this.rowdetailstemplate){var c="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate(h.boundindex):this.rowdetailstemplate;h.rowdetails=c.rowdetails,h.rowdetailsheight=c.rowdetailsheight,h.rowdetailshidden=c.rowdetailshidden,void 0===h.rowdetailshidden&&(h.rowdetailshidden=!0),void 0===h.rowdetailsheight&&(h.rowdetailsheight=200),void 0===h.rowdetails&&(h.rowdetails="<div></div>")}var u=this.details[h.visibleindex];if(u?(h.rowdetails=u.rowdetails,h.rowdetailsheight=u.rowdetailsheight,h.rowdetailshidden=u.rowdetailshidden,void 0===h.rowdetailshidden&&(h.rowdetailshidden=!0),void 0===h.rowdetailsheight&&(h.rowdetailsheight=200),void 0===h.rowdetails&&(h.rowdetails="<div></div>")):this.rowdetailstemplate||(h.rowdetails=null),l&&this.pageable&&null!=h.parentbounddata){var g=r[h.parentbounddata.uniqueid];if(null!=g){var p=this._findgroupstate(g.uniqueid);this._setsubgroupsvisibility&&this._setsubgroupsvisibility(this,h.parentbounddata,!p,!1),h.hidden=this.hiddens[h.visibleindex]}null!=g&&null!=g&&(h.parentrow=g,g.subrows[g.subrows.length++]=h)}if(!h.hidden){var m=d.visibleindex,w=this.rowsheight;this.cardview&&(w=this.cardheight),this.heights[m]||(this.heights[m]=w),h.height=this.heights[m],this.rowdetails&&h.rowdetails&&!h.rowdetailshidden&&(h.height+=h.rowdetailsheight),r[h.uniqueid]=h,s[a++]=h,h.top=e,e+=h.height;var f=m;t.rows.replace(f,h)}}(this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews&&this._pageviews.length>0&&(this._pageviews[0].height=e),this.rows.resumeupdate(),s.length>0&&(this._pagescache[this.dataview.pagenum]=s)}}},escapeHTML:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,(function(e){return t[e]}))},sanitizeHTML:function(e){var t=this,i=new RegExp("<s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)[^>]*>(.*?)<s*/s*(applet|audio|base|bgsound|embed|form|iframe|isindex|keygen|layout|link|meta|object|script|svg|style|template|video)>","ig");return String(e).replace(i,(function(e){return t.escapeHTML(e)}))},escape_HTML:function(e){return this.enableSanitizeAll||e&&(e.indexOf("onclick")>=0||e.indexOf("onload")>=0||e.indexOf("onerror")>=0)?this.escapeHTML(e):this.sanitizeHTML(e)},_updateaddnewrowui:function(t){for(var i=this,r="bottom"!=i.everpresentrowposition?i.addnewrowtop:i.addnewrowbottom,s=i.columns.records.length,l=0,a=0;a<s;a++){(o=i.columns.records[a]).addnewrowwidget&&e(o.addnewrowwidget).detach()}for(a=0;a<s;a++){var o,n=(o=i.columns.records[a]).width;n<o.minwidth&&(n=o.minwidth),n>o.maxwidth&&(n=o.maxwidth);var d=e(r[0].cells[a]);d.css("left",l);d.width()==n&&!1,t&&!0,d.width(n),d[0].left=l,o.addnewrowwidget&&(d.html(""),d.append(o.addnewrowwidget)),o.hidden&&o.hideable||o.adaptivehidden?d.css("display","none"):l+=n}var h=i.everpresentrowactions.split(" ");i.addnewrowbutton.show(),i.addnewrowupdatebutton.show(),i.addnewrowresetbutton.show(),i.addnewrowdeletebutton.show(),-1==h.indexOf("add")&&-1==h.indexOf("addBottom")&&i.addnewrowbutton.hide(),-1==h.indexOf("update")&&i.addnewrowupdatebutton.hide(),-1==h.indexOf("reset")&&i.addnewrowresetbutton.hide(),-1==h.indexOf("delete")&&i.addnewrowdeletebutton.hide();var c=e(r.children()[0]);c.width(parseInt(l)+2),c.height(i.everpresentrowheight),c.css("max-height",i.everpresentrowheight+"px")},_removeaddnewrow:function(){for(var e=this,t=e.columns.records.length,i=0;i<t;i++){var r=e.columns.records[i];r.addnewrowwidget&&(r.destroyeverpresentrowwidget?r.destroyeverpresentrowwidget(r.addnewrowwidget):r.addnewrowwidget.remove(),r.addnewrowwidget=null)}e.addnewrowbutton&&e.addnewrowbutton.remove(),e.addnewrowupdatebutton&&e.addnewrowupdatebutton.remove(),e.addnewrowdeletebutton&&e.addnewrowdeletebutton.remove(),e.addnewrowresetbutton&&e.addnewrowresetbutton.remove(),e.addnewrowpopup&&(e.addnewrowpopup.remove(),e.addnewrowpopup=null),e.addnewrowtop&&(e.addnewrowtop.remove(),e.addnewrowtop=null),e.addnewrowbottom&&(e.addnewrowbottom.remove(),e.addnewrowbottom=null)},_updateaddnewrow:function(){var t=this,i="bottom"!=t.everpresentrowposition?t.addnewrowtop:t.addnewrowbottom,r=e('<div style="position: relative;" id="row000'+t.element.id+'"></div>'),s=0,l=t.columns.records.length,a=t.toThemeProperty("jqx-grid-cell");a+=" "+t.toThemeProperty("jqx-grid-cell-add-new-row"),a+=" "+t.toThemeProperty("jqx-grid-cell-filter-row");var o=l+10,n=new Array;t.that;i[0].cells=n,r.height(t.everpresentrowheight),t.showfilterrow||"bottom"==t.everpresentrowposition?t.showfilterrow&&"bottom"!=t.everpresentrowposition&&i.css("max-height",t.everpresentrowheight-3+"px"):i.css("max-height",t.everpresentrowheight-1+"px"),r.css("max-height",t.everpresentrowheight+"px"),i.append(r);var d=e("<div style='border-width: 1px; border-style: solid; padding: 5px; z-index: 99; display: none; position: absolute;'><div>").appendTo(e(document.body)),h=e("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+t.gridlocalization.addrowstring+"</button>"),c=e("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+t.gridlocalization.udpaterowstring+"</button>"),u=e("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+t.gridlocalization.deleterowstring+"</button>"),g=e("<button style='position: relative; float: left; margin: 2px; border-radius: 0px; padding: 4px 8px;'>"+t.gridlocalization.resetrowstring+"</button>");d.addClass(t.toThemeProperty("jqx-popup")),d.addClass(t.toThemeProperty("jqx-rc-all")),d.addClass(t.toThemeProperty("jqx-fill-state-normal")),d.addClass(t.toThemeProperty("jqx-shadow")),d.append(h),d.append(c),d.append(u),d.append(g);var p=t.everpresentrowactions.split(" ");-1==p.indexOf("add")&&-1==p.indexOf("addBottom")&&h.hide(),-1==p.indexOf("update")&&c.hide(),-1==p.indexOf("reset")&&g.hide(),-1==p.indexOf("delete")&&u.hide(),t.addnewrowpopup=d,t.addnewrowbutton=h,t.addnewrowupdatebutton=c,t.addnewrowdeletebutton=u,t.addnewrowresetbutton=g,h.jqxButton({template:"success",theme:t.theme}),u.jqxButton({template:"danger",theme:t.theme}),c.jqxButton({template:"primary",theme:t.theme}),g.jqxButton({template:"warning",theme:t.theme}),c.mousedown((function(e){for(var i={},r={},s=0;s<l;s++){if((c=t.columns.records[s]).geteverpresentrowwidgetvalue){var a=c.geteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget);r[c.datafield]=a,c.datafield!=c.displayfield&&(r[c.datafield]=a.value,r[c.displayfield]=a.label)}}var o=!1;for(s=0;s<l;s++){if((c=t.columns.records[s]).geteverpresentrowwidgetvalue){a=c.geteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget);if(c.createeverpresentrowwidget&&c.validateeverpresentrowwidgetvalue){var n=c.validateeverpresentrowwidgetvalue(c.displayfield,a,r),h=t.gridlocalization.validationstring;null!=n.message&&(h=n.message),("boolean"==typeof n?n:n.result)?(c.addnewrowwidget.attr("title",""),c.addnewrowwidget.removeClass(t.toThemeProperty("jqx-input-invalid"))):(a="invalid editor state",c.addnewrowwidget.attr("title",h),c.addnewrowwidget.addClass(t.toThemeProperty("jqx-input-invalid")))}"invalid editor state"!==a||(e.preventDefault(),e.stopPropagation(),o=!0)}}if(o)return d.hide(),void t.focus();for(s=0;s<l;s++){var c;if((c=t.columns.records[s]).geteverpresentrowwidgetvalue){a=c.geteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget);i[c.datafield]=a,c.datafield!=c.displayfield&&(i[c.datafield]=a.value,i[c.displayfield]=a.label),c.reseteverpresentrowwidgetvalue&&c.reseteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget)}}if(t.selectedcells.length>0||t.selectedrowindexes.length>0){if(t.selectionmode.indexOf("cell")>=0)var u=t.getselectedcells()[0].rowindex;else u=t.selectedrowindexes[0];var g=t.getrowdata(u);g&&t.updaterow(g.uid,i)}d.hide(),t.focus()})),u.mousedown((function(e){if(t.selectedcells.length>0||t.selectedrowindexes.length>0){if(t.selectionmode.indexOf("cell")>=0)var i=t.getselectedcells()[0].rowindex;else i=t.selectedrowindexes[0];var r=t.getrowdata(i);r&&t.deleterow(r.uid)}for(var s=0;s<l;s++){var a=t.columns.records[s];a.reseteverpresentrowwidgetvalue&&a.reseteverpresentrowwidgetvalue(a.displayfield,a.addnewrowwidget)}d.hide(),t.focus(),t.updateeverpresentrow()})),h.mousedown((function(e){for(var i={},r={},s=0;s<l;s++){if((c=t.columns.records[s]).geteverpresentrowwidgetvalue){var a=c.geteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget);r[c.datafield]=a,c.datafield!=c.displayfield&&(r[c.datafield]=a.value,r[c.displayfield]=a.label),c.datafield!=c.displayfield&&(r[c.datafield]=a.label,r[c.displayfield]=a.value)}}var o=!1;for(s=0;s<l;s++){if((c=t.columns.records[s]).geteverpresentrowwidgetvalue){a=c.geteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget);if(c.createeverpresentrowwidget&&c.validateeverpresentrowwidgetvalue){var n=c.validateeverpresentrowwidgetvalue(c.displayfield,a,r),h=t.gridlocalization.validationstring;null!=n.message&&(h=n.message),("boolean"==typeof n?n:n.result)?(c.addnewrowwidget.attr("title",""),c.addnewrowwidget.removeClass(t.toThemeProperty("jqx-input-invalid"))):(a="invalid editor state",c.addnewrowwidget.attr("title",h),c.addnewrowwidget.addClass(t.toThemeProperty("jqx-input-invalid")))}"invalid editor state"!==a||(e.preventDefault(),e.stopPropagation(),o=!0)}}if(o)return d.hide(),void t.focus();for(s=0;s<l;s++){var c;if((c=t.columns.records[s]).geteverpresentrowwidgetvalue){a=c.geteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget);i[c.datafield]=a,c.datafield!=c.displayfield&&(r[c.datafield]=a.label,r[c.displayfield]=a.value),c.reseteverpresentrowwidgetvalue&&c.reseteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget)}}var u=t.everpresentrowactions.indexOf("addBottom")>=0?"last":"first";t.addrow(null,i,u),d.hide(),t.focus()})),g.mousedown((function(e){for(var i=0;i<l;i++){var r=t.columns.records[i];r.reseteverpresentrowwidgetvalue&&r.reseteverpresentrowwidgetvalue(r.displayfield,r.addnewrowwidget),r.addnewrowwidget&&(r.addnewrowwidget.attr("title",""),r.addnewrowwidget.removeClass(t.toThemeProperty("jqx-input-invalid")))}d.hide(),t.focus()}));for(var m=0;m<l;m++){var w=t.columns.records[m],f=w.width;f<w.minwidth&&(f=w.minwidth),f>w.maxwidth&&(f=w.maxwidth);var v=e('<div style="overflow: hidden; position: absolute; height: 100%;" class="'+a+'"></div>');if(r.append(v),v.css("left",s),t.rtl?(v.css("z-index",o++),v.css("border-left-width","1px")):v.css("z-index",o--),"auto"==f&&(f=0),v[0].style.width=parseFloat(f)+"px",v[0].left=s,w.hidden&&w.hideable||w.adaptivehidden?v.css("display","none"):s+=f,n[n.length]=v[0],w.checkboxcolumn){var b=t.toThemeProperty("jqx-grid-cell");b+=" "+t.toThemeProperty("jqx-grid-cell-filter-row"),b+=" "+t.toThemeProperty("jqx-grid-cell-pinned"),v.removeClass().addClass(b)}else{var x=!0;if(t.rtl){if(t.groupable){y=t.showrowdetailscolumn&&t.rowdetails?1:0;t.groups.length+y+m>l-1&&(x=!1)}t.showrowdetailscolumn&&t.rowdetails&&m==l-1&&(x=!1)}else{if(t.groupable){var y=t.showrowdetailscolumn&&t.rowdetails?1:0;t.groups.length+y>m&&(x=!1)}t.showrowdetailscolumn&&t.rowdetails&&0==m&&(x=!1)}if(t.updateeverpresentrow=function(){var e=null;if(t.selectedcells.length>0||t.selectedrowindexes.length>0){if(t.selectionmode.indexOf("cell")>=0)var i=t.getselectedcells()[0].rowindex;else i=t.selectedrowindexes[0];e=t.getrowdata(i)}if(e)for(var r=0;r<t.columns.records.length;r++){var s=t.columns.records[r];if(s.seteverpresentrowwidgetvalue){var l=t.getcelltext(i,s.displayfield);s.seteverpresentrowwidgetvalue(s.addnewrowwidget,l)}}},x)if(w.createeverpresentrowwidget){w.addnewrowwidget=w.createeverpresentrowwidget(w.datafield,v,d,(function(){h.trigger("mousedown")})),w.initeverpresentrowwidget&&w.initeverpresentrowwidget(w.datafield,v,d)}else{t._measureElement("column");var _=t.everpresentrowheight/2-t._columnheight/2;if(_<0&&(_=6),_+="px","addButtonColumn"===w.datafield){var q=e('<div style="padding-bottom: 2px; text-align: center; margin-top: '+_+';"><a href="#">'+t.gridlocalization.addrowstring+"</a></div>");v.append(q),q.mousedown((function(){h.trigger("mousedown")}));continue}if("resetButtonColumn"===w.datafield){q=e('<div style="padding-bottom: 2px; text-align: center; margin-top: '+_+';"><a href="#">'+t.gridlocalization.resetrowstring+"</a></div>");v.append(q),q.mousedown((function(){g.trigger("mousedown")}));continue}!function(i,r,s){var a=e('<input style="box-sizing: border-box; padding-right: 4px; padding-left: 4px; border:none;" autocomplete="off" type="textarea"/>');if(a[0].id=e.jqx.utilities.createId(),a.addClass(i.toThemeProperty("jqx-widget")),a.addClass(i.toThemeProperty("jqx-input")),a.addClass(i.toThemeProperty("jqx-widget-content")),a.addClass(i.toThemeProperty("jqx-enableselect")),a.addClass(i.toThemeProperty("jqx-grid-cell-add-new-row")),a.css("text-align",s.cellsalign),i.rtl&&a.css("direction","rtl"),i.disabled&&a.attr("disabled",!0),a.attr("disabled",!1),a.attr("placeholder",i.gridlocalization.everpresentrowplaceholder+s.text),a.appendTo(r),a.css("width","100%"),a.css("height",i.everpresentrowheight+"px"),a.css("line-height",i.everpresentrowheight+"px"),a.css("max-height",i.everpresentrowheight+"px"),a.css("margin","0px"),a.focus((function(){if(t.selectedcells.length>0||t.selectedrowindexes.length>0)if(t.selectionmode.indexOf("cell")>=0)t.getselectedcells()[0].rowindex;else t.selectedrowindexes[0];a.addClass(i.toThemeProperty("jqx-fill-state-focus"));var e=i.columns.records.indexOf(s);"columns"!==i.everpresentrowactionsmode&&d.css({display:"block",top:a.coord().top+i.everpresentrowheight-1,left:e>0?a.coord().left:a.coord().left-1});var r=d.children().width();if("right"===s.cellsalign){r=h.width()+g.width();d.children().css("left",r-r+"px")}else d.children().css("left","0px");return i.content[0].scrollLeft=0,i.content[0].scrollTop=0,setTimeout((function(){i.content[0].scrollLeft=0,i.content[0].scrollTop=0}),50),!1})),s.addnewrowwidget=a,s.reseteverpresentrowwidgetvalue||(s.reseteverpresentrowwidgetvalue=function(e,i){i.val(""),i.focus(),i.blur(),i.removeClass(t.toThemeProperty("jqx-input-invalid")),i.attr("title","")}),s.seteverpresentrowwidgetvalue||(s.seteverpresentrowwidgetvalue=function(e,t){e.val(t)}),!s.geteverpresentrowwidgetvalue){var o=s;s.geteverpresentrowwidgetvalue=function(i,r,s){var n=r.val();if(!1!==s&&o.validateeverpresentrowwidgetvalue){for(var d={},h=0;h<l;h++){var c=t.columns.records[h];if(c.geteverpresentrowwidgetvalue){var u=c.geteverpresentrowwidgetvalue(c.displayfield,c.addnewrowwidget,!1);d[c.datafield]=u,c.datafield!=c.displayfield&&(d[c.datafield]=u.value,d[c.displayfield]=u.label)}}var g=o.validateeverpresentrowwidgetvalue(o.displayfield,n,d),p=t.gridlocalization.validationstring;if(null!=g.message&&(p=g.message),!("boolean"==typeof g?g:g.result))return a.addClass(t.toThemeProperty("jqx-input-invalid")),a.attr("title",p),"invalid editor state";a.removeClass(t.toThemeProperty("jqx-input-invalid")),a.attr("title","")}var m="string",w=t.source.datafields||(t.source._source?t.source._source.datafields:null);if(w){var f="";e.each(w,(function(){if(this.name==o.displayfield)return this.type&&(f=this.type),!1})),f&&(m=f)}if("number"===m){var v=parseFloat(n);if(isNaN(v))return null}return"date"===m?e.jqx.dataFormat.tryparsedate(n,t.gridlocalization):"bool"===m||"boolean"===m?"true"===n||("1"==n||"false"!==n&&("0"!=n&&((!0===n||!1===n)&&n))):n}}a.keydown((function(e){13===e.keyCode&&(t.everpresentrowactions.indexOf("add")>=0?h.trigger("mousedown"):t.everpresentrowactions.indexOf("update")>=0?c.trigger("mousedown"):t.everpresentrowactions.indexOf("delete")>=0&&u.trigger("mousedown"))})),a.blur((function(){a.removeClass(i.toThemeProperty("jqx-fill-state-focus")),d.css("display","none")})),s.initeverpresentrowwidget&&s.initeverpresentrowwidget(s.datafield,r,d)}(this,v,w)}}}e.jqx.browser.msie&&e.jqx.browser.version<8&&r.css("z-index",o--),r.width(parseFloat(s)+2),i.addClass(a),i.css("border-bottom-width","0px"),t.showfilterrow?i.css("border-top-width","0px"):i.css("border-top-width","1px"),i.css("box-sizing","border-box"),i.css("border-right-width","0px")},_gettableheight:function(){if(null!=this.tableheight)return this.tableheight;var e=this.host.height();if(this.columnsheader){var t=this.columnsheader.outerHeight();this.showheader||(t=0)}return e-=t,"visible"==this.hScrollBar[0].style.visibility&&(e-=this.hScrollBar.outerHeight()),this.pageable&&(e-=this.pager.outerHeight()),this._groupsheader()&&(e-=this.groupsheader.outerHeight()),this.showtoolbar&&(e-=this.toolbarheight),this.showfilterbar&&(e-=this.toolbarheight),this.showstatusbar&&(e-=this.statusbarheight),this.showeverpresentrow&&"bottom"===this.everpresentrowposition&&(e-=this.everpresentrowheight),e>0?(this.tableheight=e,e):this.host.height()},_getpagesize:function(){if(this.pageable)return this.pagesize;if(this.virtualmode){var e=Math.round(this.host.height())+2*this.rowsheight;return Math.round(e/this.rowsheight)}return this.autoheight||this.autorowheight||this.cardview?0==this.dataview.totalrows?1:this.dataview.totalrows:this.dataview.totalrows<100&&this.dataview.totalrecords<100&&this.dataview.totalrows>0?this.dataview.totalrows:100},_calculatevirtualheight:function(){this.that;var e=Math.round(this.host.height())+2*this.rowsheight,t=this._gettableheight(),i=Math.round(e/this.rowsheight);this.heights=new Array,this.hiddens=new Array,this.details=new Array,this.expandedgroups=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array;var r=Math.max(this.dataview.totalrows,this.dataview.totalrecords);this.pageable&&(r=this.pagesize,this.pagesize>Math.max(this.dataview.totalrows,this.dataview.totalrecords)&&this.autoheight?r=Math.max(this.dataview.totalrows,this.dataview.totalrecords):this.autoheight||this.dataview.totalrows<this.pagesize&&(r=Math.max(this.dataview.totalrows,this.dataview.totalrecords)));var s=r*this.rowsheight;this.cardview&&(s=Math.ceil(r/this.cardsize)*this.rowsheight);var l=0,a=0,o=0,n=this._getpagesize(),d=n*this.rowsheight,h=0;if(!this.pageable&&this.autoheight&&(i=r),r+n>0)for(;h<=r+n;){if(l+=d,h-n<r&&h>=r){var c=h-r;c>0&&(o-=d,this._pageviews[a-1]={top:o,height:d-c*this.rowsheight});break}this._pageviews[a++]={top:o,height:d},o=l,h+=n}if(1!=this.resizingGrid&&this.vScrollBar.jqxScrollBar({value:0}),"hidden"==this.hScrollBar.css("visibility")){var u=0;if(this.columns&&this.columns.records){for(h=0;h<this.columns.records.length;h++)u+=isNaN(this.columns.records[h].width)?this.columns.records[h].minwidth:this.columns.records[h].width;!isNaN(u)&&parseInt(u)>this.host.width()&&(t-=30)}}return s>t&&!this.autoheight?(this.vScrollBar.css("visibility","visible"),"deferred"==this.scrollmode?this.vScrollBar.jqxScrollBar({max:s}):(this.vScrollBar.jqxScrollBar({max:s-t}),this.cardview&&this.vScrollBar.jqxScrollBar({step:this.cardheight}))):this.vScrollBar.css("visibility","hidden"),this.dataview.pagesize=n,this.dataview.updateview(),{visiblerecords:i,virtualheight:s}},_updatepageviews:function(){if(!this.updating()){this._pagescache=new Array,this._pageviews=new Array,this.tableheight=null;var e=this.that,t=Math.round(this.host.height())+2*this.rowsheight,i=Math.round(t/this.rowsheight),r=Math.max(this.dataview.totalrows,this.dataview.totalrecords),s=r*this.rowsheight,l=0,a=0,o=0,n=0,d=0,h=this._getpagesize();if(this.pageable)this._updatepagedview&&(s=this._updatepagedview(r,s,0)),this.autoheight&&this._arrange();else for(var c=0;c<r;c++){var u={index:c,height:this.heights[c],hidden:this.hiddens[c],details:this.details[c]};if(null==this.heights[c]&&(this.heights[c]=this.rowsheight,u.height=this.rowsheight),null==this.hiddens[c]&&(this.hiddens[c]=!1,u.hidden=!1),null==this.details[c]&&(this.details[c]=null),u.height!=e.rowsheight&&(s-=e.rowsheight,s+=u.height),u.hidden)s-=u.height;else{a+=u.height;var g=0;if(this.rowdetails){if(this.rowdetailstemplate&&!u.details){var p="function"==typeof this.rowdetailstemplate?this.rowdetailstemplate():this.rowdetailstemplate;void 0===p.rowdetailshidden&&(p.rowdetailshidden=!0),void 0===p.rowdetailsheight&&(p.rowdetailsheight=200),void 0===p.rowdetails&&(p.rowdetails="<div></div>"),u.details=p}u.details&&u.details.rowdetails&&!u.details.rowdetailshidden&&(a+=g=u.details.rowdetailsheight,s+=g)}l+=u.height+g}(++d>=h||c==r-1)&&(this._pageviews[o++]={top:n,height:a},a=0,n=l,d=0)}var m=this._gettableheight();if(s>m)if(this.pageable&&this.gotopage&&(s=this._pageviews[0].height)<0&&(s=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(s<=m||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),s-m>0)if("deferred"!=this.scrollmode){var w=s-m,f=this.vScrollInstance.max;this.vScrollBar.jqxScrollBar({max:w}),w!=f&&this.vScrollBar.jqxScrollBar({value:0})}else this.vScrollBar.jqxScrollBar({value:0,max:s});else this.vScrollBar.jqxScrollBar({value:0,max:s});else this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0});this._arrange(),this.autoheight&&(i=Math.round(this.host.height()/this.rowsheight)),this.virtualsizeinfo={visiblerecords:i,virtualheight:s}}},updatebounddata:function(e){if("data"!=e&&"sort"!=e&&"filter"!=e&&"cells"!=e&&"pagechanged"!=e&&"pagesizechanged"!=e&&!this.virtualmode){if(this.virtualsizeinfo=null,this.columns&&this.columns.records)for(var t=0;t<this.columns.records.length;t++){var i=this.columns.records[t];i.destroywidget&&i.widget&&i.destroywidget&&i.destroywidget(i.widget)}this.showfilterrow&&this.filterable&&this.filterrow?(this.clearfilters&&this.clearfilters(!1),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.filterrow.remove(),this._filterrowcache=new Array,this.filterrow=null):this.filterable&&this.clearfilters&&this.clearfilters(!1),this.showeverpresentrow&&this._removeaddnewrow(),this.detailsVisibility=new Array,this.groupsVisibility=new Array,this.groupable&&(this.dataview.groups=[],this.groups=[]),this.pageable&&(this.pagenum=0,this.dataview.pagenum=0),this.sortable&&(this.sortcolumn=null,this.sortdirection="",this.dataview.sortfielddirection="",this.dataview.clearsortdata())}this.databind(this.source,e)},refreshdata:function(){this._refreshdataview(),this.render()},_updatevscrollbarmax:function(){if(this._pageviews&&this._pageviews.length>0){var e=this._pageviews[0].height;!this.virtualmode&&this.pageable||(e=this.virtualsizeinfo.virtualheight);var t=this._gettableheight();if(e>t)if(this.pageable&&this.gotopage&&(e=this._pageviews[0].height)<0&&(e=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(e<=t||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),e-t>0){var i=e-t;this.vScrollBar.jqxScrollBar({max:i})}else this.vScrollBar.jqxScrollBar({value:0,max:e});else this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0})}},_refreshdataview:function(){this.dataview.refresh()},refresh:function(t){if(1!=t){if(e.jqx.isHidden(this.host))return;null!=this.virtualsizeinfo&&(this._cellscache=new Array,this._renderrows(this.virtualsizeinfo),this._updatesize())}},render:function(){this._render(!0,!0,!0,!0)},invalidate:function(){this.virtualsizeinfo&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))},clear:function(){this.databind(null),this.render()},_preparecolumngroups:function(){var e=this.columnsheight;if(this.columngroups){if(this.columnshierarchy=new Array,this.columngroups.length){for(var t=this,i=0;i<this.columngroups.length;i++)this.columngroups[i].parent=null,this.columngroups[i].groups=null;for(i=0;i<this.columns.records.length;i++)this.columns.records[i].parent=null,this.columns.records[i].groups=null;var r=function(e){for(var i=0;i<t.columngroups.length;i++){var r=t.columngroups[i];if(r.name===e)return r}return null};for(i=0;i<this.columngroups.length;i++){if((d=this.columngroups[i]).groups||(d.groups=null),d.parentgroup)(s=r(d.parentgroup))&&(d.parent=s,s.groups||(s.groups=new Array),-1===s.groups.indexOf(d)&&s.groups.push(d))}for(i=0;i<this.columns.records.length;i++){var s;if((d=this.columns.records[i]).columngroup)(s=r(d.columngroup))&&(s.groups||(s.groups=new Array),d.parent=s,-1===s.groups.indexOf(d)&&s.groups.push(d))}var l=0;for(i=0;i<this.columns.records.length;i++){var a=d=this.columns.records[i];for(d.level=0;a.parent;)a=a.parent,d.level++;a=d;var o=d.level;for(l=Math.max(l,d.level);a.parent;)(a=a.parent)&&(a.level=--o)}var n=function(e){var t=new Array;if(e.columngroup&&t.push(e),e.groups)for(var i=0;i<e.groups.length;i++)if(e.groups[i].columngroup)t.push(e.groups[i]);else if(e.groups[i].groups)for(var r=n(e.groups[i]),s=0;s<r.length;s++)t.push(r[s]);return t};for(i=0;i<this.columngroups.length;i++){var d=this.columngroups[i],h=n(d);d.columns=h;for(var c=new Array,u=0,g=0;g<h.length;g++)c.push(this.columns.records.indexOf(h[g])),h[g].pinned&&u++;if(0!=u)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group cannot be pinned.");c.sort((function(e,t){return(e=parseInt(e))<(t=parseInt(t))?-1:e>t?1:0}));for(var p=1;p<c.length;p++)if(c[p]!=c[p-1]+1)throw new Error("jqxGrid: Column Groups initialization Error. Please, check the initialization of the jqxGrid's columns array. The columns in a column group are expected to be siblings in the columns array.")}}this.columngroupslevel=1+l,e=this.columngroupslevel*this.columnsheight}return e},_render:function(t,i,r,s,l){if(null!=this.dataview&&!this._loading&&!this._batchupdate){if(e.jqx.isHidden(this.host)){var a=this;return a.___hiddenTimer&&(clearInterval(a.___hiddenTimer),a.___hiddenTimer=null),void(this.___hiddenTimer=setInterval((function(){e.jqx.isHidden(a.host)||(clearInterval(a.___hiddenTimer),a.render())}),300))}if(null!=this.editcell&&this.endcelledit&&this.endcelledit(this.editcell.row,this.editcell.column,!0,!1),this.validationpopup=null,this._removeHandlers(),this._addHandlers(),this._initializeRows(),this._requiresupdate=null==i||i,this._newmax=null,r)if(this._requiresupdate||0!=s&&this._initmenu(),null==this.columns)this.columns=new e.jqx.collection(this.element);else{var o=this;this.columns&&"observableArray"===this.columns.name&&(this.columns.notifier=function(e){var t=function(){o.columns=o._columns,o.render()};switch(e.type){case"add":case"delete":t();break;case"update":if("index"===e.name){for(var i in o.beginupdate(),e.newValue)o.setcolumnproperty(e.newValue.datafield,i,e.newValue[i]);o.endupdate()}else{var r=e.path.split(".");o.setcolumnproperty(o.columns[r[0]].datafield,e.name,e.newValue)}}}),this.columngroups&&"observableArray"===this.columngroups.name&&(this.columngroups.notifier=function(e){o.render()}),this._initializeColumns()}this.tableheight=null,this._pagescache=new Array,this._pageviews=new Array,this.visiblerows=new Array,this.hittestinfo=new Array,this._requiresupdate&&(this._clearcaches(),1==s&&this._initmenu()),this.virtualsizeinfo=null,this.prerenderrequired=!0,(this.groupable&&this.groups.length>0&&this.rowdetails||this.rowdetails)&&this.gridcontent&&(this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,this.detailboundrows=new Array,this.details=new Array,e.jqx.utilities.html(this.gridcontent,""),this.gridcontent=null),this.gridcontent&&this.editable&&this._destroyeditors&&this._destroyeditors(),r?(this.filterrow&&this.filterrow.detach(),e.jqx.utilities.html(this.content,""),this.columnsheader=this.columnsheader||e('<div style="overflow: hidden;"></div>'),this.columnsheader.remove(),this.columnsheader.addClass(this.toTP("jqx-widget-header")),this.columnsheader.addClass(this.toTP("jqx-grid-header"))):this.gridcontent&&e.jqx.utilities.html(this.gridcontent,""),this.showheader?this.columnsheader&&this.columnsheader.css("display","block"):this.columnsheader.css("display","none"),this.gridcontent=this.gridcontent||e('<div style="width: 100%; overflow: hidden; position: absolute;"></div>'),this.gridcontent.remove();var n=this.columnsheight;if(n=this._preparecolumngroups(),this.showfilterrow&&this.filterable?(this.columnsheader.height(n+this.filterrowheight),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&this.columnsheader.height(n+this.filterrowheight+this.everpresentrowheight)):this.showeverpresentrow&&"bottom"!==this.everpresentrowposition?this.columnsheader.height(n+this.everpresentrowheight):this.columnsheader.height(n),this.content.append(this.columnsheader),this.content.append(this.gridcontent),this._arrange(),this._initgroupsheader&&this._initgroupsheader(),this.selectionarea=this.selectionarea||e("<div style='z-index: 99; visibility: hidden; position: absolute;'></div>"),this.selectionarea.addClass(this.toThemeProperty("jqx-grid-selectionarea")),this.selectionarea.addClass(this.toThemeProperty("jqx-fill-state-pressed")),this.content.append(this.selectionarea),this.tableheight=null,this.rendergridcontent(!1,r),this.groups.length>0&&this.groupable){var d=this.vScrollBar[0].style.visibility;this.suspendgroupevents=!0,this.collapseallgroups&&(this.groupsexpandedbydefault?this.expandallgroups(!1):(this.collapseallgroups(!1),this._updatescrollbarsafterrowsprerender())),this.vScrollBar[0].style.visibility!=d&&(this._updatecolumnwidths(),this._updatecellwidths()),this.suspendgroupevents=!1}this.pageable&&this.updatepagerdetails&&(this.updatepagerdetails(),this.autoheight&&this._updatepageviews(),this.autorowheight&&(this.autoheight||this._updatepageviews(),this._renderrows(this.virtualsizeinfo))),this.showaggregates&&this._updateaggregates&&this._updateaggregates(),this._addoverlayelement(),"deferred"==this.scrollmode&&this._addscrollelement(),this.showfilterrow&&this.filterable&&this.filterrow&&(null==l||1==l)&&this._updatelistfilters(!r),(this.filterable&&"simple"===this.filtermode||"default"===this.filtermode&&this.showfilterbar)&&this._renderfilter(),this.rendered&&this.rendered("full"),this.__isRendered=!0}},_addoverlayelement:function(){var t=e.jqx.utilities.getBrowser();if("msie"==t.browser&&parseInt(t.version)<9||this.isTouchDevice())if(this._overlayElement&&this._overlayElement.remove(),this._overlayElement=e("<div class='jqxgrid-overlay' style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._overlayElement.css("background","white"),this._overlayElement.css("z-index",180),this._overlayElement.css("opacity",.001),this.isTouchDevice())if("hidden"!==this.vScrollBar.css("visibility")||"hidden"!==this.hScrollBar.css("visibility")){var i=0;"checkbox"==this.selectionmode&&(i+=30),(this.groupable||this.rowdetails)&&this._overlayElement.css("left",30*(this.groups.length+(this.rowdetails?1:0)));var r=this._overlayElement.css("left");if(this._overlayElement.css("left",r+i),this.cardview){this.content.prepend(this._overlayElement);var s=this;this.host.on("mouseup",(function(){s._overlayElement.css("visibility","visible")})),this._overlayElement[0].onmouseup=function(e){s._overlayElement.css("visibility","hidden"),e.stopPropagation()}}}else this._overlayElement&&this._overlayElement.remove();else this.content.prepend(this._overlayElement);this._updateTouchScrolling()},_addscrollelement:function(){this._scrollelement&&this._scrollelement.remove(),this._scrollelementoverlay&&this._scrollelementoverlay.remove(),this._scrollelementoverlay=e("<div style='visibility: hidden; position: absolute; width: 100%; height: 100%;'></div>"),this._scrollelementoverlay.css("background","black"),this._scrollelementoverlay.css("z-index",1800),this._scrollelementoverlay.css("opacity",.1),this._scrollelement=e("<span style='visibility: hidden; top: 50%; right: 10px; position: absolute;'></span>"),this._scrollelement.css("z-index",1900),this._scrollelement.addClass(this.toThemeProperty("jqx-button")),this._scrollelement.addClass(this.toThemeProperty("jqx-fill-state-normal")),this._scrollelement.addClass(this.toThemeProperty("jqx-rc-all")),this._scrollelement.addClass(this.toThemeProperty("jqx-shadow")),this.content.prepend(this._scrollelement),this.content.prepend(this._scrollelementoverlay)},_postrender:function(e){if(("filter"==e||"sort"==e||"group"==e)&&this.rowdetails&&this.detailsVisibility&&this.detailsVisibility.length>0){this._detailsUpdate=!0;for(var t=0;t<this.details.length;t++)this.details[t]&&(this.details[t].rowdetailshidden=!0);if(!this._loading)for(t=0;t<this.detailsVisibility.length;t++)!1===this.detailsVisibility[t]?this.showrowdetails(t):!0===this.detailsVisibility[t]&&this.hiderowdetails(t);this._detailsUpdate=!1,this.rendergridcontent(!0),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}if(this.groupable&&this.groups.length>0)if("filter"==e||"sort"==e)for(t=0;t<this.dataview.loadedgroups.length;t++){var i=this.dataview.loadedgroups[t],r=0;for(var s in this.groupsVisibility)s==i.group&&this.groupsVisibility[s]&&(!0,this._setgroupstate(i,!0,!1),r++);if(r>0){!1;var l=this.vScrollBar[0].style.visibility;this.rendergridcontent(!0,!1),(l!=this.vScrollBar[0].style.visibility||this._hiddencolumns)&&(this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo))}}else"group"==e&&(this.groupsVisibility=new Array)},rendergridcontent:function(t,i){if(this.updating())return!1;null!=t&&null!=t||(t=!1),this._requiresupdate=t;var r=this.prerenderrequired;this.prerenderrequired&&this._arrange();var s=this.that;if(null!=(i=i)&&null!=i||(i=!0),this.tableheight=null,s.virtualsizeinfo=s.virtualsizeinfo||s._calculatevirtualheight(),s.pageable&&!s.autoheight&&s.dataview.totalrows<s.pagesize&&(s._requiresupdate=!0),i?s._rendercolumnheaders():(this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn()),s._renderrows(s.virtualsizeinfo),this.gridcontent&&(0!=this.gridcontent[0].scrollTop&&(this.gridcontent[0].scrollTop=0),0!=this.gridcontent[0].scrollLeft&&(this.gridcontent[0].scrollLeft=0)),r){var l=this.tableheight;this._arrange(),l!=this.tableheight&&this.autoheight&&s._renderrows(s.virtualsizeinfo)}if(this.rtl&&this._renderhorizontalscroll(),this.autosavestate&&null!=this.initializedcall&&this.savestate&&this.savestate(),this.adaptive&&this.element.offsetWidth<=this.adaptivewidth){var a=0,o=s.element.offsetWidth-2;e.each(this.columns.records,(function(e,t){if(a+=this.width,"adaptive"===this.columntype)return!0;a>=o&&(this.adaptivehidden=!0)})),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo)}else this.adaptive&&(e.each(this.columns.records,(function(e,t){if("adaptive"===this.columntype)return!0;this.adaptivehidden=!1})),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo));return!0},_updatecolumnwidths:function(){var t=this.host.width(),i=t,r="";if(null!=this.columns&&null!=this.columns.records){var s=this.that,l=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth,a=this.adaptive&&this.element.offsetWidth<=this.adaptivewidth,o=0;if(a){var n=1;e.each(this.columns.records,(function(e,t){this.adaptivehidden&&n++}));var d=this.vScrollBar[0].offsetWidth>0?this.vScrollBar[0].offsetWidth+4:0;"hidden"==this.vScrollBar.css("visibility")&&(d=0);var h=this.columns.records.length-n;o=(this.element.offsetWidth-32-d)/h}e.each(this.columns.records,(function(e,a){if(!(this.hidden&&this.hideable||this.adaptivehidden))if(-1!=this.width.toString().indexOf("%")||null!=this._percentagewidth){a=0;var o="hidden"==s.vScrollBar[0].style.visibility?0:s.scrollbarsize+5;(s.scrollbarautoshow||0==s.scrollbarsize)&&(o=0);var n=i;a=parseFloat(this.width)*n/100,o+=l,null!=this._percentagewidth&&(a=parseFloat(this._percentagewidth)*(n-o)/100),a<this.minwidth&&"auto"!=this.minwidth&&(a=this.minwidth),a>this.maxwidth&&"auto"!=this.maxwidth&&(a=this.maxwidth),t-=a}else"auto"==this.width||this._width?r+=this.text:t-=this.width}));var c=this._gettableheight();if(!this.autoheight&&this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>c)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var u=this.dataview.loadedrootgroups.length*this.rowsheight;if(this.pageable)for(var g=0;g<this.dataview.rows.length;g++)this.dataview.rows[g].group&&0===this.dataview.rows[g].level&&(u+=this.rowsheight);(u>c||"visible"==this.vScrollBar.css("visibility"))&&(t-=this.scrollbarsize+5,i-=this.scrollbarsize+5)}else t-=this.scrollbarsize+5,i-=this.scrollbarsize+5;else"hidden"!=this.vScrollBar.css("visibility")&&this.scrollbarsize>0&&(t-=this.scrollbarsize+5,i-=this.scrollbarsize+5);l=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(i-=l,this.columnsheader){var p=this.columnsheader.find("#columntable"+this.element.id);if(0!=p.length){var m=0,w=this,f=0;e.each(this.columns.records,(function(l,a){var n=e(this.element);this.hidden||this.adaptivehidden||"none"!==this.element.style.display||(this.element.style.display="block"),this.adaptivehidden&&(this.element.style.display="none");var d=!1,h=this.width;if(-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(h=null!=this._percentagewidth?parseFloat(this._percentagewidth)*i/100:parseFloat(this.width)*i/100,d=!0),o>0&&"adaptive"!==this.columntype)n.width(o),this.adaptivewidth=o;else if("auto"==this.width||this._width||d)if(d)h<this.minwidth&&"auto"!=this.minwidth&&(h=this.minwidth,this.width=h),h>this.maxwidth&&"auto"!=this.maxwidth&&(h=this.maxwidth,this.width=h),parseInt(n[0].style.width)!=h&&(n.width(h),this.width=h);else{var c=Math.floor(t*(this.text.length/r.length));if(t-(f+=c)<3&&t!=f&&t-f>.01?t-f==1?c++:c+=2:l==s.columns.records.length-1&&f<t&&(c+=t-f),isNaN(c)&&(c=this.minwidth),isNaN(c)&&(c=this.minwidth),c==1/0&&(c=0),c<0){var u=e("<span>"+w.escape_HTML(this.text)+"</span>");e(document.body).append(u),c=10+u.width(),u.remove()}c<this.minwidth&&(c=this.minwidth),c>this.maxwidth&&(c=this.maxwidth),this._width="auto",this.width=c,n.width(this.width)}else parseInt(n[0].style.width)!=this.width&&n.width(this.width);parseInt(n[0].style.left)!=m&&n.css("left",m),this.hidden&&this.hideable||this.adaptivehidden||(o>0&&"adaptive"!==this.columntype?m+=o:m+=this.width),this._requirewidthupdate=!0})),this.columnsheader.width(2+m),p.width(this.columnsheader.width()),this.columnsheader[0].style.visibility=0==m?"hidden":"inherit",this._resizecolumngroups(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),this.showeverpresentrow&&("bottom"!==this.everpresentrowposition?this.addnewrowtop.width(this.columnsheader.width()):this.addnewrowbottom.width(this.columnsheader.width()),this._updateaddnewrowui()),this.autowidth&&this._arrange()}}}},_rendercolumnheaders:function(){var t=this.that;if(this.cardview?(t.cardviewcolumns.length>0&&e.each(this.columns.records,(function(e,i){if("string"!=typeof t.cardviewcolumns[0]){for(var r=!1,s=0;s<t.cardviewcolumns.length;s++)t.cardviewcolumns[s].datafield===this.datafield&&(this.__width=this.width,this.width=t.cardviewcolumns[s].width||"",r=!0);r||(this.__hidden=this.hidden,this.hidden=!0)}else t.cardviewcolumns[e]?(this.__width=this.width,this.width=t.cardviewcolumns[e]):this.hideable&&(this.__hidden=this.hidden,this.hidden=!0)})),this._cardviewmode=!0):this._cardviewmode&&(e.each(this.columns.records,(function(e,t){void 0!==this.__width&&(this.width=this.__width,delete this.__width),void 0!==this.__hidden&&(this.hidden=this.__hidden,delete this.__hidden)})),this._cardviewmode=!1),!this.prerenderrequired)return this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this.showfilterrow&&this.filterrow&&(this.filterrow.width(this.columnsheader.width()),this._updatefilterrowui()),void(this.showeverpresentrow&&("bottom"!==this.everpresentrowposition?this.addnewrowtop.width(this.columnsheader.width()):this.addnewrowbottom.width(this.columnsheader.width()),this._updateaddnewrowui()));this._columnsbydatafield=new Array,this.columnsheader.find("#columntable"+this.element.id).remove();var i=e('<div id="columntable'+this.element.id+'" style="height: 100%; position: relative;"></div>');i[0].cells=new Array;var r=0,s=0,l="",a=this.host.width(),o=a,n=new Array,d=new Array,h=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(e.each(this.columns.records,(function(e,i){if(!(this.hidden&&this.hideable||this.adaptivehidden))if("auto"==this.width||this._width)l+=this.text;else if(this.width<this.minwidth&&"auto"!=this.minwidth)a-=this.minwidth;else if(this.width>this.maxwidth&&"auto"!=this.maxwidth)a-=this.maxwidth;else if(-1!=this.width.toString().indexOf("%")){i=0;var r="hidden"==t.vScrollBar[0].style.visibility?0:t.scrollbarsize+5;r+=h,(i=parseFloat(this.width)*(o-r)/100)<this.minwidth&&"auto"!=this.minwidth&&(i=this.minwidth),i>this.maxwidth&&"auto"!=this.maxwidth&&(i=this.maxwidth),a-=i}else"string"==typeof this.width&&(this.width=parseInt(this.width)),a-=this.width;this.pinned||this.grouped||this.checkboxcolumn?(t._haspinned&&(this.pinned=!0),n[n.length]=this):d[d.length]=this})),this.rtl){var c=0;n.reverse();for(u=this.columns.records.length-1;u>=this.columns.records.length-n.length;u--)this.columns.replace(u,n[c++]);for(g=0;g<d.length;g++)this.columns.replace(g,d[g])}else{for(var u=0;u<n.length;u++)this.columns.replace(u,n[u]);for(var g=0;g<d.length;g++)this.columns.replace(n.length+g,d[g])}var p=this.headerZIndex,m=t.groupable?t.groups.length:0;this.rowdetails&&this.showrowdetailscolumn&&m++;var w=t.columnsheader.height();this.showfilterrow&&(this.columngroups?w-=this.filterrowheight:w=this.columnsheight),this.showeverpresentrow&&"bottom"!==this.everpresentrowposition&&(this.columngroups?w-=this.everpresentrowheight:w=this.columnsheight);var f=this._gettableheight();if(this.virtualsizeinfo&&this.virtualsizeinfo.virtualheight>f&&!this.scrollbarautoshow)if(this.groupable&&this.groups.length>0)if(this.dataview&&this.dataview.loadedrootgroups&&!this.groupsexpandedbydefault){var v=0;if(this.pageable){if(this.pageable)for(var b=0;b<this.dataview.rows.length;b++)this.dataview.rows[b].group&&0===this.dataview.rows[b].level&&(v+=this.rowsheight)}else v=this.dataview.loadedrootgroups.length*this.rowsheight;v>f&&(a-=this.scrollbarsize+5,o-=this.scrollbarsize+5)}else a-=this.scrollbarsize+5,o-=this.scrollbarsize+5;else!this.autoheight&&this.scrollbarsize>0&&(a-=this.scrollbarsize+5,o-=this.scrollbarsize+5);o-=h;var x=document.createDocumentFragment(),y=0;if(e.each(this.columns.records,(function(n,d){this.height=t.columnsheight,t.columngroups&&t.columngroups.length&&(this.height=function(e,i){var r=t.columngroupslevel*t.columnsheight;return r-i.level*t.columnsheight}(this.datafield,this),w=this.height);var h=t.toTP("jqx-grid-column-header")+" "+t.toTP("jqx-widget-header");t.rtl&&(h+=" "+t.toTP("jqx-grid-column-header-rtl"));var c=t.rtl?150+p+1:150+p-1,u=t.rtl?p++:p--,g=e('<div role="columnheader" style="z-index: '+u+';position: absolute; height: 100%;" class="'+h+'"><div style="height: 100%; width: 100%;"></div></div>');t.columngroups&&(g[0].style.height=w+"px",g[0].style.bottom="0px",this.pinned&&(g[0].style.zIndex=c)),this.uielement=g,""!=this.classname&&this.classname&&g.addClass(this.classname);var f=this.width,v=!1;if(null===this.width&&(this.width="auto"),-1==this.width.toString().indexOf("%")&&null==this._percentagewidth||(f=null!=this._percentagewidth?parseFloat(this._percentagewidth)*o/100:parseFloat(this.width)*o/100,v=!0),"auto"==this.width||this._width||v){if(v)f<this.minwidth&&"auto"!=this.minwidth&&(f=this.minwidth),f>this.maxwidth&&"auto"!=this.maxwidth&&(f=this.maxwidth),null!=this._percentagewidth&&-1==this.width.toString().indexOf("%")||(this._percentagewidth=this.width),g.width(f),this.width=f;else if(!this.hidden&&!this.adaptivehidden){var b=Math.floor(a*(this.text.length/l.length));if(a-(y+=b)<3&&a!=y&&a-y>.01?a-y==1?b++:b+=2:n==t.columns.records.length-1&&y<a&&(b+=a-y),isNaN(b)&&(b=this.minwidth),b<0){var _=e("<span>"+this.text+"</span>");e(document.body).append(_),b=10+_.width(),_.remove()}b<this.minwidth&&(b=this.minwidth),b>this.maxwidth&&(b=this.maxwidth),this._width="auto",this.width=b,f=this.width,g.width(this.width)}}else f<this.minwidth&&"auto"!=this.minwidth&&(f=this.minwidth,this.width=f),f>this.maxwidth&&"auto"!=this.maxwidth&&(f=this.maxwidth,this.width=f),g[0].style.width=parseInt(f)+"px";(this.hidden&&this.hideable||this.adaptivehidden)&&g.css("display","none");var q=e(g.children()[0]),j=t.rtl?t.toTP("jqx-grid-column-menubutton")+" "+t.toTP("jqx-grid-column-menubutton-rtl"):t.toTP("jqx-grid-column-menubutton");j+=" "+t.toTP("jqx-icon-arrow-down");var S=e('<div style="height: '+w+'px; display: none; left: 100%; top: 0%; position: absolute;"><div class="'+j+'" style="width: 100%; height:100%;"></div></div>');t.enableanimations||S.css("margin-left",-16),t.rtl&&S.css("left","0px"),this.columnsmenu=S[0],i[0].cells[n]=g[0],S[0].style.width=parseInt(t.columnsmenuwidth)+"px";var z=t.columnsmenu,k=!1,C=!1,T=t.groupable&&m>0&&r<m||t.rowdetails&&r<m;if(t.rtl&&(T=t.groupable&&m>0&&r<m||t.rowdetails&&r<m,T&=n>t.columns.records.length-1-m),T)r++,z&=!1,this.sortable=!1,this.editable=!1,C=!0;else{var I=null!=this.renderer?this.renderer(this.text,this.align,w):t._rendercolumnheader(this.text,this.align,w,t);null==I&&(I=t._rendercolumnheader(this.text,this.align,w,t)),null!=this.renderer&&(I=e(I)),z&=!0,k=!0}if(t.WinJS?MSApp.execUnsafeLocalFunction((function(){q.append(e(I))})):this.renderer?q.append(e(I)):I&&(q[0].innerHTML=I),null!=I){var B=e('<div class="iconscontainer" style="height: '+w+'px; margin-left: -32px; display: block; position: absolute; left: 100%; top: 0%; width: 32px;"><div class="filtericon '+t.toTP("jqx-widget-header")+'" style="height: '+w+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-filterbutton")+'" style="width: 100%; height:100%;"></div></div><div class="sortasc '+t.toTP("jqx-widget-header")+'" style="height: '+w+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortascbutton")+" "+t.toTP("jqx-icon-arrow-up")+'" style="width: 100%; height:100%;"></div></div><div class="sortdesc '+t.toTP("jqx-widget-header")+'" style="height: '+w+'px; float: right; display: none; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sortdescbutton")+" "+t.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div><div class="sorticon '+t.toTP("jqx-widget-header")+'" style="height: '+w+'px; float: right; visibility: hidden; width: 16px;"><div class="'+t.toTP("jqx-grid-column-sorticon")+" "+t.toTP("jqx-icon-arrow-down")+'" style="width: 100%; height:100%;"></div></div></div>');S.addClass(t.toTP("jqx-widget-header")),q.append(B);var P=B.children();this.sorticon=P[3],this.sortasc=P[1],this.sortdesc=P[2],this.filtericon=P[0],this.iconscontainer=B,t.rtl&&(B.css("margin-left","0px"),B.css("left","0px"),e(this.sorticon).css("float","left"),e(this.sortasc).css("float","left"),e(this.filtericon).css("float","left"),e(this.sortdesc).css("float","left")),!t.autoshowfiltericon&&this.filterable&&e(this.filtericon).css("display","block")}if(this.element=g[0],z&&(t._handlecolumnsmenu(t,q,g,S,this),this.menu||S.hide()),x.appendChild(g[0]),t.groupable&&k){if(g[0].id=t.dataview.generatekey(),!t._handlecolumnstogroupsdragdrop)throw new Error("jqxGrid: Missing reference to jqxgrid.grouping.js.");t._handlecolumnstogroupsdragdrop(this,g)}t.columnsreorder&&this.draggable&&t._handlecolumnsdragreorder&&t._handlecolumnsdragreorder(this,g);var H=this;H._applyStyle(),t.addHandler(g,"mouseenter",(function(e){H.hovered=!0,H._applyStyle()})),t.addHandler(g,"mouseleave",(function(e){H.hovered=!1,H._applyStyle()}));var M=function(e,i,r){if(e.selectable){var s=t.getrows();if(void 0===e.selected&&(e.selected=!1),i.shiftKey&&void 0!==t._clickedcolumn||(t._clickedcolumn=e),i.shiftKey&&t._clickedcolumn&&void 0===r){var l=t.columns.records.indexOf(t._clickedcolumn),a=t.columns.records.indexOf(e),o=Math.min(l,a),n=Math.max(l,a);t.clearselection();for(var d=o;d<=n;d++)M(t.columns.records[d],i,!0);return void t._renderrows(this.virtualsizeinfo)}r?e.selected=!0:(i.ctrlKey||t.clearselection(),e.selected=!e.selected);for(d=0;d<s.length;d++)t._applycellselection(s[d].boundindex,e.displayfield,e.selected,!1,!1);e.selected?e.element.setAttribute("selected",""):e.element.removeAttribute("selected"),e._applyStyle(),void 0===r&&(t.virtualsizeinfo=t._calculatevirtualheight(),t._renderrows(t.virtualsizeinfo))}};if(t.addHandler(g,"click",(function(e){if(H.checkboxcolumn)return!0;if(t.sorttogglestates>0&&t._togglesort&&!t._loading){if(t.suspendClick)return!0;"many"!==t.sortmode?t._togglesort(H):"many"!==t.sortmode||t.sortmodekey?("many"===t.sortmode&&"Control"===t.sortmodekey&&e.ctrlKey||"many"===t.sortmode&&"ctrlKey"===t.sortmodekey&&e.ctrlKey)&&t._togglesort(H):t._togglesort(H)}M(H,e),e.preventDefault(),t._raiseEvent(7,{column:H.getcolumnproperties(),datafield:H.datafield,originalEvent:e})})),H.toggleSelection=M,H.resizable&&t.columnsresize&&!C){var A=!1,E="mousemove";t.isTouchDevice()&&!0!==t.touchmode&&(A=!0,E=e.jqx.mobile.getTouchEventName("touchstart")),t.addHandler(g,E,(function(i){var r=parseInt(i.pageX),s=5,l=parseInt(g.coord().left);if(t.hasTransform&&(l=e.jqx.utilities.getOffset(g).left),t.resizing)return!0;if(t._handlecolumnsresize){if(A)return s=40,(r=t.getTouches(i)[0].pageX)>=l+H.width-s?(t.resizablecolumn={columnelement:g,column:H},g.css("cursor","col-resize")):(g.css("cursor",""),t.resizablecolumn=null),!0;var a=H.width;if(t.rtl&&(a=0),r>=l+a-s){if(r<=l+a+s)return t.resizablecolumn={columnelement:g,column:H},g.css("cursor","col-resize"),!1;g.css("cursor",""),t.resizablecolumn=null}else g.css("cursor",""),r<l+a-s&&(H._animating||H._menuvisible||g.mouseenter()),t.resizablecolumn=null}}))}(g.css("left",s),this.hidden&&this.hideable||this.adaptivehidden||(s+=f),H.rendered)&&(H.rendered(e(q[0].firstChild),H.align,w)&&null!=B&&B.hide());if(H.checkboxcolumn){if(B&&B.hide(),!t.host.jqxCheckBox)throw new Error("jqxGrid: Missing reference to jqxcheckbox.js");q.html('<div style="cursor: pointer; margin-left: 3px; top: 50%; margin-top: -9px; position: relative;"></div>');var D=q.find("div:first");D.jqxCheckBox({_canFocus:!1,disabled:t.disabled,disabledContainer:!0,theme:t.theme,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0}),D.addClass(t.toThemeProperty("jqx-checkbox")),H.checkboxelement=D;var O=D.data().jqxCheckBox.instance;t._checkboxcolumn=H,O.updated=function(e,i,r){t._checkboxcolumnupdating=!0,t.disabled&&(D.jqxCheckBox({disabled:t.disabled}),i=r),i?t.selectallrows():t.unselectallrows(),t._checkboxcolumnupdating=!1}}})),s>0?this.columnsheader.width(2+s):this.columnsheader.width(s),i[0].appendChild(x),this.columnsrow=i,t.columnsheader.append(i),this.showfilterrow&&this._updatefilterrow){if(this.columngroups?i.height(this.columngroupslevel*this.columnsheight):i.height(this.columnsheight),!this.filterrow){var _=e("<div style='position: relative !important; '></div>");_[0].id="filterrow."+this.element.id,_.height(this.filterrowheight),this.filterrow=_}this.filterrow.width(2+s),this.columnsheader.append(this.filterrow),this._updatefilterrow()}if(this.showeverpresentrow&&"bottom"!==this.everpresentrowposition){if(this.columngroups?i.height(this.columngroupslevel*this.columnsheight):i.height(this.columnsheight),!this.addnewrowtop){var q=e("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>");q[0].id="addnewrowtop."+this.element.id,q.height(this.everpresentrowheight),this.addnewrowtop=q}this.addnewrowtop.width(2+s),"topAboveFilterRow"==this.everpresentrowposition&&this.filterrow?this.addnewrowtop.insertBefore(this.filterrow):this.columnsheader.append(this.addnewrowtop),this._updateaddnewrow()}else if(this.showeverpresentrow&&"bottom"===this.everpresentrowposition){if(!this.addnewrowbottom){var j=e("<div style='position: relative !important; z-index:"+this.headerZIndex+";'></div>");j[0].id="addnewrowbottom."+this.element.id,j.height(this.everpresentrowheight),this.addnewrowbottom=j}this.addnewrowbottom.width(2+s),this.addnewrow.append(this.addnewrowbottom),this._updateaddnewrow()}i[0].style.visibility=0==s?"hidden":"inherit",i.width(s),this._handlecolumnsdragdrop&&this._handlecolumnsdragdrop(),this._handlecolumnsreorder&&this._handlecolumnsreorder(),this._rendersortcolumn&&this._rendersortcolumn(),this._renderfiltercolumn&&this._renderfiltercolumn(),this._handlecolumnsresize&&this._handlecolumnsresize(),this.columngroups&&this._rendercolumngroups(),this._updatecheckboxselection&&this._updatecheckboxselection()},_rendercolumngroups:function(){if(this.columngroups){for(var t=0,i=0;i<this.columns.records.length;i++)this.columns.records[i].pinned&&t++;var r=this.headerZIndex-t+this.columns.records.length,s=this.that,l=s.toTP("jqx-grid-column-header")+" "+s.toTP("jqx-grid-columngroup-header")+" "+s.toTP("jqx-widget-header");s.rtl&&(l+=" "+s.toTP("jqx-grid-columngroup-header-rtl"));var a=this.columnsheader.find("#columntable"+this.element.id);a.find("jqx-grid-columngroup-header").remove();for(var o=0;o<this.columngroupslevel-1;o++)for(i=0;i<this.columngroups.length;i++){var n=this.columngroups[i],d=n.level;if(d===o){var h=d*this.columnsheight,c=99999;if(n.groups){var u=function(e){for(var t=0,i=0;i<e.groups.length;i++){var r=e.groups[i];r.groups?t+=u(r):r.hidden||(t+=r.width,c=Math.min(parseFloat(r.element.style.left),c))}return t};n.width=u(n),n.left=c;var g=this.columnsheight,p=r--,m=e('<div role="columnheader" style="z-index: '+p+';position: absolute;" class="'+l+'"></div>'),w=e(this._rendercolumnheader(n.text,n.align,this.columnsheight,this));if(n.renderer){w=e("<div style='height: 100%; width: 100%;'></div>");var f=n.renderer(n.text,n.align,g);w.html(f)}m.append(w),m[0].style.left=c+"px",0===c&&(m[0].style.borderLeftColor="transparent"),this.showcolumnheaderlines||(m[0].style.borderRightColor="transparent",m[0].style.borderBottomColor="transparent",m[0].style.boxShadow="none"),m[0].style.top=h+"px",m[0].style.height=g+"px",m[0].style.width=-1+n.width+"px",a.append(m),n.element=m,n.rendered&&n.rendered(w,n.align,g)}}}}},_resizecolumngroups:function(){if(this.columngroups)for(var e=0;e<this.columngroups.length;e++){var t=this.columngroups[e],i=t.level*this.columnsheight,r=99999;if(t.groups){var s=function(e){for(var t=0,i=0;i<e.groups.length;i++){var l=e.groups[i];l.groups?t+=s(l):l.hidden||(t+=l.width,r=Math.min(parseFloat(l.element.style.left),r))}return t};t.width=s(t),t.left=r;var l=this.columnsheight,a=t.element;a[0].style.left=r+"px",a[0].style.top=i+"px",a[0].style.height=l+"px",a[0].style.width=-1+t.width+"px"}}},_handlecolumnsmenu:function(t,i,r,s,l){t.dragmousedown=null,s[0].id=t.dataview.generatekey(),i.append(s),r[0].columnsmenu=s[0],l.element=r[0];var a=this.columnsmenuwidth+1,o="mouseenter";if(t.isTouchDevice()&&(o="touchstart"),t.addHandler(r,o,(function(i){var o=parseInt(i.pageX),n=t.columnsresize&&l.resizable?3:0,d=parseInt(r.coord().left);t.hasTransform&&(d=e.jqx.utilities.getOffset(r).left);var h=l.width;if(t.rtl&&(h=0),0!=n&&o>=d+h-n&&o<=d+h+n)return!1;var c=t.vScrollInstance.isScrolling();l.menu&&t.autoshowcolumnsmenubutton&&!c&&!t.disabled&&function(){if(!l.menu)return!1;if(!t.resizing){if(l._menuvisible&&t._hasOpenedMenu)return!1;if(l._animating=!0,t.menuitemsarray&&t.menuitemsarray.length>0)if(t.enableanimations)s.css("display","block"),s.stop(),l.iconscontainer.stop(),t.rtl?(s.css("margin-left",-a),s.animate({"margin-left":"0px"},"fast",(function(){s.css("display","block"),l._animating=!1,l._menuvisible=!0}))):(s.css("margin-left","0px"),s.animate({"margin-left":-a},"fast",(function(){s.css("display","block"),l._animating=!1,l._menuvisible=!0}))),e=t.rtl?a:-(32+a),l.iconscontainer.animate({"margin-left":e},"fast");else{s.css("display","block");var e=t.rtl?16:-48;l.iconscontainer.css("margin-left",e+"px"),l._animating=!1,l._menuvisible=!0}}}()})),!t.autoshowcolumnsmenubutton){s.css("display","block");var n=t.rtl?16:-48;l.iconscontainer.css("margin-left",n+"px"),t.rtl?s.css({"margin-left":"0px"}):s.css({"margin-left":-a})}t.addHandler(r,"mouseleave",(function(i){if(t.menuitemsarray&&t.menuitemsarray.length>0&&l.menu){var r=e.data(document.body,"contextmenu"+t.element.id);if(null!=r&&s[0].id==r.columnsmenu.id)return;if(t.autoshowcolumnsmenubutton)if(t.enableanimations){t.rtl?s.css("margin-left","0px"):s.css("margin-left",-a),s.stop(),l.iconscontainer.stop(),t.rtl?s.animate({"margin-left":-a},"fast",(function(){s.css("display","none"),l._menuvisible=!1})):s.animate({"margin-left":0},"fast",(function(){s.css("display","none"),l._menuvisible=!1}));o=t.rtl?0:-32;l.iconscontainer.animate({"margin-left":o},"fast")}else{s.css("display","none");var o=t.rtl?0:-32;l.iconscontainer.css("margin-left",o+"px"),l._menuvisible=!1}}}));var d=!0,h="",c=e(l.filtericon);t.addHandler(s,"mousedown",(function(i){t.gridmenu||t._initmenu(),d=!e.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id),null!=(h=e.data(document.body,"contextmenu"+t.element.id))&&(h=h.column.datafield)})),t.addHandler(c,"mousedown",(function(i){t.gridmenu||t._initmenu(),d=!e.data(t.gridmenu[0],"contextMenuOpened"+t.gridmenu[0].id),null!=(h=e.data(document.body,"contextmenu"+t.element.id))&&(h=h.column.datafield)}));var u=function(){if(!l.menu)return!1;if(t.gridmenu||t._initmenu(),t.disabled)return!1;for(var i=0;i<t.columns.records.length;i++)t.columns.records[i].datafield!=l.datafield&&(t.columns.records[i]._menuvisible=!1);var r=s.coord(!0),a=s.height();if(!d&&(d=!0,h==l.datafield))return t._closemenu(),!1;var o=t.host.coord(!0);if(t.hasTransform&&(o=e.jqx.utilities.getOffset(t.host),r=e.jqx.utilities.getOffset(s)),o.left+t.host.width()>parseInt(r.left)+t.gridmenu.width()?t.gridmenu.jqxMenu("open",r.left,r.top+a):t.gridmenu.jqxMenu("open",s.width()+r.left-t.gridmenu.width(),r.top+a),t.gridmenu.width()<100&&t._arrangemenu(),t.adaptive&&t.element.offsetWidth<t.adaptivewidth){t.gridmenu.jqxMenu("close"),t.gridmenu.jqxMenu("open",o.left,r.top+a);var n=0;for(i=0;i<t.columns.records.length;i++){var c=t.columns.records[i];c.hidden||c.adaptivehidden||"adaptive"===c.columntype||(n+=c.adaptivewidth)}t.gridmenu.width(n),t.gridmenu.height(t.content.height())}(!t.filterable||t.filterable&&t.showfilterrow)&&setTimeout((function(){t.gridmenu.focus();for(var i=t.gridmenu.find(".jqx-item"),r=0;r<i.length;r++)i[r].active&&(i[r].active=!1);var s=i[0];i[0].className.indexOf("disabled")>=0&&(s=i[1]),e(i).removeClass("jqx-fill-state-focus"),e(s).addClass("jqx-fill-state-focus"),s.active=!0}),225),t._hasOpenedMenu=!0;var u=t._getmenuitembyindex(0),g=t._getmenuitembyindex(1),p=t._getmenuitembyindex(2),m=t._getmenuitembyindex(3),w=t._getmenuitembyindex(4),f=t._getmenuitembyindex(5);if(null!=u&&null!=g&&null!=p){var v=l.sortable&&t.sortable;if(t.gridmenu.jqxMenu("disable",u.id,!v),t.gridmenu.jqxMenu("disable",g.id,!v),t.gridmenu.jqxMenu("disable",p.id,!v),null!=l.displayfield){var b=(x=t.getsortinformation())&&x.sortcolumns&&x.sortcolumns.find((function(e){return e.dataField===l.displayfield}));if(t.sortcolumn==l.displayfield||b){var x=t.getsortinformation();v&&(x.sortdirection.ascending?t.gridmenu.jqxMenu("disable",u.id,!0):t.gridmenu.jqxMenu("disable",g.id,!0))}else t.gridmenu.jqxMenu("disable",p.id,!0)}}if(null!=m&&null!=w&&(t.groupable&&l.groupable?t.groups&&-1!=t.groups.indexOf(l.datafield)?(t.gridmenu.jqxMenu("disable",m.id,!0),t.gridmenu.jqxMenu("disable",w.id,!1)):(t.gridmenu.jqxMenu("disable",m.id,!1),t.gridmenu.jqxMenu("disable",w.id,!0)):(t.gridmenu.jqxMenu("disable",w.id,!0),t.gridmenu.jqxMenu("disable",m.id,!0))),null!=f){t.menuOwner=l,t._updatefilterpanel(t,f,l);var y=0;t.sortable&&t._togglesort&&t.showsortmenuitems&&(y+=3),t.groupable&&t.addgroup&&t.showgroupmenuitems&&(y+=2);var _=36*y+6;_=y*t._measureMenuElement()+20;e.jqx.browser.msie&&e.jqx.browser.version<8&&(_+=20,e(f).height(220)),t.isTouchDevice()&&(_+=10),t.filterable&&t.showfiltermenuitems&&(l.filterable?(t.gridmenu.height(_+230),e(f).css("display","block")):(t.gridmenu.height(_),e(f).css("display","none")))}t.columnmenuopening&&(!1===t.columnmenuopening(t.gridmenu,l.displayfield,t.gridmenu.height())&&setTimeout((function(){t._closemenu()})));e.data(document.body,"contextmenu"+t.element.id,{column:l,columnsmenu:s[0]})};t.addHandler(c,"click",(function(e){return!!l.menu&&(t.showfilterrow||("block"!=s[0].style.display&&r.trigger("mouseenter"),setTimeout((function(){"block"!=s[0].style.display&&r.trigger("mouseenter"),u()}),200)),!1)})),t.addHandler(s,"click",(function(e){return!!l.menu&&(u(),!1)})),t.isTouchDevice()&&t.addHandler(s,e.jqx.mobile.getTouchEventName("touchstart"),(function(e){return!!l.menu&&(t._hasOpenedMenu?t._closemenu():u(),!1)}))},_removecolumnhandlers:function(t){var i=this.that,r=e(t.element);if(r.length>0){i.removeHandler(r,"mouseenter"),i.removeHandler(r,"mouseleave");var s=e(t.filtericon);if(i.removeHandler(s,"mousedown"),i.removeHandler(s,"click"),i.removeHandler(r,"click"),i.removeHandler(r,"mousemove"),i.columnsreorder&&(i.removeHandler(r,"mousedown.drag"),i.removeHandler(r,"mousemove.drag")),i.removeHandler(r,"dragstart"),r[0].columnsmenu){var l=e(r[0].columnsmenu);i.removeHandler(l,"click"),i.removeHandler(l,"mousedown"),i.removeHandler(l,e.jqx.mobile.getTouchEventName("touchstart"))}}},_rendercolumnheader:function(e,t,i,r){return r.columngroups?(i/2-this._columnheight/2<0&&6,"px"):32!=this.columnsheight&&(this.columnsheight/2-this._columnheight/2<0&&6,"px"),this.enableellipsis?"left"==t?'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 4px; margin-right: 2px; line-height: "+i+'px;"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>":'<div style="padding-bottom: 2px; overflow: hidden; text-overflow: ellipsis; text-align: '+t+"; margin-left: 2px; margin-right: 4px; line-height: "+i+'px;"><span style="text-overflow: ellipsis; cursor: default;">'+e+"</span></div>":"center"==t||"middle"==t?'<div style="padding-bottom: 2px; text-align: center; line-height: '+i+'px;"><a href="#">'+e+"</a></div>":'<a style="line-height: '+i+"px; float: "+t+';" href="#">'+e+"</a>"},_renderrows:function(t,i,r){var s=this.that;if((this.pageable||this.groupable)&&(this.autoheight||this.autorowheight)&&null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length<this.dataview.rows.length&&(s.prerenderrequired=!0),!this.pageable&&(this.autoheight||this.autorowheight)&&(this.virtualmode||this.unboundmode)){var l=this.source.totalrecords;isNaN(l)||null!=this.table&&null!=this.table[0].rows&&this.table[0].rows.length!=l&&(s.prerenderrequired=!0)}!this.autoheight&&!this.autorowheight||s.prerenderrequired||this.table&&this.table[0].rows&&(this.table[0].rows.length<this.dataview.records.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?s.prerenderrequired=!0:this.pageable||(s.prerenderrequired=!0)),this.table[0].rows.length<this.dataview.cachedrecords.length&&(this.pageable&&this.table[0].rows.length<this.dataview.pagesize?s.prerenderrequired=!0:this.pageable||(s.prerenderrequired=!0))),s._prerenderrows(t),s._requiresupdate&&(s._requiresupdate=!1,s._updatepageviews());var a=function(){s._loading||(s.WinJS?MSApp.execUnsafeLocalFunction((function(){s._rendervisualrows()})):s._rendervisualrows(),s.virtualmode&&s.showaggregates&&s._updateaggregates&&s.refreshaggregates())},o=e.jqx.browser.msie&&e.jqx.browser.version<10;if(this.virtualmode){this.loadondemand&&(a(),function(){if(s.rendergridrows){var e=s._startboundindex;null==e&&(e=0);var t=e+1+s.dataview.pagesize;if(null!=e&&null!=t){var r=!!s.source._source;if((r?s.source._source.recordstartindex:s.source.recordstartindex)!=e||1==i){if(r){if(t>=s.source._source.totalrecords&&((e=(t=s.source._source.totalrecords)-s.dataview.pagesize-1)<0&&(e=0),s.source._source.recordendindex==t&&s.source._source.recordstartindex==e))return;s.source._source.recordstartindex=e,s.source._source.recordendindex=t}else s.source.recordstartindex=e,s.source.recordendindex=t;s.updatebounddata("cells")}}}}(),this.loadondemand=!1);var n=null==this._browser?this._isIE10():this._browser;this.editable&&this.editcell&&!this.vScrollInstance.isScrolling()&&!this.hScrollInstance.isScrolling()||this.autoheight?a():n||o||navigator&&-1!=navigator.userAgent.indexOf("Safari")?(null!=this._scrolltimer&&clearTimeout(this._scrolltimer),this._scrolltimer=setTimeout((function(){a()}),5)):a()}else{if("deferred"==this.scrollmode&&(this.hScrollInstance.isScrolling()||this.vScrollInstance.isScrolling())){null!=this._scrolltimer&&clearInterval(this._scrolltimer);var d=this._getfirstvisualrow();if(null!=d){var h=this.scrollfeedback?this.scrollfeedback(d.bounddata):function(t){if(null==d)return"";var i="<table>",r=s.deferreddatafields;null==r&&s.columns.records.length>0&&(r=new Array).push(s.columns.records[0].displayfield);for(var l=0;l<r.length;l++){var a=r[l],o=s._getcolumnbydatafield(a);if(o){var n=s._getcellvalue(o,d);""!=o.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(n)?n=e.jqx.dataFormat.formatdate(n,o.cellsformat,s.gridlocalization):e.jqx.dataFormat.isNumber(n)&&(n=e.jqx.dataFormat.formatnumber(n,o.cellsformat,s.gridlocalization))),i+="<tr><td>"+n+"</td></tr>"}}return i+="</table>"}(d.bounddata);h!=this._scrollelementcontent&&(this._scrollelement[0].innerHTML=h,this._scrollelementcontent=h)}return this._scrollelement.css("visibility","visible"),this._scrollelementoverlay.css("visibility","visible"),this._scrollelement.css("margin-top",-this._scrollelement.height()/2),void(this._scrolltimer=setInterval((function(){s.hScrollInstance.isScrolling()||s.vScrollInstance.isScrolling()||(a(),s._scrollelement.css("visibility","hidden"),s._scrollelementoverlay.css("visibility","hidden"),clearInterval(s._scrolltimer),d&&s.ensurerowvisible(d.visibleindex))}),100))}if(navigator&&-1==navigator.userAgent.indexOf("Chrome")&&-1!=navigator.userAgent.indexOf("Safari")&&(this._updatedelay=1),null!=this.touchDevice&&1==this.touchDevice&&(this._updatedelay=5),((n=null==this._browser?this._isIE10():this._browser)||o)&&(this._updatedelay=5),n&&this.hScrollInstance.isScrolling())return void a();if(e.jqx.browser.mozilla&&0==this._updatedelay&&(this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling())&&(this._updatedelay=0),this.isTouchDevice()&&(this._updatedelay=0),null!=this.updatedelay&&(this._updatedelay=this.updatedelay),0==this._updatedelay)a();else{var c=this._jqxgridrendertimer;null!=c&&clearTimeout(c),this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()?(this._updatedelay?c=setTimeout((function(){a()}),this._updatedelay):(c=null,a()),this._jqxgridrendertimer=c):(this._jqxgridrendertimer=c,a())}}if(s.autorowheight&&!s.autoheight&&this._pageviews.length>0){var u=this._gettableheight(),g=this._pageviews[0].height;if(g>u)if(this.pageable&&this.gotopage&&(g=this._pageviews[0].height)<0&&(g=this._pageviews[0].height),"visible"!=this.vScrollBar.css("visibility")&&this.vScrollBar.css("visibility","visible"),(g<=u||this.autoheight)&&this.vScrollBar.css("visibility","hidden"),g-u>0){if("deferred"!=this.scrollmode){var p=g-u,m=this.vScrollInstance.max;if(this.vScrollBar.jqxScrollBar({max:p}),Math.round(p)!=Math.round(m))this.vScrollBar.jqxScrollBar("value")>p&&this.vScrollBar.jqxScrollBar({value:0})}}else this.vScrollBar.jqxScrollBar({value:0,max:g});else this._loading||this.vScrollBar.css("visibility","hidden"),this.vScrollBar.jqxScrollBar({value:0});this._arrange(),this.virtualsizeinfo&&(this.virtualsizeinfo.virtualheight=g)}},scrolling:function(){return{vertical:this.vScrollInstance.isScrolling(),horizontal:this.hScrollInstance.isScrolling()}},_renderhorizontalscroll:function(){var e=this.hScrollInstance,t=e.value;"hidden"===this.hScrollBar.css("visibility")&&(e.value=0,t=0);var i=parseInt(t);if(null!=this.table){var r=this.table[0].rows.length,s=this.columnsrow,l=this.groupable&&this.groups.length>0?this.groups.length:0,a=this.columns.records.length-l,o=this.columns.records,n=0==this.dataview.rows.length;if(this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(i=e.max-i),n&&!this._haspinned){for(var d=0;d<r;d++)for(var h=this.table[0].rows[d],c=0;c<l+a;c++){if(null!=(u=h.cells[c]))if(o[c].pinned)if(u.style.marginLeft=i+"px",0==d)s[0].cells[c].style.marginLeft=i+"px"}this.table[0].style.marginLeft=-i+"px",s[0].style.marginLeft=-i+"px"}else if(this._haspinned||null==this._haspinned){for(d=0;d<r;d++)for(h=this.table[0].rows[d],c=0;c<l+a;c++){var u;if(null!=(u=h.cells[c]))if(o[c].pinned){if(0==i&&""==u.style.marginLeft)continue;var g=null,p=null,m=null;if(this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(m=this.addnewrowtop[0].cells[c]),this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(p=this.filterrow[0].cells[c]),this.showaggregates&&this.statusbar[0].cells&&(g=this.statusbar[0].cells[c]),this.rtl){if(u.style.marginLeft=-parseInt(t)+"px",0==d)s[0].cells[c].style.marginLeft=-parseInt(t)+"px",g&&(g.style.marginLeft=-parseInt(t)+"px"),p&&(p.style.marginLeft=-parseInt(t)+"px"),m&&(m.style.marginLeft=-parseInt(t)+"px")}else if(u.style.marginLeft=i+"px",0==d)s[0].cells[c].style.marginLeft=i+"px",g&&(g.style.marginLeft=i+"px"),p&&(p.style.marginLeft=i+"px"),m&&(m.style.marginLeft=i+"px")}}this.table[0].style.marginLeft=-i+"px",s[0].style.marginLeft=-i+"px"}else 0==this._haspinned&&(this.table[0].style.marginLeft=-i+"px",s[0].style.marginLeft=-i+"px");if(this.showaggregates&&this.statusbar[0].cells){var w=0;this.rtl&&"hidden"!=this.vScrollBar.css("visibility")&&"hidden"!=this.hScrollBar.css("visibility")&&(w=2+parseInt(this.hScrollBar.css("left"))),this.statusbar[0].style.marginLeft=-i+w+"px"}this.showfilterrow&&this.filterrow&&this.filterrow[0].cells&&(this.filterrow[0].style.marginLeft=-i+"px"),this.showeverpresentrow&&this.addnewrowtop&&this.addnewrowtop[0].cells&&(this.addnewrowtop[0].style.marginLeft=-i+"px")}},_updaterowdetailsvisibility:function(){if(this.rowdetails)for(var t=0;t<this._rowdetailselementscache.length;t++)e(this._rowdetailselementscache[t]).css("display","none")},_getvisualcolumnsindexes:function(e,t,i,r,s,l,a){var o=this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()||this._keydown;if((this.rowdetails||this.rtl||this.editcell&&o||this.width&&this.width.toString().indexOf("%")>=0&&!o&&!this.editcell||this.exporting)&&!a)return{start:0,end:i+r};var n=0,d=-1,h=i+r,c=!1;if(this.autorowheight)return{start:0,end:i+r};if(!s)for(var u=0;u<i+r;u++){if(c||this.columns.records[u].pinned&&l&&(c=!0),this.columns.records[u].hidden||this.columns.records[u].adaptivehidden||(n+=this.columns.records[u].width),n>=e&&-1==d&&(d=u),n>t+e){h=u;break}}return++h>i+r&&(h=i+r),(-1==d||c)&&(d=0),{start:d,end:h}},_getvirtualcolumnsindexes:function(e,t,i,r,s){var l=this.vScrollInstance.isScrolling()||this.hScrollInstance.isScrolling()||this._keydown;if(this.enableoptimization&&(this.rowdetails||this.rtl||this.editcell&&l||this.width&&this.width.toString().indexOf("%")>=0&&!l&&!this.editcell||this.exporting))return{start:0,end:i+r};if(this.rtl||this.editcell||this.exporting)return{start:0,end:i+r};var a=0,o=-1,n=i+r;if(this.autorowheight)return{start:0,end:i+r};if(!s)for(var d=0;d<i+r;d++){if(this.columns.records[d].hidden||this.columns.records[d].adaptivehidden||(a+=this.columns.records[d].width),a>=e&&-1==o&&(o=d),a>t+e){n=d;break}}return++n>i+r&&(n=i+r),-1==o&&(o=0),{start:o,end:n}},_getfirstvisualrow:function(){var e=this.vScrollInstance.value,t=parseInt(e);if(0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"visible"!=this.vScrollBar[0].style.visibility&&(t=0),!this.pageable){var i=this._findvisiblerow(t,this._pageviews);if(-1==i)return null;i!=this.dataview.pagenum?(this.dataview.pagenum=i,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}var r=this._findvisiblerow(t,this._pagescache[this.dataview.pagenum]),s=this._pagescache[this.dataview.pagenum];if(s&&s[0])return s[r]},_rendervisualrows:function(){if(this.virtualsizeinfo){var t=this.vScrollInstance,i=this.hScrollInstance,r=t.value,s=i.value,l=parseInt(r),a=parseInt(s),o=this._gettableheight(),n=null!=this._hostwidth?this._hostwidth:this.host.width();"visible"==this.hScrollBar[0].style.visibility&&(o+=29),"deferred"==this.scrollmode&&0!=this._newmax&&l>this._newmax&&null!=this._newmax&&(l=this._newmax);var d=t.isScrolling()||i.isScrolling()||this._keydown,h=this.groupable&&this.groups.length>0;if(this.visiblerows=new Array,this.hittestinfo=new Array,this.editcell&&null==this.editrow&&this._hidecelleditor(!1),null!=this.editrow&&this._hideeditors(),this.virtualmode&&!this.pageable&&(this._pagescache=new Array),0==this._pagescache.length&&(this.dataview.updateview(),this._loadrows()),"hidden"==this.vScrollBar[0].style.visibility&&(l=0),!this.pageable){var c=this._findvisiblerow(l,this._pageviews);-1==c&&(this._clearvisualrows(),this._renderemptyrow(),this._updaterowdetailsvisibility()),c!=this.dataview.pagenum?(this.dataview.pagenum=c,this.dataview.updateview(),this._loadrows()):this._pagescache[this.dataview.pagenum]||this._loadrows()}var u=this.groupable&&this.groups.length>0?this.groups.length:0;if(this.columns.records){var g=this.columns.records.length-u,p=this._findvisiblerow(l,this._pagescache[this.dataview.pagenum]),m=this._pagescache[this.dataview.pagenum],w=p;w<0&&(w=0);var f=0,v=0,b=0,x=0,y=this.virtualsizeinfo.visiblerecords,_=this.groupable?this.groups.length:0,q=this.toTP("jqx-grid-cell")+" "+this.toTP("jqx-item");this.rtl&&(q+=" "+this.toTP("jqx-grid-cell-rtl")),(this.autoheight||this.autorowheight)&&this.pageable&&(!this.groupable||this.groupable&&0===this.groups.length)&&(y=this.dataview.pagesize),h&&(q=" "+this.toTP("jqx-grid-group-cell")),this.isTouchDevice()&&(q+=" "+this.toTP("jqx-touch")),this.autorowheight&&(q+=" jqx-grid-cell-wrap");var j=this.rowsheight;this.cardview&&(j=this.cardheight);var S=this._rendercell,z=this._getvisualcolumnsindexes(a,n,u,g,h,!0),k=z.start,C=z.end,T=this._getvirtualcolumnsindexes(a,n,u,g,h),I=T.start,B=T.end;e.jqx.browser.msie&&e.jqx.browser.version;if((this.autoheight||this.pageable)&&this.autorowheight&&this._pageviews[0]&&(this._oldpageviewheight=this._pageviews[0].height),this.autorowheight&&(w=0),w>=0){this._updaterowdetailsvisibility(),this._startboundindex=null!=m?m[w].bounddata.boundindex:0,this._startvisibleindex=null!=m?m[w].bounddata.visibleindex:0;var P=this.table[0].rows;if(this.columns.records.length>10&&this.enablecolumnsvirtualization)for(var H=function(e){return!(!e||!e.parentNode||"#document-fragment"==e.parentNode.nodeName)},M=0;M<P.length;M++){(re=P[M]).className="";for(var A=0;A<I;A++){var E=A;if(!this.columns.records[E].pinned&&null!=this.columns.records[E].datafield){H(te=re.cells[E])&&te.parentNode.removeChild(te);var D=this.columns.records[E].element;this.columns.records[E]._rendered=!1,H(D)&&this.columnsrow[0].removeChild(D),this.filterrow&&H(this.filterrow[0].cells[E])&&this.columns.records[E].filterable&&this.filterrow[0].cells[E].parentNode.removeChild(this.filterrow[0].cells[E])}}for(A=B;A<this.columns.records.length;A++){E=A;if(!this.columns.records[E].pinned&&null!=this.columns.records[E].datafield){H(te=re.cells[E])&&te.parentNode.removeChild(te);D=this.columns.records[E].element;this.columns.records[E]._rendered=!1,H(D)&&this.columnsrow[0].removeChild(D),this.filterrow&&H(this.filterrow[0].cells[E])&&this.columns.records[E].filterable&&this.filterrow[0].cells[E].parentNode.removeChild(this.filterrow[0].cells[E])}}for(A=I;A<B;A++){E=A;H(te=re.cells[E])||re.appendChild(te);D=this.columns.records[E].element;this.columns.records[E]._rendered=!0,D.selectable&&(te.removeAttribute("selected"),D.selected&&te.setAttribute("selected","")),H(D)||this.columnsrow[0].appendChild(D),this.filterrow&&this.showfilterrow&&!H(this.filterrow[0].cells[E])&&this.columns.records[E].filterable&&this.filterrow[0].firstChild.appendChild(this.filterrow[0].cells[E])}}if(this.cardview)for(M=0;M<this.table[0].rows.length;M++){(re=this.table[0].rows[M]).innerHTML=""}for(var O=0;O<y&&v<y;O+=1){var L=null!=m?m[w+O]:null;if(this.virtualmode&&O>=this.source.totalrecords&&(L=null),null==L){if(w=-O,this._pagescache[this.dataview.pagenum+1])m=this._pagescache[this.dataview.pagenum+1],this.dataview.pagenum++;else{var N=this._pageviews.length;do{if(!(this.dataview.pagenum<this._pageviews.length-1)){m=void 0;break}this.dataview.pagenum++,m=void 0,this._pageviews[this.dataview.pagenum].height>0&&(this.dataview.updateview(),this._loadrows(),m=this._pagescache[this.dataview.pagenum])}while(null==m&&this.dataview.pagenum<N)}null!=m&&(L=m[w+O])}if(null!=L){if(L.hidden)continue;if(this._endboundindex=this._startboundindex+O,this._endvisibleindex=this._startvisibleindex+O,0==O){var F=Math.abs(l-L.top);this.table[0].style.top=-F+"px";var R=this.table;e.jqx.browser.chrome&&(this._chromeTimer&&clearTimeout(this._chromeTimer),this._chromeTimer=setTimeout((function(){R[0].style.top=.01-F+"px"}),50)),x=-F}if(!(re=this.table[0].rows[v]))continue;parseInt(re.style.height)!=L.height&&(re.style.height=parseInt(L.height)+"px"),re.setAttribute("row-id",L.bounddata.uid),b+=L.height;var W=this.rowdetails&&L.rowdetails,V=!L.rowdetailshidden;W&&V&&(re.style.height=parseInt(L.height-L.rowdetailsheight)+"px",y++);var G=this._isrowselected(true,L);for(A=k;A<C;A++){E=A;this._rendervisualcell(S,q,G,W,V,h,_,re,L,E,v,d)}if(null!=L.group&&this._rendergroup&&this._rendergroup(_,re,L,u,g,v,n),this.autorowheight&&(this.autoheight||this.pageable)){for(j=this.rowsheight,A=k;A<C;A++)this.editable&&this.editcell&&this.editcell.column==this.columns.records[A].datafield&&this.editcell.row==this.getboundindex(L)&&this.editcell.editor?j=Math.max(j,this.editcell.editor.height()):re.cells[A].firstChild&&(j=Math.max(j,8+parseInt(re.cells[A].firstChild.offsetHeight)));re.style.height=parseInt(j)+"px",this.heights[this._startboundindex+O]=j,W&&V&&(j+=L.rowdetailsheight),L.height=j}if(this.cardview){re.innerHTML="";var K='<div class="jqx-grid-card-row"',U="";K+='style="grid-template-columns: ';for(var Y=100/this.cardsize+"%",Z=w,X=0;X<this.cardsize;X++)if(null!=m&&(L=m[Z*this.cardsize+O*this.cardsize+X]),L){K+=Y+" ";var J='<div id="'+L.bounddata.uid+'" class="jqx-grid-card-cell">';J+="<table>";for(A=k;A<C;A++){E=A;var $=null;if(!(he=this.columns.records[E]).hidden||void 0!==he.__hidden){var Q=this._getcellvalue(he,L);if(""!=he.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(Q)?Q=e.jqx.dataFormat.formatdate(Q,he.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(Q)&&(Q=e.jqx.dataFormat.formatnumber(Q,he.cellsformat,this.gridlocalization))),null!=he.cellsrenderer){var ee=he.cellsrenderer(this.getboundindex(L),he.datafield,Q,null,he.getcolumnproperties(),L.bounddata);null!=ee&&(Q=ee)}var te=re.cells[E],ie=this.editable&&he.editable?'<span row="'+L.bounddata.uid+'"  class="jqx-icon-edit"></span>':"";J+='<tr class="jqx-grid-card-table-row">',J+='<td class="jqx-grid-card-cell-label"><div>'+he.text+"</div></td>",""!=he.cellclassname&&he.cellclassname?J+='<td class="jqx-grid-card-cell-value '+he.cellclassname+'"><div>'+Q+"</div></td>":J+='<td class="jqx-grid-card-cell-value"><div>'+Q+"</div></td>",J+="</tr>"}}J+="</table>",J+=ie,U+=J+="</div>"}K+=';">'+U+"</div>",re.innerHTML+=K,v++;continue}if(this.visiblerows[this.visiblerows.length]=L,this.hittestinfo[this.hittestinfo.length]={row:L,visualrow:re,details:!1},W&&V){v++;var re=this.table[0].rows[v];this._renderrowdetails(q,re,L,u,g,v),this.visiblerows[this.visiblerows.length]=L,this.hittestinfo[this.hittestinfo.length]={row:L,visualrow:re,details:!0}}if(!this.autorowheight&&b+x>=o)break}else{this._clearvisualrow(a,h,v,u,g),b+f+x<=o&&(f+=j)}v++}if(this._horizontalvalue=a,f>0&&"visible"==this.vScrollBar[0].style.visibility){parseInt(this.table.css("top"));var se=this._pageviews[this._pageviews.length-1],le=t.max,ae=se.top+se.height-o;"visible"==this.hScrollBar.css("visibility")&&(ae+=this.scrollbarsize+22),le==ae||this.autorowheight||ae>=0&&("deferred"!=this.scrollmode?(t.max=ae,t.setPosition(t.max)):this._newmax!=ae&&(this._newmax=ae,this._rendervisualrows()))}}if((this.autoheight||this.pageable)&&this.autorowheight){this._pagescache=new Array;var oe=0,ne=0;for(M=0;M<this.visiblerows.length;M++){var de=this.visiblerows[M];de.top=oe,oe+=de.height,ne+=de.height;W=this.rowdetails&&de.rowdetails,V=!de.rowdetailshidden,re=this.table[0].rows[M];W&&V&&M++;for(A=k;A<C;A++){var he;if(!(he=this.columns.records[A]).hidden&&!he.adaptivehidden&&!he.cellsrenderer){var ce=0;if(($=re.cells[A]).firstChild){ce=(de.height-parseInt($.firstChild.offsetHeight)-8)/2;if(W&&V)ce=(de.height-de.rowdetailsheight-e($.firstChild).height()-8)/2}else ce=(de.height-parseInt(e($).height())-8)/2;if(ce>=0&&(ce=parseInt(ce)+4,$.firstChild&&-1==$.firstChild.className.indexOf("jqx-grid-groups-row")&&"checkbox"!=he.columntype&&"button"!=he.columntype)){if(this.editable&&this.editcell&&this.editcell.column==he.datafield&&this.editcell.row==this.getboundindex(de))continue;$.firstChild.style.marginTop=ce+"px"}}}}this._pageviews[0]&&(this._pageviews[0].height=ne),this._arrange()}if(this._renderemptyrow(),this.toCompile&&this.toCompile.length>0){e.each(this.toCompile,(function(t,i){if(this.compiled)return!0;var r=this.cell;if(!r)return!0;e.jqx.angularCompile&&e.jqx.angularCompile(r,"<div>"+this.value+"</div>"),this.compiled=!0}))}}}},_hideemptyrow:function(){if(this.showemptyrow&&this.table&&this.table[0].rows){var t=this.table[0].rows[0];if(t)for(var i=!1,r=0;r<t.cells.length;r++){var s=e(t.cells[r]);"none"==s.css("display")||i||s.width()!=this.host.width()&&s.text()!=this.gridlocalization.emptydatastring||(s[0].checkbox=null,s[0].button=null,i=!0,s[0].innerHTML="")}}},_renderemptyrow:function(){if(!this._loading&&0==this.dataview.records.length&&this.showemptyrow){var t=!1,i=this.toTP("jqx-grid-cell");if(this.table&&this.table.length>0&&this.table[0].rows&&this.table[0].rows.length>0){var r=this.table[0].rows[0];this.table[0].style.top="0px";for(var s=0;s<r.cells.length;s++){var l=e(r.cells[s]);if("none"!=l.css("display")&&!t){l[0].checkbox=null,l[0].button=null,l[0].className=i,t=!0,l[0].innerHTML="";var a=e("<span style='white-space: nowrap; float: left; margin-left: 50%; position: relative;'></span>");a.text(this.gridlocalization.emptydatastring),l.append(a);var o=0;this.oldhscroll||(o=parseInt(this.table[0].style.marginLeft),this.rtl&&(l.css("z-index",999),l.css("overflow","visible"))),a.css("left",-o-a.width()/2),a.css("top",this._gettableheight()/2-a.height()/2),e.jqx.browser.msie&&e.jqx.browser.version<8&&(a.css("margin-left","0px"),a.css("left",this.host.width()/2-a.width()/2));var n=Math.abs(parseInt(this.table[0].style.top));isNaN(n)&&(n=0),e(r).height(this._gettableheight()+n),l.css("margin-left","0px"),l.width(this.host.width()),this.table.width()<this.host.width()&&this.table.width(this.host.width())}l.addClass(this.toThemeProperty("jqx-grid-empty-cell"))}}}},_clearvisualrows:function(){var e=this.virtualsizeinfo.visiblerecords,t=this.hScrollInstance.value,i=parseInt(t),r=this.groupable&&this.groups.length>0;if(this.columns.records)for(var s=0;s<e;s++)this._clearvisualrow(i,r,s,0,this.columns.records.length)},_iscellselected:function(e,t,i){var r=!1,s=0;if(this.virtualmode&&this.pageable&&this.groupable&&this.groups.length>0&&(s=this.dataview.pagesize*this.dataview.pagenum),this.groups.length>0&&this.pageable&&this.groupable){var l=this.getrowboundindexbyid(t.bounddata.uid);if(-1!=l){for(var a in this.selectedcells)a==l+"_"+i&&(r=!0);return r}return!1}if(e&&null!=t.bounddata)if("singlerow"!=this.selectionmode){if(this.dataview.filters.length>0)if(this.virtualmode||null==t.bounddata.dataindex)for(var a in this.selectedcells)a==s+t.bounddata.boundindex+"_"+i&&(r=!0);else for(var a in this.selectedcells)a==s+t.bounddata.dataindex+"_"+i&&(r=!0);else for(var a in this.selectedcells)if(a==s+t.bounddata.boundindex+"_"+i){r=!0;break}}else if(this.dataview.filters.length>0){if(this.virtualmode||null==t.bounddata.dataindex){for(var a in this.selectedcells)if(a==s+t.bounddata.boundindex+"_"+i){r=!0;break}}else for(var a in this.selectedcells)if(a==s+t.bounddata.dataindex+"_"+i){r=!0;break}}else for(var a in this.selectedcells)if(a==s+t.bounddata.boundindex==this.selectedrowindex){r=!0;break}return r},_isrowselected:function(e,t){var i=!1,r=0;if(this.virtualmode&&this.pageable&&this.groupable&&this.groups.length>0&&(r=this.dataview.pagesize*this.dataview.pagenum),this.groupable&&this.groups.length>0&&this.pageable){var s=this.getrowboundindexbyid(t.bounddata.uid);return null!=s&&-1!=s&&(-1!=this.selectedrowindexes.indexOf(s)&&(i=!0),i||(i=s==this.selectedrowindex&&-1!=this.selectedrowindex),i)}return e&&null!=t.bounddata&&("singlerow"!=this.selectionmode?this.dataview.filters.length>0?this.virtualmode||null==t.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)&&(i=!0):this.dataview.filters.length>0?this.virtualmode||null==t.bounddata.dataindex?-1!=this.selectedrowindexes.indexOf(r+t.bounddata.boundindex)&&(i=!0):-1!=this.selectedrowindexes.indexOf(r+t.bounddata.dataindex)&&(i=!0):r+t.bounddata.boundindex==this.selectedrowindex&&(i=!0)),i},_rendervisualcell:function(t,i,r,s,l,a,o,n,d,h,c,u){var g=this.columns.records[h];if(g.hidden||g.adaptivehidden){(m=n.cells[h]).innerHTML=""}else{var p=this._getcellvalue(g,d),m=n.cells[h],w=i;if(-1!=this.selectionmode.indexOf("cell")&&(r=this.dataview.filters.length>0?!!this.selectedcells[d.bounddata.dataindex+"_"+g.datafield]:!!this.selectedcells[d.boundindex+"_"+g.datafield],this.editcell&&this.editcell.row===d.boundindex&&this.editcell.column===g.datafield&&"checkbox"!==g.columntype&&(r=!1),(this.virtualmode||this.groupable&&this.groups.length>0&&this.pageable)&&(r=this._iscellselected(!0,d,g.datafield))),""!=g.cellclassname&&g.cellclassname)if("string"==typeof g.cellclassname)w+=" "+g.cellclassname;else{this._columnClassNameCache||(this._columnClassNameCache=[]);var f,v=this.getboundindex(d);if(void 0!==this._columnClassNameCache[v+"_"+g.datafield+"_"+p]&&this.enableoptimization)(f=this._columnClassNameCache[v+"_"+g.datafield+"_"+p])&&(w+=" "+f);else(f=g.cellclassname(v,g.datafield,p,d.bounddata))&&(w+=" "+f),this._columnClassNameCache[v+"_"+g.datafield+"_"+p]=f}var b=this.showsortcolumnbackground&&this.sortcolumn&&g.displayfield==this.sortcolumn;if("many"===this.sortmode&&this.showsortcolumnbackground)for(var x=this.getsortcolumns(),y=0;y<x.length;y++)g.displayfield===x[y].dataField&&(b=!0);if(b&&(w+=" "+this.toTP("jqx-grid-cell-sort")),g.filter&&this.showfiltercolumnbackground&&(w+=" "+this.toTP("jqx-grid-cell-filter")),d.bounddata.totalsrow&&(w+=" "+this.toTP("jqx-grid-cell-pinned")),(g.pinned&&this.showpinnedcolumnbackground||g.grouped)&&(a&&d.bounddata.totalsrow||(w+=" "+this.toTP("jqx-grid-cell-pinned"))),this.altrows&&null==d.group){var _=d.visibleindex;_>=this.altstart&&(this.altstart+_)%(1+this.altstep)==0&&(w+=b?" "+this.toTP("jqx-grid-cell-sort-alt"):" "+this.toTP("jqx-grid-cell-alt"),g.filter&&this.showfiltercolumnbackground&&(w+=" "+this.toTP("jqx-grid-cell-filter-alt")),g.pinned&&this.showpinnedcolumnbackground&&(w+=" "+this.toTP("jqx-grid-cell-pinned-alt")))}if(this.batcheditable)void 0!==d.bounddata["_temp"+g.datafield]&&(w+=" "+this.toTP("jqx-grid-cell-batch"));if(h<=o){if(a||this.rowdetails||this.pageable&&this.virtualmode){var q=e(m),j=this.columns.records[h].width;m.style.width!=parseInt(j)+"px"&&q.width(j)}}else if((a||this.rowdetails)&&this._hiddencolumns){q=e(m),j=this.columns.records[h].width;parseInt(m.style.width)!=j&&q.width(j)}var S=!0;if(this.rowdetails&&s&&(l&&!a?w+=" "+this.toTP("jqx-grid-details-cell"):a&&(w+=" "+this.toTP("jqx-grid-group-details-cell")),this.showrowdetailscolumn))if(this.rtl){if(null==d.group&&h==n.cells.length-o-1){z=this.toThemeProperty("jqx-icon-arrow-down");if(l)w+=" "+this.toTP("jqx-grid-group-expand-rtl"),w+=" "+z;else w+=" "+this.toTP("jqx-grid-group-collapse-rtl"),w+=" "+(z=this.toThemeProperty("jqx-icon-arrow-left"));return S=!1,m.title="",m.innerHTML="",void(m.className!=w&&(m.className=w))}}else if(null==d.group&&h==o&&!d.bounddata.totalsrow){var z=this.toThemeProperty("jqx-icon-arrow-down");if(l)w+=" "+this.toTP("jqx-grid-group-expand"),w+=" "+z;else w+=" "+this.toTP("jqx-grid-group-collapse"),w+=" "+(z=this.toThemeProperty("jqx-icon-arrow-right"));return S=!1,m.title="",m.innerHTML="",void(m.className!=w&&(m.className=w))}if(r&&S&&h>=o&&(w+=" "+this.toTP("jqx-grid-cell-selected"),w+=" "+this.toTP("jqx-fill-state-pressed")),m.className!=w&&(m.className=w),g._applyCellStyle(m),null!=d.group)return p="",m.title="",void(m.innerHTML="");t(this,g,d,p,m,u)}},_rendercell:function(t,i,r,s,l,a){var o=s+"_"+i.visibleindex;if("number"==i.columntype||null!=i.cellsrenderer)o=r.uniqueid+"_"+i.visibleindex;if("number"==i.columntype&&(s=r.visibleindex),"adaptive"===i.columntype&&(s="..."),i._applyCellStyle(l),t.showrowlines?l.style.borderBottomColor="":l.style.borderBottomColor="transparent",t.showcolumnheaderlines?(i.element.style.borderRightColor="",i.element.style.boxShadow=""):(i.element.style.borderRightColor="transparent",i.element.style.boxShadow="none"),t.showcolumnlines?l.style.borderRightColor="":l.style.borderRightColor="transparent",t.editcell&&null==t.editrow)if("selectedrow"==t.editmode&&i.editable&&t.editable){if(t.editcell.row==t.getboundindex(r)&&t._showcelleditor)return t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,i,l,!1,!1):t._showcelleditor(t.editcell.row,i,l,t.editcell.init),void(l.className+=" "+t.toTP("jqx-grid-cell-edit"))}else if(t.editcell.row==t.getboundindex(r)&&t.editcell.column==i.datafield&&(t.editcell.element=l,t.editcell.editing&&t._showcelleditor))return t.hScrollInstance.isScrolling()||t.vScrollInstance.isScrolling()?t._showcelleditor(t.editcell.row,i,t.editcell.element,t.editcell.init,!1):t._showcelleditor(t.editcell.row,i,t.editcell.element,t.editcell.init),void(l.className+=" "+t.toTP("jqx-grid-cell-edit"));var n=t._defaultcellsrenderer(s,i),d=t._cellscache[o];if(!d){if("checkbox"==i.columntype)return t._rendercheckboxcell(t,l,i,r,s),t._cellscache[o]={element:"",title:s},void(t.enabletooltips&&i.enabletooltips&&(l.title=""+s));if("button"==i.columntype)return null!=i.cellsrenderer&&(s=i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata)),t._renderbuttoncell(t,l,i,r,s),t._cellscache[o]={element:"",title:s},void(t.enabletooltips&&i.enabletooltips&&(l.title=""+s));if("progressbar"==i.columntype||"rating"===i.columntype)return null!=i.cellsrenderer&&(s=i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata)),t._renderprogresscell(t,l,i,r,s),t._cellscache[o]={element:"",title:s},void(t.enabletooltips&&i.enabletooltips&&(l.title=""+s));if("number"==i.columntype&&(s=r.visibleindex),i.createwidget)return null!=i.cellsrenderer&&(s=i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata)),t._renderwidgetcell(t,l,i,r,s),t._cellscache[o]={element:"",title:s},void(t.enabletooltips&&i.enabletooltips&&(l.title=s));m=null;if(null!=i.cellsrenderer){t._columnCellsRenderCache||(t._columnCellsRenderCache=[]);var h=t.getboundindex(r);if(void 0!==t._columnCellsRenderCache[h+"_"+i.datafield+"_"+s]&&t.enableoptimization?m=t._columnCellsRenderCache[h+"_"+i.datafield+"_"+s]:(m=i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata),t._columnCellsRenderCache[h+"_"+i.datafield+"_"+s]=m),m&&(m.indexOf("<jqx-")>=0||m.indexOf(" ng-")>=0))return void(t.toCompile&&t.toCompile.push({cell:l,value:m,row:t.getboundindex(r)}))}else m=n;null==m&&(m=n);var c=s;if(t.enabletooltips&&i.enabletooltips&&(""!=i.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(s)?c=e.jqx.dataFormat.formatdate(c,i.cellsformat,t.gridlocalization):e.jqx.dataFormat.isNumber(s)&&(c=e.jqx.dataFormat.formatnumber(c,i.cellsformat,t.gridlocalization))),l.title=c),t.WinJS)e(l).html(m);else{var u=l.innerHTML;if(u.indexOf("editor")>=0||null!=i.cellsrenderer||t.groupable||t.virtualmode)l.innerHTML=m;else if(u.length>0){w=m.indexOf(">"),f=m.indexOf("</"),v=m.substring(w+1,f),b=l.childNodes[0];if(v.indexOf(">")>=0)l.innerHTML=m;else if(b.childNodes[0])v!=b.childNodes[0].nodeValue&&(v.indexOf("&")>=0||u.indexOf("span")>=0||u.indexOf("img")>=0?l.innerHTML=m:b.childNodes[0].nodeValue=v);else{x=document.createTextNode(v);b.appendChild(x)}}else u!=m&&(l.innerHTML=m)}return t._cellscache[o]={element:l.innerHTML,title:c},!0}if("checkbox"==i.columntype){if(t.host.jqxCheckBox){""===s&&(s=null);var g=0==l.innerHTML.toString().length;if(!l.checkbox||t.groupable||g?t._rendercheckboxcell(t,l,i,r,s):(l.checkboxrow=t.getboundindex(r),""==s&&(s=!1),"1"==s&&(s=!0),"0"==s&&(s=!1),1==s&&(s=!0),0==s&&(s=!1),"true"==s&&(s=!0),"false"==s&&(s=!1),null!=s||i.threestatecheckbox||(s=!1),i.checkboxcolumn&&(s=!1,t.dataview.filters.length>0&&!t.virtualmode&&null!=r.bounddata.dataindex?-1!=t.selectedrowindexes.indexOf(r.bounddata.dataindex)&&(s=!0):-1!=t.selectedrowindexes.indexOf(r.bounddata.boundindex)&&(s=!0)),t.disabled||(l.checkboxinstance?l.checkboxinstance._setState(s):l.checkbox.jqxCheckBox("_setState",s))),null!=i.cellsrenderer){var p=i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata);null!=p&&(l.innerHTML=p)}return}}else if("button"==i.columntype){if(t.host.jqxButton)return""==s&&(s=!1),null!=i.cellsrenderer&&(s=i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata)),""==l.innerHTML&&(l.buttonrow=t.getboundindex(r),l.button=null,t._renderbuttoncell(t,l,i,r,s)),void(l.button&&!t.groupable?(l.buttonrow=t.getboundindex(r),l.button.val(s)):t._renderbuttoncell(t,l,i,r,s))}else if(("progressbar"==i.columntype||"rating"===i.columntype)&&t.host.jqxButton)return""==s&&(s=!1),null!=i.cellsrenderer&&(s=i.cellsrenderer(t.getboundindex(r),i.datafield,s,n,i.getcolumnproperties(),r.bounddata)),""==l.innerHTML&&(l.progressrow=t.getboundindex(r),l.progress=null,t._renderprogresscell(t,l,i,r,s)),l.progress&&!t.groupable?(l.progressrow=t.getboundindex(r),l.progress.val(s)):t._renderprogresscell(t,l,i,r,s),void(t.enabletooltips&&i.enabletooltips&&(l.title=""+s));if(i.createwidget)if(""==l.innerHTML&&(l.widgetrow=t.getboundindex(r),l.widget=null,i.widget=null,t._renderwidgetcell(t,l,i,r,s)),l.widget&&!t.groupable){if(l.widgetrow=t.getboundindex(r),!i.initwidget)throw new Error("jqxGrid: 'initwidget' column function is not implemented. Please, implement 'initwidget'");i.initwidget(t.getboundindex(r),i.datafield,s,l.firstChild)}else t._renderwidgetcell(t,l,i,r,s);else{var m=d.element;if(null!=i.cellsrenderer||l.childNodes&&0==l.childNodes.length||t.groupable||t.rowdetails)l.innerHTML!=m&&(l.innerHTML=m);else if(l.innerHTML.indexOf("editor")>=0)l.innerHTML=m;else if(a){var w=m.indexOf(">"),f=m.indexOf("</"),v=m.substring(w+1,f),b=l.childNodes[0];if(v.indexOf(">")>=0)l.innerHTML=m;else if(b.childNodes[0])"#text"!==b.childNodes[0].nodeName?l.innerHTML=m:v!=b.childNodes[0].nodeValue&&(v.indexOf("&")>=0?l.innerHTML=m:b.childNodes[0].nodeValue=v);else{var x=document.createTextNode(v);b.appendChild(x)}}else l.innerHTML!=m&&(l.innerHTML=m);t.enabletooltips&&i.enabletooltips&&(l.title=d.title)}},_isIE10:function(){if(null==this._browser){var t=e.jqx.utilities.getBrowser();if("msie"==t.browser&&parseInt(t.version)>9)this._browser=!0;else if(this._browser=!1,"msie"==t.browser){var i="Browser CodeName: "+navigator.appCodeName;i+="Browser Name: "+navigator.appName,i+="Browser Version: "+navigator.appVersion,i+="Platform: "+navigator.platform,-1!=(i+="User-agent header: "+navigator.userAgent).indexOf("Zune 4.7")&&(this._browser=!0)}}return this._browser},_renderinlinecell:function(t,i,r,s,l){e(i);i.innerHTML='<div style="position: absolute;"></div>'},_rendercheckboxcell:function(t,i,r,s,l){if(t.host.jqxCheckBox){var a=e(i);if(""===l&&(l=!!r.threestatecheckbox&&null),null!==l||r.threestatecheckbox||(l=!1),"1"==l&&(l=!0),"0"==l&&(l=!1),1==l&&(l=!0),0==l&&(l=!1),"true"==l&&(l=!0),"false"==l&&(l=!1),r.checkboxcolumn){l=!1;var o=this.getboundindex(s);-1!=this.selectedrowindexes.indexOf(o)&&(l=!0)}if(0==a.find(".jqx-checkbox").length)i.innerHTML='<div style="position: absolute; top: 50%; left: 50%; margin-top: -9px; margin-left: -12px;"></div>',e(i.firstChild).jqxCheckBox({disabled:t.disabled,_canFocus:!1,hasInput:!1,hasThreeStates:r.threestatecheckbox,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,locked:!0,theme:t.theme,checked:l}),this.enabletooltips&&r.enabletooltips&&(i.title=""+l),this.editable&&r.editable&&e(i.firstChild).jqxCheckBox({locked:!1}),r.checkboxcolumn&&e(i.firstChild).jqxCheckBox({locked:!1}),i.checkbox=e(i.firstChild),i.checkboxinstance=i.checkbox.data().jqxCheckBox.instance,i.checkboxrow=this.getboundindex(s),e.data(i.firstChild,"jqxCheckBox").instance.updated=function(s,l,a){if(t.disabled){l=a;for(var o=t.table[0].rows.length,n=t._getcolumnindex(r.datafield),d=0;d<o;d++){(c=t.table[0].rows[d].cells[n].firstChild)&&e(c).jqxCheckBox({disabled:t.disabled})}}if(r.editable&&!t.disabled){o=t.table[0].rows.length,n=t._getcolumnindex(r.datafield);if(void 0!==t.editrow&&void 0===t.editcell[r.datafield]&&(t.editcell[r.datafield]=a),r.cellbeginedit)if(0==r.cellbeginedit(i.checkboxrow,r.datafield,r.columntype,!l))return void t.setcellvalue(i.checkboxrow,r.datafield,!l,!0);if(r.cellvaluechanging){var h=r.cellvaluechanging(i.checkboxrow,r.datafield,r.columntype,a,l);null!=h&&(l=h)}if("selectedrow"!==t.editmode)for(d=0;d<o;d++){var c;(c=t.table[0].rows[d].cells[n].firstChild)&&e(c).jqxCheckBox("destroy")}if(t.editcell&&0==t.editcell.validated)t.setcellvalue(i.checkboxrow,r.datafield,!l,!0);else if("selectedrow"!==t.editmode||null==t.editcell){var u=t.getrowdata(i.checkboxrow);t._raiseEvent(17,{rowindex:i.checkboxrow,row:u,datafield:r.datafield,value:a,columntype:r.columntype}),t.pushToHistory=!0,t.setcellvalue(i.checkboxrow,r.datafield,l,!0),t.pushToHistory=!1,t._raiseEvent(18,{rowindex:i.checkboxrow,row:u,datafield:r.datafield,oldvalue:a,value:l,columntype:r.columntype})}else t.pushToHistory=!0,t.setcellvalue(i.checkboxrow,r.datafield,l,!1,!1),t.pushToHistory=!1;r.cellendedit&&r.cellendedit(i.checkboxrow,r.datafield,r.columntype,l)}else r.checkboxcolumn&&(t.editcell&&t.endcelledit(t.editcell.row,t.editcell.column,!1,!0),t.disabled||(l?t.selectrow(i.checkboxrow):t.unselectrow(i.checkboxrow),t.autosavestate&&t.savestate&&t.savestate()))};else i.checkboxrow=this.getboundindex(s),e(i.firstChild).jqxCheckBox("_setState",l,!(this.editable&&r.editable||r.checkboxcolumn))}},_renderwidgetcell:function(t,i,r,s,l){if(0==e(i).find(".jqx-grid-widget").length){i.innerHTML='<div class="jqx-grid-widget" style="opacity: 0.99; position: absolute; width: 100%; height:100%; top: 0%; left: 0%; padding: 0px;"></div>',r.createwidget(s,r.datafield,l,i.firstChild),e(i.firstChild).attr("hideFocus","true"),e(i.firstChild).children().addClass("jqx-grid-widget"),i.widget=e(i.firstChild),i.widgetrow=t.getboundindex(s),r.widget=e(i.firstChild)}else r.initwidget(t.getboundindex(s),r.datafield,l,i.firstChild),i.widgetrow=t.getboundindex(s),e(i.firstChild).val(l)},_renderprogresscell:function(t,i,r,s,l){var a=e(i);if("rating"===r.columntype){if(!t._linkadded){var o=document.createElement("link");o.rel="stylesheet",o.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css",document.head.appendChild(o),t._linkadded=!0}r.ratingmax||(r.ratingmax=5);for(var n="",d=0;d<r.ratingmax;d++)n+=l>=d+1?'<span style="color: rgba(255, 165, 0, 1);" class="fa fa-star checked"></span>':'<span style="color: rgba(255, 165, 0, .3);" class="fa fa-star"></span>';var h=r.cellsalign;return"right"===h&&(h="flex-end"),void(i.innerHTML='<div style="display: flex; width: 100%; height: 100%; justify-content: '+h+'; padding: 5px; box-sizing: border-box; font-size: 16px; align-items: center;">'+n+"</div>")}""==l&&(l=!1),0==a.find(".jqx-progress").length?(i.innerHTML='<progress class="jqx-progress" max="100" style="opacity: 0.99; position: absolute; top: 10%; left: 10%; width:80%; height:80%; padding: 0px;"/>',e(i.firstChild).val(l),i.progress=e(i.firstChild),i.progressrow=t.getboundindex(s)):(i.progressrow=t.getboundindex(s),e(i.firstChild).val(l))},_renderbuttoncell:function(t,i,r,s,l){if(t.host.jqxButton)if(""==l&&(l=!1),0==e(i).find(".jqx-button").length)if(i.innerHTML='<input type="button" style="opacity: 0.99; position: absolute; top: 0%; left: 0%; padding: 0px; margin-top: 2px; margin-left: 2px;"/>',e(i.firstChild).val(l),e(i.firstChild).attr("hideFocus","true"),e(i.firstChild).jqxButton({disabled:t.disabled,theme:t.theme,height:t.rowsheight-4,width:r.width-4}),i.button=e(i.firstChild),i.buttonrow=t.getboundindex(s),this.isTouchDevice()){var a=e.jqx.mobile.getTouchEventName("touchend");t.addHandler(e(i.firstChild),a,(function(e){r.buttonclick&&r.buttonclick(i.buttonrow,e)}))}else t.addHandler(e(i.firstChild),"click",(function(e){r.buttonclick&&r.buttonclick(i.buttonrow,e)}));else i.buttonrow=t.getboundindex(s),e(i.firstChild).val(l)},_clearvisualrow:function(t,i,r,s,l){var a=this.toTP("jqx-grid-cell");i&&(a=" "+this.toTP("jqx-grid-group-cell")),a+=" "+this.toTP("jqx-grid-cleared-cell");for(var o=this.table[0].rows,n=0;n<s+l;n++)if(o[r]){var d=o[r].cells[n];d.className!=a&&(d.className=a);var h=this.columns.records[n];if(this._horizontalvalue!=t&&!h.pinned&&1==this.oldhscroll){d.style.marginLeft=-t+"px"}var c=h.width;h.adaptivewidth&&(c=h.adaptivewidth),c<h.minwidth&&(c=h.minwidth),c>h.maxwidth&&(c=h.maxwidth),parseInt(d.style.width)!=c&&(e(d)[0].style.width="auto"!=c?c+"px":c),""!=d.title&&(d.title=""),""!=d.innerHTML&&(d.innerHTML="")}if(o[r]){var u=this.rowsheight;this.cardview&&(u=this.cardheight),parseInt(o[r].style.height)!=u&&(o[r].style.height=parseInt(u)+"px")}},_findgroupstate:function(e){var t=this._findgroup(e);return null!=t&&t.expanded},_findgroup:function(e){return this.expandedgroups[e]?this.expandedgroups[e]:null},_clearcaches:function(){this._columnsbydatafield=new Array,this._pagescache=new Array,this._pageviews=new Array,this._cellscache=new Array,this._columnClassNameCache=new Array,this._columnCellsRenderCache=new Array,this.heights=new Array,this.hiddens=new Array,this.hiddenboundrows=new Array,this.heightboundrows=new Array,this.detailboundrows=new Array,this.details=new Array,this.expandedgroups=new Array,this._rowdetailscache=new Array,this._rowdetailselementscache=new Array,e.jqx.dataFormat&&e.jqx.dataFormat.cleardatescache(),this.tableheight=null},_getColumnText:function(t){if(null==this._columnsbydatafield&&(this._columnsbydatafield=new Array),this._columnsbydatafield[t])return this._columnsbydatafield[t];var i=t,r=null;return e.each(this.columns.records,(function(){if(this.datafield==t||this.displayfield==t)return i=this.text,r=this,!1})),this._columnsbydatafield[t]={label:i,column:r},this._columnsbydatafield[t]},_getcolumnbydatafield:function(t){if(null==this.__columnsbydatafield&&(this.__columnsbydatafield=new Array),this.__columnsbydatafield[t])return this.__columnsbydatafield[t];var i=null;return e.each(this.columns.records,(function(){if(this.datafield==t||this.displayfield==t)return this.text,i=this,!1})),this.__columnsbydatafield[t]=i,this.__columnsbydatafield[t]},isscrollingvertically:function(){return this.vScrollBar.jqxScrollBar("isScrolling")},_renderrowdetails:function(t,i,r,s,l,a){if(null!=i){var o=e(i),n=this.rowdetails&&this.showrowdetailscolumn?(1+this.groups.length)*this.groupindentwidth:this.groups.length*this.groupindentwidth;if(this.groupable&&this.groups.length>0)for(var d=0;d<=l;d++){var h;(h=e(i.cells[d]))[0].innerHTML="",h[0].className="jqx-grid-details-cell"}if("none"==(h=e(i.cells[0]))[0].style.display){for(var c=i.cells[0],u=2;null!=c&&"none"==c.style.display&&u<10;)c=i.cells[0+u-1],u++;h=e(c)}if(this.rtl)for(var g=s;g<l;g++)i.cells[g].innerHTML="",i.cells[g].className="jqx-grid-details-cell";h.css("width","100%"),o.height(r.rowdetailsheight),h[0].className=t;var p=this.getboundindex(r),m=p+"_";if(this._rowdetailscache[m]){var w=this._rowdetailscache[m].html;if(this.initrowdetails){if(this._rowdetailscache[m].element){var f=this._rowdetailscache[m].element,v=h.coord(),b=this.gridcontent.coord(),x=parseInt(v.top)-parseInt(b.top),y=parseInt(v.left)-parseInt(b.left);this.rtl&&(y=0),e(f).css("top",x),e(f).css("left",y),e(f).css("display","block"),e(f).width(this.host.width()-n),this.layoutrowdetails&&this.layoutrowdetails(p,f,this.element,this.getrowdata(p))}}else h[0].innerHTML=w}else{h[0].innerHTML="",this.enablerowdetailsindent||(n=0);var _='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: '+n+'px;">'+r.rowdetails+"</div>";if(this.rtl)_='<div class="jqx-enableselect" role="rowgroup" style="border: none; overflow: hidden; width: 100%; height: 100%; margin-left: 0px; margin-right: '+n+'px;">'+r.rowdetails+"</div>";if(this._rowdetailscache[m]={id:i.id,html:_},this.initrowdetails){f=e(_)[0];e(this.gridcontent).prepend(e(f)),e(f).css("position","absolute"),e(f).width(this.host.width()-n),e(f).height(h.height());v=h.coord();e(f).css("z-index",1799),this.isTouchDevice()&&e(f).css("z-index",1999),e(f).addClass(this.toThemeProperty("jqx-widget-content"));v=h.coord(),b=this.gridcontent.coord(),x=parseInt(v.top)-parseInt(b.top),y=parseInt(v.left)-parseInt(b.left);e(f).css("top",x),e(f).css("left",y),this.content[0].scrollTop=0,this.content[0].scrollLeft=0;var q=e(e(f).children()[0]);""!=q[0].id&&(q[0].id=q[0].id+p),this.initrowdetails(p,f,this.element,this.getrowdata(p)),this._rowdetailscache[m].element=f,this._rowdetailselementscache[p]=f}else h[0].innerHTML=_}}},_defaultcellsrenderer:function(t,i){""!=i.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(t)?t=e.jqx.dataFormat.formatdate(t,i.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(t)&&(t=e.jqx.dataFormat.formatnumber(t,i.cellsformat,this.gridlocalization)));var r="8px";if(31!=this.rowsheight&&((r=this.rowsheight/2-this._cellheight/2)<0&&(r=4),r+="px"),this.enableellipsis){if("center"==i.cellsalign||"middle"==i.cellsalign)return'<div class="jqx-grid-cell-middle-align" style="margin-top: '+r+';">'+t+"</div>";if("left"==i.cellsalign)return'<div class="jqx-grid-cell-left-align" style="margin-top: '+r+';">'+t+"</div>";if("right"==i.cellsalign)return'<div class="jqx-grid-cell-right-align" style="margin-top: '+r+';">'+t+"</div>"}return"center"==i.cellsalign||"middle"==i.cellsalign?'<div style="text-align: center; margin-top: '+r+';">'+t+"</div>":'<span style="margin-left: 4px; margin-right: 2px; margin-top: '+r+"; float: "+i.cellsalign+';">'+t+"</span>"},getcelltext:function(t,i){if(null==t||null==i)return null;var r=this.getcellvalue(t,i),s=this.getcolumn(i);return s&&""!=s.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(r)?r=e.jqx.dataFormat.formatdate(r,s.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(r)&&(r=e.jqx.dataFormat.formatnumber(r,s.cellsformat,this.gridlocalization))),r},getcelltextbyid:function(t,i){if(null==t||null==i)return null;var r=this.getcellvaluebyid(t,i),s=this.getcolumn(i);return s&&""!=s.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(r)?r=e.jqx.dataFormat.formatdate(r,s.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(r)&&(r=e.jqx.dataFormat.formatnumber(r,s.cellsformat,this.gridlocalization))),r},_getcellvalue:function(e,t){var i,r=null;(r=t.bounddata[e.datafield],this.batcheditable)&&(void 0!==(i=t.bounddata["_temp"+e.datafield])&&(r=i));null!=e.displayfield&&(r=t.bounddata[e.displayfield],this.batcheditable&&void 0!==(i=t.bounddata["_temp"+e.displayfield])&&(r=i));return null==r&&(r=""),this.enableSanitize&&r&&"string"==typeof r?this.escape_HTML(r):r},getcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),r=e,s="";return isNaN(i)||(r=this.getrowdata(i)),null!=r&&(s=r[t]),this._getcellresult(s,e,t)},getrenderedcell:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),r=e,s="";return isNaN(i)||(r=this.getrenderedrowdata(i)),null!=r&&(s=r[t]),this._getcellresult(s,e,t)},_getcellresult:function(e,t,i){var r=this.getcolumn(i);if(null==r||null==r)return null;var s=r.getcolumnproperties(),l=s.hidden,a=s.width,o=s.pinned,n=s.cellsalign,d=s.cellsformat,h=this.getrowheight(t);return 0==h?null:{value:e,row:t,column:i,datafield:i,width:a,height:h,hidden:l,pinned:o,align:n,format:d}},setcellvaluebyid:function(e,t,i,r,s){var l=this.getrowboundindexbyid(e);return this.setcellvalue(l,t,i,r,s)},getcellvaluebyid:function(e,t){var i=this.getrowboundindexbyid(e);return this.getcellvalue(i,t)},setcellvalue:function(t,i,r,s,l){if(null==t||null==i)return!1;var a=parseInt(t);this._columnClassNameCache=[];var o=t;isNaN(a)||(o=this.getrowdata(a));var n=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(n=!0),this.virtualmode&&(this._pagescache=new Array),this.sortcache&&(this.sortcache={});var d="",h="";if(o[i]&&r&&e.jqx.dataFormat.isDate(o[i])&&e.jqx.dataFormat.isDate(r)&&o[i].toString()===r.toString())this._updating||0==s||this._renderrows(this.virtualsizeinfo);else{if(null==o||o[i]===r)return this._updating||0==s||this._renderrows(this.virtualsizeinfo),!1;if(null!==o[i]||""!==r){var c=this._getcolumnbydatafield(i),u="string";if(this.source||(this.source=new e.jqx.dataAdapter({})),y=this.source.datafields||(this.source._source?this.source._source.datafields:null)){var g="";e.each(y,(function(){if(this.name==c.displayfield)return this.type&&(g=this.type),!1})),g&&(u=g),h=o[c.displayfield]}if(d=o[i],this.pushToHistory&&(this._undoRedoIndex=-1,this._undoRedo.push({action:"setcellvalue",data:{oldvalue:d,value:r,datafield:i,row:t}})),!c.nullable||null!=r&&""!==r&&c.nullable&&void 0===r.label){if(e.jqx.dataFormat.isNumber(d)||"number"==u||"float"==u||"int"==u||"decimal"==u&&"date"!=u)this.gridlocalization&&","==this.gridlocalization.decimalseparator&&r&&r.indexOf&&r.indexOf(",")>=0&&(r=r.replace(",",".")),r=new Number(r),r=parseFloat(r),isNaN(r)&&(r=0);else if((e.jqx.dataFormat.isDate(d)||"date"==u)&&""!=r){var p=r;"Invalid Date"!=(p=new Date(p))&&null!=p?r=p:"Invalid Date"==p&&(r=p=e.jqx.dataFormat.parsedate(r,c.cellsformat))}if(o[i]===r)return void(this._updating||0==s||this._renderrows(this.virtualsizeinfo))}var m=this.source&&this.source._source.localdata&&"observableArray"===this.source._source.localdata.name;if(o[i]=r,m){var w=this.source._source.localdata;w._updating||(w._updating=!0,w[t][i]=r,w._updating=!1)}var f=this.getrenderedrowdata(a,!0);if(f){if(f[i]=r,this.batcheditable&&(o["_temp"+i]=r,f["_temp"+i]=r,o[i]=d,f[i]=d),null!=r&&null!=r.label&&(o[(c=this._getcolumnbydatafield(i)).displayfield]=r.label,f[c.displayfield]=r.label,o[i]=r.value,f[i]=r.value,m&&!w._updating&&(w._updating=!0,w[t][i]=r.value,w[t][c.displayfield]=r.label,w._updating=!1)),n&&null!=o.dataindex&&(o.dataindex,this.dataview.cachedrecords[o.dataindex][i]=r,null!=r&&null!=r.label&&(this.dataview.cachedrecords[o.dataindex][i]=r.value,this.dataview.cachedrecords[o.dataindex][c.displayfield]=r.label)),this.source&&this.source._knockoutdatasource&&!this._updateFromAdapter&&this.autokoupdates&&this.source._source._localdata){var v=a;n&&null!=o.dataindex&&(v=o.dataindex);var b=this.source._source._localdata()[v];this.source.suspendKO=!0;var x=b;if(x[i]&&x[i].subscribe)null!=r&&null!=r.label?(x[c.displayfield](r.label),x[i](r.value)):x[i](r);else{var y=this.source._source.datafields,_=null;if(y&&e.each(y,(function(){if(this.name==i)return _=this.map,!1})),null==_)null!=r&&null!=r.label?(x[i]=r.value,x[c.displayfield]=r.label):x[i]=r;else{var q=_.split(this.source.mapChar);if(q.length>0){for(var j=x,S=0;S<q.length-1;S++)j=j[q[S]];j[q[q.length-1]]=r}}this.source._source._localdata.replace(b,e.extend({},x))}this.source.suspendKO=!1}if(this.sortcolumn&&this.dataview.sortby&&!this._updating){var z=this.getsortinformation();if(this.sortcolumn==i&&"many"!==this.sortmode)this.dataview.clearsortdata(),this.dataview.sortby(z.sortcolumn,z.sortdirection.ascending);else if("many"===this.sortmode){var k=this.getsortcolumns();this.dataview.clearsortdata(),this.sortby(null);for(var C=0;C<k.length;C++)this.sortby(k[C].dataField,k[C].ascending)}}else this._updating||this.dataview.sortby&&this.dataview.sortcache[i]&&(this.dataview.sortcache[i]=null);if(this._cellscache=new Array,this._pagescache=new Array,this.source.updaterow&&(null==l||1==l)){var T=this.that;try{var I=this.getrowid(a);null==this.source.updaterow(I,o,(function(e){0==e&&(T.setcellvalue(t,i,d,!0,!1),d!=h&&T.setcellvalue(t,T.getcolumn(i).displayfield,h,!0,!1))}))&&!0}catch(e){return!1,T.setcellvalue(t,i,d,!0,!1),void(d!=h&&T.setcellvalue(t,T.getcolumn(i).displayfield,h,!0,!1))}}var B=this.vScrollInstance.value;if(this._updating&&1!=s&&(s=!1),1==s||null==s){T=this.that;var P=function(){T.pageable&&T.updatepagerdetails&&(T.updatepagerdetails(),(T.autoheight||T.autorowheight)&&T._updatepageviews())},H=this.groupable&&this.groups.length>0;n&&!H?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.refresh(),this.rendergridcontent(!0,!1),P(),this._renderrows(this.virtualsizeinfo)):this.sortcolumn&&!H?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.dataview.reloaddata(),this.rendergridcontent(!0,!1),P(),this._renderrows(this.virtualsizeinfo)):this.groupable&&this.groups.length>0?((this.autoheight||this.autorowheight)&&(this.prerenderrequired=!0),this.pageable&&-1!=this.groups.indexOf(i)?(this._pagescache=new Array,this._cellscache=new Array,this.dataview.refresh(),this._render(!0,!0,!1,!1)):(this._pagescache=new Array,this._cellscache=new Array,this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))):(this.dataview.updateview(),this._renderrows(this.virtualsizeinfo))}if(this.vScrollInstance.setPosition(B),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this.showfilterrow&&this.filterable&&this.filterrow){var M=this.getcolumn(i).filtertype;"list"!=M&&"checkedlist"!=M||this._updatelistfilters(!0)}return this._raiseEvent(19,{rowindex:t,datafield:i,newvalue:r,value:r,oldvalue:d}),!0}}}},getcellvalue:function(e,t){if(null==e||null==t)return null;var i=parseInt(e),r=e;return isNaN(i)||(r=this.getrowdata(i)),null!=r?r[t]:null},getrows:function(){var t=this.dataview.records.length;if(this.virtualmode){for(var i=new Array,r=0;r<this.dataview.records.length;r++){var s=this.dataview.records[r];s&&i.push(s)}void 0===this.dataview.records.length&&e.each(this.dataview.records,(function(){this&&i.push(this)}));var l=0;return this.pageable&&(l=this.dataview.pagenum*this.dataview.pagesize),i.length>this.source._source.totalrecords-l?i.slice(0,this.source._source.totalrecords-l):i}if(this.dataview.sortdata){for(i=new Array,r=0;r<t;r++){var a;a=e.extend({},this.dataview.sortdata[r].value),i[r]=a}return i}return this.dataview.records},getrowboundindexbyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t&&t.boundindex)return this.getboundindex(t);for(var i=this.getboundrows(),r=0;r<i.length;r++)if(i[r]&&i[r].uid==e)return r;return-1},getrowdatabyid:function(e){var t=this.dataview.recordsbyid["id"+e];if(t)return t;var i=this.getrowboundindexbyid(e);return this.getboundrows()[i]},getrowdata:function(e){return null==e&&(e=0),this.virtualmode?this.dataview.records[e]:this.getboundrows()[e]},getrenderedrowdata:function(e,t){if(null==e&&(e=0),this.virtualmode){var i=this.getrowvisibleindex(e);return r=this.dataview.loadedrecords[i]}if((i=this.getrowvisibleindex(e))>=0){if(this.groupable&&this.groups.length>0)var r=this.dataview.loadedrecords[i];else{r=this.dataview.loadedrecords[i];if(this.pageable&&(null==t||0==t))r=this.dataview.loadedrecords[this.dataview.pagesize*this.dataview.pagenum+e]}return r}return null},getboundrows:function(){return this.dataview.cachedrecords},getrowdisplayindex:function(e){for(var t=this.getdisplayrows(),i=0;i<t.length;i++)if(t[i])if(void 0!==t[i].dataindex){if(t[i].dataindex==e)return t[i].visibleindex}else if(t[i].boundindex==e)return t[i].visibleindex;return-1},getboundindex:function(e){var t=e.boundindex;return this.groupable&&this.groups.length>0&&this.pageable&&e.bounddata&&(t=this.getrowboundindexbyid(e.bounddata.uid)),this.dataview.filters.length>0&&(e.bounddata?void 0!==e.bounddata.dataindex&&(t=e.bounddata.dataindex):void 0!==e.dataindex&&(t=e.dataindex)),t},getrowboundindex:function(e){var t=this.getdisplayrows()[e];return t?void 0!==t.dataindex?t.dataindex:t.boundindex:-1},getdisplayrows:function(){return this.dataview.loadedrecords},getloadedrows:function(){return this.getdisplayrows()},getvisiblerowdata:function(e){var t=this.getvisiblerows();return t?t[e]:null},getloadedrowdata:function(e){var t=this.getloadedrows();return t?t[e]:null},getvisiblerows:function(){if(this.virtualmode)return this.dataview.loadedrecords;if(this.pageable){for(var e=[],t=0;t<this.dataview.pagesize;t++){if(null==(i=this.dataview.loadedrecords[t+this.dataview.pagesize*this.dataview.pagenum]))break;e.push(i)}return e}if(null!=this._startboundindex&&null!=this._endboundindex){for(e=[],t=this._startvisibleindex;t<=this._endvisibleindex;t++){var i;if(null==(i=this.dataview.loadedrecords[t]))break;e.push(i)}return e}return this.dataview.loadedrecords},getrowid:function(e){if(null==e&&(e=0),this.virtualmode){var t=this.getrowvisibleindex(e);if(i=this.dataview.loadedrecords[t])return i.uid}else{var i=null,r=this.dataview.filters.length>0;if(e>=0&&e<this.dataview.bounditems.length&&!r){if(this.groupable&&this.groups.length>0){t=this.getrowvisibleindex(e);var i=this.dataview.loadedrecords[t]}else t=this.getrowvisibleindex(e),i=this.dataview.loadedrecords[t];if(i)return i.uid}if(this.dataview.filters.length>0)return(i=this.getboundrows()[e])&&null!=i.uid?i.uid:null}return null},_updateGridData:function(e){var t=!1;this.filterable&&this._initfilterpanel&&this.dataview.filters.length&&(t=!0),t?(this.dataview.refresh(),"updaterow"==e?(this._render(!0,!0,!1,!1,!1),this.invalidate()):this.render()):this.sortcolumn||this.groupable&&this.groups.length>0?(this.dataview.reloaddata(),this.render()):("updaterow"===e&&(this.dataview.refresh(),this.virtualmode||this._render(!0,!0,!1,!1,!1)),this._cellscache=new Array,this._pagescache=new Array,this._renderrows(this.virtualsizeinfo)),this.showfilterrow&&this.filterable&&this.filterrow&&this._updatelistfilters(!0)},updaterow:function(t,i,r){if(null!=t&&null!=i){var s=this.that,l=!1;if(s._datachanged=!0,this._columnClassNameCache=[],this.pushToHistory){var a=this.getrowdatabyid(t);this._undoRedoIndex=-1,this._undoRedo.push({action:"updaterow",data:{id:t,rowdata:i,oldrowdata:a}})}var o=function(t,i,s){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var l=!1;e.isArray(i)?(e.each(i,(function(e,i){var r=""+this;l=t.dataview.updaterow(r,s[e],!1)})),t._cellscache=new Array,t._pagescache=new Array,t.dataview.refresh()):l=t.dataview.updaterow(i,s);var a=t.vScrollInstance.value;if(null!=r&&1!=r||null!=t._updating&&0!=t._updating||t._updateGridData("updaterow"),t.showaggregates&&t._updatecolumnsaggregates&&t._updatecolumnsaggregates(),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata){var o=t.dataview.recordsbyid["id"+i],n=t.dataview.records.indexOf(o),d=t.source._source._localdata()[n];t.source.suspendKO=!0,t.source._source._localdata.replace(d,e.extend({},o)),t.source.suspendKO=!1}if(t.source&&t.source._source.localdata&&"observableArray"===t.source._source.localdata.name&&!t.source._source.localdata._updating){t.source._source.localdata._updating=!0;var h=t.getrowboundindexbyid(i);t.source._source.localdata.set(h,s),t.source._source.localdata._updating=!1}return t.vScrollInstance.setPosition(a),l};if(this.source.updaterow){try{null==(l=this.source.updaterow(t,i,(function(e){1==e||null==e?o(s,t,i):l=!1})))&&(l=!0)}catch(e){l=!1}}else l=o(s,t,i);return l}return!1},deleterow:function(t,i){if(null!=t){this._datachanged=!0;var r=!1,s=this.that,l=this.getrowboundindexbyid(t),a=new Array;new Array;if(null!=l&&(this.selectedrowindexes.indexOf(l)>=0&&this.selectedrowindexes.splice(this.selectedrowindexes.indexOf(l),1),this.selectedrowindex==l&&(this.selectedrowindex=-1),!this.virtualmode)){if(s.selectionmode.indexOf("row")>=0)e.each(this.selectedrowindexes,(function(){var e=s.getrowid(this);a.push(e)})),this.selectedrowindexes=new Array,this.selectedrowindex=-1;else if(s.selectionmode.indexOf("cell")>=0)for(var o in s.selectedcells){var n=s.selectedcells[o],d=s.getrowid(n.rowindex);n.rowid=d}this._rendervisualrows()}var h=function(t,r){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var s=!1,o=t.vScrollInstance.value;if(e.isArray(r))e.each(r,(function(){s=t.dataview.deleterow(this,!1)})),t._cellscache=new Array,t._pagescache=new Array,t.dataview.refresh();else s=t.dataview.deleterow(r);if(!t.virtualmode)if(t.selectionmode.indexOf("row")>=0)e.each(a,(function(){var e=t.getrowboundindexbyid(this);-1!=e&&t.selectrow(e,!1)}));else{var n=new Array;for(var d in t.selectedcells){var h=t.selectedcells[d],c=h.rowid,u=t.getrowboundindexbyid(c);-1!=u&&(h.rowindex=u,n[u+"_"+h.datafield]=h)}t.selectedcells=n}if(null!=t._updating&&0!=t._updating||null!=i&&1!=i||setTimeout((function(){t._render(!0,!0,!1,!1),"visible"!=t.vScrollBar.css("visibility")&&(t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._renderrows(t.virtualsizeinfo)),t.vScrollInstance.setPosition(o)})),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.pop(),t.source.suspendKO=!1),t.source&&t.source._source.localdata&&"observableArray"===t.source._source.localdata.name&&(t.source._source.localdata._updating||(t.source._source.localdata._updating=!0,t.source._source.localdata.splice(l,1),t.source._source.localdata._updating=!1)),t.dataview.sortby&&"many"!==t.sortmode){var g=t.getsortinformation();g.sortcolumn&&(t.dataview.clearsortdata(),t.dataview.sortby(g.sortcolumn,g.sortdirection?g.sortdirection.ascending:null))}return t.vScrollInstance.setPosition(o),s};if(this.source.deleterow){try{this.source.deleterow(t,(function(e){1!=e&&null!=e||h(s,t)})),null==r&&(r=!0)}catch(e){r=!1}}else r=h(s,t);return r}return!1},addrow:function(t,i,r){if(null!=i){this._datachanged=!0,null==r&&(r="last");var s=!1,l=this.that;if(null==t){var a=this.dataview.filters&&this.dataview.filters.length>0?this.dataview.cachedrecords.length:this.dataview.totalrecords;if(e.isArray(i)){var o=new Array;e.each(i,(function(e,t){var r=l.dataview.getid(l.dataview.source.id,i[e],a+e);o.push(r)})),t=o}else for(t=this.dataview.getid(this.dataview.source.id,i,a);null!=this.dataview.recordsbyid["id"+t];)t++}var n=function(t,i,r,s){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);var l=t.vScrollInstance.value,a=!1;if(e.isArray(r)?(e.each(r,(function(e,r){null!=this.dataindex&&delete this.dataindex;var l=null;null!=i&&null!=i[e]&&(l=i[e]),a=t.dataview.addrow(l,this,s,!1)})),t._cellscache=new Array,t._pagescache=new Array,t.dataview.refresh()):(null!=r&&null!=r.dataindex&&delete r.dataindex,a=t.dataview.addrow(i,r,s)),null!=t._updating&&0!=t._updating||(t._render(!0,!0,!1,!1),t.invalidate()),t.source&&t.source._knockoutdatasource&&!t._updateFromAdapter&&t.autokoupdates&&t.source._source._localdata&&(t.source.suspendKO=!0,t.source._source._localdata.push(r),t.source.suspendKO=!1),t.source&&t.source._source.localdata&&"observableArray"===t.source._source.localdata.name&&!t.source._source.localdata._updating){t.source._source.localdata._updating=!0;var o=t.getrowboundindexbyid(i);t.source._source.localdata.set(o,r),t.source._source.localdata._updating=!1}return"deferred"!=t.scrollmode?t.vScrollInstance.setPosition(l):t.vScrollInstance.setPosition(0),a};if(this.source&&this.source.addrow){try{null==(s=this.source.addrow(t,i,r,(function(e,s){1!=e&&null!=e||(null!=s&&(t=s),n(l,t,i,r))})))&&(s=!0)}catch(e){s=!1}if(0==s)return!1}else n(this,t,i,r);return s}return!1},_findvisiblerow:function(e,t){null==e&&(e=parseInt(this.vScrollInstance.value));var i=0;null!=t&&null!=t||(t=this.rows.records);for(var r=t.length;i<=r;){var s=parseInt((i+r)/2),l=t[s];if(null==l)break;if(l.top>e&&l.top+l.height>e)r=s-1;else{if(!(l.top<e&&l.top+l.height<e))return s;i=s+1}}return-1},_updatecellwidths:function(){var e=this.virtualsizeinfo;if(e){var t=this.that;if(null!=t.gridcontent){null==t.table&&(t.table=t.gridcontent.find("#contenttable"+t.element.id));var i=t.groupable&&t.groups.length>0,r=0,s=e.visiblerecords;if(t.pageable&&(t.autoheight||t.autorowheight)&&(s=t.dataview.pagesize,t.groupable&&(t.dataview.updateview(),s=t.dataview.rows.length)),t.groupable||t.pageable||!t.autoheight&&!t.autorowheight||(s=t.dataview.totalrecords),t.rowdetails&&(s+=t.dataview.pagesize),t.columns.records){for(var l=t.columns.records.length,a=t.table[0].rows,o=0;o<s;o++){var n=a[o];if(!n)break;for(var d=n.cells,h=0,c=0;c<l;c++){var u=t.columns.records[c],g=u.width;u.adaptivewidth&&(g=u.adaptivewidth);var p=d[c];parseInt(p.style.left)!=h&&(p.style.left=h+"px"),parseInt(p.style.width)!=g&&(p.style.width=g+"px"),u.hidden&&u.hideable||u.adaptivehidden?p.style.display="none":(h+=parseFloat(g),t.adaptive&&(p.style.display=""))}0==r&&(t.table.width(parseFloat(h)+2),r=h)}t.showaggregates&&t._updateaggregates&&t._updateaggregates(),t.showfilterrow&&t.filterable&&t._updatefilterrowui&&t._updatefilterrowui(),t.showeverpresentrow&&t._updateaddnewrowui(),t._updatescrollbarsafterrowsprerender(),i&&t._renderrows(t.virtualsizeinfo)}}}},_updatescrollbarsafterrowsprerender:function(){var e=this.that,t=e.hScrollBar[0].style.visibility,i=0,r=e.vScrollBar[0].style.visibility;"visible"==r&&(i=e.scrollbarsize+3),0==e.scrollbarsize&&(i=0),e.scrollbarautoshow&&(i=0);var s=e.element.style.width;if(s=s.toString().indexOf("%")>=0?e.host.width():parseInt(s),parseInt(e.table[0].style.width)-2>s-i){if("visible"!=t&&(e.autowidth||(e.hScrollBar[0].style.visibility="visible"),e._arrange()),"visible"==r){if("deferred"==e.scrollmode||e.virtualmode)e._updatevscrollbarmax();else if(e.virtualsizeinfo){var l=e.virtualsizeinfo.virtualheight-e._gettableheight();!isNaN(l)&&l>0&&("hidden"!=t?e.vScrollBar.jqxScrollBar("max",l+e.scrollbarsize+4):e.vScrollBar.jqxScrollBar("max",l))}}else i=-2;e.hScrollBar.jqxScrollBar("max",i+e.table.width()-e.host.width())}else"hidden"!=t&&(e.hScrollBar.css("visibility","hidden"),e._arrange());e._renderhorizontalscroll()},_hascolumnstyle:function(){if(void 0!==this._hascolumnstyles)return this._hascolumnstyles;this._hascolumnstyles=!1;for(var e=0;e<this.columns.records.length;e++){var t=this.columns.records[e];if(t.style.headerBackgroundColor||t.style.headerColor||t.style.headerBackgroundHoveredColor||t.style.headerHoveredColor||t.style.headerBackgroundSelectedColor||t.style.headerSelectedColor||t.style.backgroundColor||t.style.color||t.style.backgroundHoveredColor||t.style.hoveredColor||t.style.backgroundSelectedColor||t.style.selectedColor)return this._hascolumnstyles=!0,!0}return!1},_prerenderrows:function(t){var i=this.that;if(1==i.prerenderrequired){if(i.prerenderrequired=!1,i.editable&&i._destroyeditors&&i._destroyeditors(),null==i.gridcontent)return;i.gridcontent.find("#contenttable"+i.element.id).remove(),null!=i.table&&(i.table.remove(),i.table=null),i.table=e('<div id="contenttable'+i.element.id+'" style="overflow: hidden; position: relative;"></div>'),i.gridcontent.addClass(i.toTP("jqx-grid-content")),i.gridcontent.addClass(i.toTP("jqx-widget-content")),i.gridcontent.append(i.table);var r=i.groupable&&i.groups.length>0,s=0;i.table[0].rows=new Array;var l=i.toTP("jqx-grid-cell");r&&(l=" "+i.toTP("jqx-grid-group-cell"));var a=t.visiblerecords;if(i.pageable&&(i.autoheight||i.autorowheight)&&(a=i.dataview.pagesize,i.groupable&&(i.dataview.updateview(),(a=i.dataview.rows.length)<i.dataview.pagesize&&(a=i.dataview.pagesize))),i.pageable||!i.autoheight&&!i.autorowheight||(a=i.dataview.totalrecords),i.groupable&&i.groups.length>0&&(i.autoheight||i.autorowheight)&&!i.pageable&&(a=i.dataview.rows.length),i.rowdetails&&(i.autoheight||i.autorowheight?a+=i.dataview.pagesize:a+=a),!i.columns.records)return;var o=i.columns.records.length;e.jqx.browser.msie&&e.jqx.browser.version>8&&i.table.css("opacity","0.99"),e.jqx.browser.mozilla,-1!=navigator.userAgent.indexOf("Safari")&&i.table.css("opacity","0.99");var n=e.jqx.browser.msie&&e.jqx.browser.version<8;n&&i.host.attr("hideFocus","true");var d=i.tableZIndex;a*o>d&&(d=a*o);i.dataview.records.length,i.isTouchDevice();var h="";i._hiddencolumns=!1;for(var c=5+i.columns.records.length,u=0;u<a;u++){var g='<div role="row" style="position: relative; height:'+i.rowsheight+'px;" id="row'+u+i.element.id+'">';if(n){g='<div role="row" style="position: relative; z-index: '+d+"; height:"+i.rowsheight+'px;" id="row'+u+i.element.id+'">';d--}for(var p=0,m=0;m<o;m++){if((y=(x=i.columns.records[m]).width)<x.minwidth&&(y=x.minwidth),y>x.maxwidth&&(y=x.maxwidth),i.rtl){var w='<div columnindex="'+m+'" role="gridcell" style="left: '+p+"px; z-index: "+(d-o+2*m)+"; width:"+y+"px;";d--}else w='<div columnindex="'+m+'" role="gridcell" style="left: '+p+"px; z-index: "+d--+"; width:"+y+"px;";x.hidden&&x.hideable||x.adaptivehidden?(w+="display: none;",i._hiddencolumns=!0,d++):p+=y,0===u&&0===m&&(w+='" tabindex="'+c+'"'),w+='" class="'+l+'">',w+=this._defaultcellsrenderer("",x),g+=w+="</div>"}0==s&&(i.table.width(parseInt(p)+2),s=p),h+=g+="</div>"}i.WinJS?MSApp.execUnsafeLocalFunction((function(){i.table.html(h)})):i.table[0].innerHTML=h,i.table[0].rows=new Array;var f=i.table.children();for(u=0;u<a;u++){var v=f[u];i.table[0].rows.push(v),v.cells=new Array;var b=e(v).children();for(m=0;m<o;m++)v.cells.push(b[m])}if(0==a){p=0;if(i.showemptyrow){g=e('<div style="position: relative;" id="row0'+i.element.id+'"></div>');i.table.append(g),g.height(i.rowsheight),i.table[0].rows[0]=g[0],i.table[0].rows[0].cells=new Array}for(m=0;m<o;m++){var x,y=(x=i.columns.records[m]).width;if(i.showemptyrow)(w=e('<div style="position: absolute; height: 100%; left: '+p+"px; z-index: "+d--+"; width:"+y+'px;" class="'+l+'"></div>')).height(i.rowsheight),g.append(w),i.table[0].rows[0].cells[m]=w[0];y<x.minwidth&&(y=x.minwidth),y>x.maxwidth&&(y=x.maxwidth),x.hidden&&x.hideable||x.adaptivehidden||(p+=y)}i.table.width(parseInt(p)+2),s=p}i._updatescrollbarsafterrowsprerender(),i.rendered&&i.rendered("rows"),i.toCompile=new Array,i._addoverlayelement()}},_groupsheader:function(){return this.groupable&&this.showgroupsheader},_arrange:function(){var e=null,t=null;this.tableheight=null;var i=this.that,r=!1,s=!1;if(null!=i.width&&-1!=i.width.toString().indexOf("px")?e=i.width:null==i.width||isNaN(i.width)||(e=i.width),null!=i.width&&-1!=i.width.toString().indexOf("%")&&(e=i.width,r=!0),i.scrollbarautoshow&&(i.vScrollBar[0].style.display="none",i.hScrollBar[0].style.display="none",i.vScrollBar[0].style.zIndex=i.tableZIndex+i.headerZIndex,i.hScrollBar[0].style.zIndex=i.tableZIndex+i.headerZIndex),i.autowidth){for(var l=0,a=0;a<i.columns.records.length;a++){var o=i.columns.records[a].width;l+="auto"==o?o=i._measureElementWidth(i.columns.records[a].text):o}"hidden"!=i.vScrollBar.css("visibility")&&(l+=i.scrollbarsize+4),e=l,i.width=e}null!=i.height&&-1!=i.height.toString().indexOf("px")?t=i.height:null==i.height||isNaN(i.height)||(t=i.height),null!=i.height&&-1!=i.height.toString().indexOf("%")&&(t=i.height,s=!0);var n=function(){var e=0;return e+=i.showheader&&null!=i.columnsheader?i.columnsheader.height()+2:0,i.pageable&&(e+=i.pagerheight),i._groupsheader()&&(e+=i.groupsheaderheight),i.showtoolbar&&(e+=i.toolbarheight),i.showfilterbar&&(e+=i.toolbarheight),i.showstatusbar&&(e+=i.statusbarheight),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(e+=i.everpresentrowheight),"visible"==i.hScrollBar[0].style.visibility&&(e+=15),e};if(i.autoheight&&i.virtualsizeinfo)if(i.pageable&&i.gotopage){t=(d=0)+(i._pageviews[0]?i._pageviews[0].height:0),t+=n(),i.showemptyrow&&0==i.dataview.totalrecords&&(t+=i.rowsheight)}else{var d=i.host.height()-i._gettableheight();i._pageviews.length>0?(t=d+i._pageviews[i._pageviews.length-1].height+i._pageviews[i._pageviews.length-1].top,i.vScrollBar[0].style.visibility="hidden"):(t=n(),i.showemptyrow&&(t+=i.rowsheight))}else i.autoheight&&(t=i.dataview.totalrecords*i.rowsheight,i.pageable&&i.gotopage&&(t=i.pagesize*i.rowsheight),i._loading&&(t=250,i.dataloadelement.height(t)),(t+=n())>1e4&&(t=1e4));null!=e?(e=parseInt(e),r?i.element.style.width=i.width:i.element.style.width!=parseInt(i.width)+"px"&&(i.element.style.width=parseInt(i.width)+"px"),r&&((e=i.host.width())<=2&&(e=600,i.host.width(e)),i._oldWidth||(i._oldWidth=e))):i.host.width(250),null!=t?(this.autoheight&&(t+=2),s||(t=parseInt(t)),s?i.element.style.height=i.height:i.element.style.height!=parseInt(t)+"px"&&(i.element.style.height=parseInt(t)+"px"),s&&!i.autoheight&&(0==(t=i.host.height())&&(t=400,i.host.height(t)),i._oldHeight||(i._oldHeight=t))):i.host.height(250),i.autoheight&&(i.tableheight=null,i._gettableheight());var h=0;if(i.showtoolbar?(i.toolbar.width(e),i.toolbar.height(i.toolbarheight-1),i.toolbar.css("top",0),h+=i.toolbarheight,t-=parseInt(i.toolbarheight)):i.toolbar[0].style.height="0px",i.showfilterbar?(i.filterbar.width(e),i.filterbar.height(i.toolbarheight-1),i.filterbar.css("top",h),h+=i.toolbarheight,t-=parseInt(i.toolbarheight)):i.filterbar[0].style.height="0px",i.showstatusbar?(i.showaggregates?i.statusbar.width(i.table?Math.max(e,i.table.width()):e):i.statusbar.width(e),i.statusbar.height(i.statusbarheight)):i.statusbar[0].style.height="0px",i.showeverpresentrow&&"bottom"===i.everpresentrowposition?(i.addnewrow.width(e),i.addnewrow.height(i.everpresentrowheight)):i.addnewrow[0].style.height="0px",i._groupsheader()){i.groupsheader.width(e),i.groupsheader.height(i.groupsheaderheight),i.groupsheader.css("top",h),h+=c=i.groupsheader.height()+1,t>c&&(t-=parseInt(c))}else{i.groupsheader[0].style.width!=e+"px"&&(i.groupsheader[0].style.width=parseInt(e)+"px"),i.groupsheader[0].style.height="0px",i.groupsheader[0].style.top!=h+"px"&&i.groupsheader.css("top",h);var c,u=h+(c=i.showgroupsheader&&i.groupable?i.groupsheaderheight:0)+"px";i.content[0].style.top!=u&&i.content.css("top",h+i.groupsheaderheight)}var g=i.scrollbarsize;isNaN(g)&&(g=parseInt(g),isNaN(g)?g="17px":g+="px"),g=parseInt(g);var p=2,m=0;"visible"==i.vScrollBar[0].style.visibility&&(m=g+4),"visible"==i.hScrollBar[0].style.visibility&&(p=g+4+2),0==g&&(m=0,p=0);var w=0;i.pageable&&(w=i.pagerheight,p+=i.pagerheight),i.showstatusbar&&(p+=i.statusbarheight,w+=i.statusbarheight),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(p+=i.everpresentrowheight,w+=i.everpresentrowheight),i.hScrollBar[0].style.height!=g+"px"&&(i.hScrollBar[0].style.height=parseInt(g)+"px"),i.hScrollBar[0].style.top==h+t-4-g-w+"px"&&"0px"==i.hScrollBar[0].style.left||i.hScrollBar.css({top:h+t-4-g-w+"px",left:"0px"});var f=i.hScrollBar[0].style.width,v=!1,b=!1;0==m?f!=e-2+"px"&&(i.hScrollBar.width(e-2),v=!0):f!=e-g-4+"px"&&(i.hScrollBar.width(e-g-4+"px"),v=!0),i.autoheight||(i.vScrollBar[0].style.width!=g+"px"&&(i.vScrollBar.width(g),b=!0),i.vScrollBar[0].style.height!=parseInt(t)-p+"px"&&(i.vScrollBar.height(parseInt(t)-p+"px"),b=!0),i.vScrollBar[0].style.left==parseInt(e)-parseInt(g)-4+"px"&&i.vScrollBar[0].style.top==h+"px"||i.vScrollBar.css({left:parseInt(e)-parseInt(g)-4+"px",top:h})),i.rtl&&(i.vScrollBar.css({left:"0px",top:h}),"hidden"!=i.vScrollBar.css("visibility")&&i.hScrollBar.css({left:g+2}));var x=i.vScrollInstance;x.disabled=i.disabled,i.autoheight||b&&x.refresh();var y=i.hScrollInstance;y.disabled=i.disabled,v&&y.refresh(),i.autowidth&&(i.hScrollBar[0].style.visibility="hidden"),i.statusbarheight=parseInt(i.statusbarheight),i.toolbarheight=parseInt(i.toolbarheight);var _=function(e){if("visible"==e.vScrollBar[0].style.visibility&&"visible"==e.hScrollBar[0].style.visibility){e.bottomRight[0].style.visibility="visible",e.bottomRight.css({left:1+parseInt(e.vScrollBar.css("left")),top:parseInt(e.hScrollBar.css("top"))}),e.rtl&&e.bottomRight.css("left","0px"),e.bottomRight.width(parseInt(g)+3),e.bottomRight.height(parseInt(g)+4);var t=e.showeverpresentrow&&"bottom"==e.everpresentrowposition?e.everpresentrowheight:0;t>0&&!e.showaggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(g)+4+t),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-t})),e.showaggregates&&(e.bottomRight.css("z-index",99),e.bottomRight.height(parseInt(g)+4+e.statusbarheight+t),e.bottomRight.css({top:parseInt(e.hScrollBar.css("top"))-e.statusbarheight-t}))}else e.bottomRight[0].style.visibility="hidden"};if(_(this),i.content[0].style.width!=e-m+"px"&&i.content.width(e-m),i.content[0].style.height!=t-p+3+"px"&&i.content.height(t-p+3),i.scrollbarautoshow&&(i.content[0].style.width!=e+"px"&&i.content.width(e),i.content[0].style.height!=t+"px"&&i.content.height(t)),i.content[0].style.top!=h+"px"&&i.content.css("top",h),i.rtl&&(i.content.css("left",m),i.scrollbarautoshow&&i.content.css("left","0px"),i.table)){var q=i.table.width();q<e-m&&i.content.css("left",e-q)}if(i.showstatusbar&&(i.statusbar.css("top",h+t-i.statusbarheight-(i.pageable?i.pagerheight:0)),i.autoheight&&(i.statusbar.css("top",h+t-2-i.statusbarheight-(i.pageable?i.pagerheight:0)),i.statusbar.height(i.statusbarheight+2)),i.showaggregates&&("visible"==i.hScrollBar.css("visibility")&&(i.hScrollBar.css({top:h+t-4-g-w+i.statusbarheight+"px"}),i.statusbar.css("top",1+h+t-g-5-i.statusbarheight-(i.pageable?i.pagerheight:0))),_(this)),i.rtl&&("visible"!=i.hScrollBar.css("visibility")?i.statusbar.css("left",i.content.css("left")):i.statusbar.css("left","0px"))),i.showeverpresentrow&&"bottom"===i.everpresentrowposition&&(i.addnewrow.css("top",h+t-(i.showstatusbar?i.statusbarheight:0)-(i.pageable?i.pagerheight:0)-i.everpresentrowheight),i.rtl&&("visible"!=i.hScrollBar.css("visibility")?i.addnewrow.css("left",i.content.css("left")):i.addnewrow.css("left","0px"))),i.pageable?(i.pager.width(e),i.pager.height(i.pagerheight),i.pager.css("top",h+t-i.pagerheight-1)):i.pager[0].style.height="0px",null!=i.table){var j=-2;if("visible"==i.vScrollBar[0].style.visibility&&(j=i.scrollbarsize+3),"visible"==i.hScrollBar[0].style.visibility){var S=j+i.table.width()-i.host.width();S>=0&&i.hScrollBar.jqxScrollBar("max",S),"visible"==i.hScrollBar[0].style.visibility&&0==S&&(i.hScrollBar[0].style.visibility="hidden",i._arrange())}}e!=parseInt(i.dataloadelement[0].style.width)&&(i.dataloadelement[0].style.width=i.element.style.width),t!=parseInt(i.dataloadelement[0].style.height)&&(i.dataloadelement[0].style.height=i.element.style.height),this.pagergotoinput&&(this.pagergotoinput.offset().top!==this.pagergoto.offset().top?(this.pagergotoinput.css("visibility","hidden"),this.pagergoto.css("visibility","hidden")):(this.pagergotoinput.css("visibility","inherit"),this.pagergoto.css("visibility","inherit"))),i._hostwidth=e},destroy:function(){if(delete e.jqx.dataFormat.datescache,delete this.gridlocalization,delete this._undoRedo,e.jqx.utilities.resize(this.host,null,!0),(""!=document.referrer||window.frameElement)&&null!=window.top&&window.top!=window.self&&this.removeHandler(e(window.top.document),"mouseup.grid"+this.element.id),this.table&&this.table[0]){for(var t=this.table[0].rows.length,i=0;i<t;i++){for(var r=this.table[0].rows[i],s=r.cells.length,l=0;l<s;l++)e(r.cells[l]).remove(),r.cells[l]=null,delete r.cells[l];r.cells=null,r.cells&&delete r.cells,e(this.table[0].rows[i]).remove(),this.table[0].rows[i]=null}try{delete this.table[0].rows}catch(e){}this.table.remove(),delete this.table}if(this.columns&&this.columns.records){for(i=0;i<this.columns.records.length;i++){var a=this.columns.records[i];a.addnewrowwidget&&a.destroyeverpresentrowwidget&&a.destroyeverpresentrowwidget(a.addnewrowwidget),a.destroywidget&&a.destroywidget&&a.destroywidget(a.widget),this._removecolumnhandlers(this.columns.records[i]),a.element&&(e(a.element).remove(),e(a.sortasc).remove(),e(a.sortdesc).remove(),e(a.filtericon).remove(),e(a.menu).remove(),a.element=null,a.uielement=null,a.sortasc=null,a.sortdesc=null,a.filtericon=null,a.menu=null,delete a.element,delete a.uielement,delete a.sortasc,delete a.sortdesc,delete a.filtericon,delete a.menu,delete this.columnsrow[0].cells[i])}try{delete this.columnsrow[0].cells}catch(e){}delete this.columnsrow}if(e.removeData(document.body,"contextmenu"+this.element.id),this.host.jqxDropDownList&&this._destroyfilterpanel&&this._destroyfilterpanel(),this.editable&&this._destroyeditors&&this._destroyeditors(),this.filterable&&this._destroyedfilters&&this.showfilterrow&&this._destroyedfilters(),this.host.jqxMenu&&this.gridmenu&&(this.removeHandler(e(document),"click.menu"+this.element.id),this.removeHandler(this.gridmenu,"keydown"),this.removeHandler(this.gridmenu,"closed"),this.removeHandler(this.gridmenu,"itemclick"),this.gridmenu.jqxMenu("destroy"),this.gridmenu=null),this.pagershowrowscombo&&(this.pagershowrowscombo.jqxDropDownList("destroy"),this.pagershowrowscombo=null),this.pagerrightbutton&&(this.removeHandler(this.pagerrightbutton,"mousedown"),this.removeHandler(this.pagerrightbutton,"mouseup"),this.removeHandler(this.pagerrightbutton,"click"),this.pagerrightbutton.jqxButton("destroy"),this.pagerrightbutton=null),this.pagerleftbutton&&(this.removeHandler(this.pagerleftbutton,"mousedown"),this.removeHandler(this.pagerleftbutton,"mouseup"),this.removeHandler(this.pagerleftbutton,"click"),this.pagerleftbutton.jqxButton("destroy"),this.removeHandler(e(document),"mouseup.pagerbuttons"+this.element.id),this.pagerleftbutton=null),this.removeHandler(e(document),"selectstart."+this.element.id),this.removeHandler(e(document),"mousedown.resize"+this.element.id),this.removeHandler(e(document),"mouseup.resize"+this.element.id),this.removeHandler(e(document),"mousemove.resize"+this.element.id),this.isTouchDevice()){var o=e.jqx.mobile.getTouchEventName("touchmove")+".resize"+this.element.id,n=e.jqx.mobile.getTouchEventName("touchstart")+".resize"+this.element.id,d=e.jqx.mobile.getTouchEventName("touchend")+".resize"+this.element.id;this.removeHandler(e(document),o),this.removeHandler(e(document),n),this.removeHandler(e(document),d)}if(this.removeHandler(e(document),"mousedown.reorder"+this.element.id),this.removeHandler(e(document),"mouseup.reorder"+this.element.id),this.removeHandler(e(document),"mousemove.reorder"+this.element.id),this.isTouchDevice()){o=e.jqx.mobile.getTouchEventName("touchmove")+".reorder"+this.element.id,n=e.jqx.mobile.getTouchEventName("touchstart")+".reorder"+this.element.id,d=e.jqx.mobile.getTouchEventName("touchend")+".reorder"+this.element.id;this.removeHandler(e(document),o),this.removeHandler(e(document),n),this.removeHandler(e(document),d)}if(this.removeHandler(e(window),"resize."+this.element.id),this.resizeline&&this.resizeline.remove(),this.resizestartline&&this.resizestartline.remove(),this.groupable){o="mousemove.grouping"+this.element.id,n="mousedown.grouping"+this.element.id,d="mouseup.grouping"+this.element.id;this.removeHandler(e(document),o),this.removeHandler(e(document),n),this.removeHandler(e(document),d)}if(this.columnsreorder){o="mousemove.reorder"+this.element.id,n="mousedown.reorder"+this.element.id,d="mouseup.reorder"+this.element.id;this.removeHandler(e(document),o),this.removeHandler(e(document),n),this.removeHandler(e(document),d),delete this.columnsbounds}if(this.content&&(this.removeHandler(this.content,"mousedown"),this.removeHandler(this.content,"scroll")),this._removeHandlers(),this.hScrollInstance.destroy(),this.vScrollInstance.destroy(),this.hScrollBar.remove(),this.vScrollBar.remove(),this._clearcaches(),delete this.hScrollInstance,delete this.vScrollInstance,delete this.visiblerows,delete this.hittestinfo,delete this.rows,delete this.columns,delete this.columnsbydatafield,delete this.pagescache,delete this.pageviews,delete this.cellscache,delete this.heights,delete this.hiddens,delete this.hiddenboundrows,delete this.heightboundrows,delete this.detailboundrows,delete this.details,delete this.expandedgroups,delete this._rowdetailscache,delete this._rowdetailselementscache,delete this.columnsmenu,this.columnsheader&&(this.columnsheader.remove(),delete this.columnsheader),this.selectionarea&&(this.selectionarea.remove(),delete this.selectionarea),this.menuitemsarray&&this.menuitemsarray.length){var h=this.menuitemsarray.length;for(i=0;i<h;i++)e(this.menuitemsarray[i]).remove()}delete this.menuitemsarray,this.dataview._clearcaches(),this.content.removeClass(),this.content.remove(),this.content=null,delete this.content,this.vScrollBar=null,this.hScrollBar=null,delete this.hScrollBar,delete this.hScrollBar,this.gridcontent&&(this.gridcontent.remove(),delete this.gridcontent),this.gridmenu&&(this.gridmenu=null,delete this.gridmenu),delete this._mousemovefunc,delete this._mousewheelfunc,this.dataview.destroy(),delete this.dataview,this.bottomRight.remove(),delete this.bottomRight,this.wrapper.remove(),delete this.wrapper,this.pagerdiv&&(this.pagerdiv.remove(),delete this.pagerdiv),this.pagerpageinput&&(this.pagerpageinput.remove(),delete this.pagerpageinput),this.pagergoto&&(this.pagergoto.remove(),delete this.pagergoto),this.pagershowrows&&(this.pagershowrows.remove(),delete this.pagershowrows),this.pagerfirstbutton&&(this.pagerfirstbutton.remove(),delete this.pagerfirstbutton),this.pagerlastbutton&&(this.pagerlastbutton.remove(),delete this.pagerlastbutton),this.pagerbuttons&&(this.pagerbuttons.remove(),delete this.pagerbuttons),this.pagerdetails&&(this.pagerdetails.remove(),delete this.pagerdetails),this.pagergotoinput&&(this.pagergotoinput.remove(),delete this.pagergotoinput),this.pager.remove(),delete this.pager,this.groupsheader.remove(),delete this.groupsheader,this.dataloadelement.remove(),delete this.dataloadelement,this.toolbar.remove(),delete this.toolbar,this.statusbar.remove(),delete this.statusbar,this.host.removeData(),this.host.removeClass(),this.host.remove(),this.host=null,delete this.host,delete this.element,delete this.set,delete this.get,delete this.that,delete this.call},_initializeColumns:function(){var i=this.source?this.source.datafields:null;null==i&&this.source&&this.source._source&&(i=this.source._source.datafields);var r=!!i&&i.length>0;if(this.autogeneratecolumns){var s=new Array;if(i)e.each(i,(function(){var e={datafield:this.name,text:this.text||this.name,cellsformat:this.format||""};s.push(e)}));else if(this.source.records.length>0){var l=this.source.records[0];for(var a in l)if("uid"!=a){var o={width:100,datafield:a,text:a};s.push(o)}}this.columns=s}if(this.columns&&this.columns.records)for(var n=0;n<this.columns.records.length;n++)this._removecolumnhandlers(this.columns.records[n]);var d=this.that,h=new e.jqx.collection(this.element),c=0;(this._haspinned=!1,this._columns?this.columns=this._columns:this._columns=this.columns,this.commandcolumn&&this.columns.push({text:"",visible:this.editable,width:120,filterable:!1,sortable:!1,editable:!1,resizable:!1,draggable:!1,cellsrenderer:function(e,t){if(d.commandcolumnrenderer){var i=d.commandcolumnrenderer(e,t,d._commandColumnEdit&&d._commandColumnEdit.boundindex===e);if(void 0!==i)return i}return d._commandColumnEdit&&d._commandColumnEdit.boundindex===e?'<span style="display: flex; justify-content: center; height: 100%; align-items: center;"><span style="cursor: pointer; text-decoration: underline;" update>'+d.gridlocalization.udpaterowstring+'</span><span style="cursor: pointer; text-decoration: underline; margin-left: 10px;" cancel>'+d.gridlocalization.cancelstring+"</span></span>":'<span style="display: flex; justify-content: center; height: 100%; align-items: center;"><span style="cursor: pointer; text-decoration: underline;" edit>'+d.gridlocalization.editstring+"</span></span>"},datafield:"_commandColumn"}),this.groupable&&e.each(this.groups,(function(e){var i=new t(d,this);i.visibleindex=c++,i.width=d.groupindentwidth,h.add(i),i.grouped=!0,i.filterable=!1,i.sortable=!1,i.editable=!1,i.resizable=!1,i.draggable=!1})),this.rowdetails&&this.showrowdetailscolumn)&&((o=new t(d,this)).visibleindex=c++,o.width=d.groupindentwidth,o.pinned=!0,o.editable=!1,o.filterable=!1,o.draggable=!1,o.groupable=!1,o.resizable=!1,h.add(o),d._haspinned=!0);"checkbox"==this.selectionmode&&((o=new t(d,null)).visibleindex=c++,o.width=d.groupindentwidth,o.checkboxcolumn=!0,o.editable=!1,o.columntype="checkbox",o.groupable=!1,o.draggable=!1,o.filterable=!1,o.resizable=!1,o.datafield="_checkboxcolumn",h.add(o));var u=new Array;(e.each(this.columns,(function(e){if(null!=d.columns[e]){var i=new t(d,this);if(i.visibleindex=c++,null!=this.dataField&&(this.datafield=this.dataField),this.pinned&&(d._haspinned=!0),d.showeverpresentrow&&("addButtonColumn"!==this.datafield&&"resetButtonColumn"!==this.datafield&&"updateButtonColumn"!==this.datafield&&"deleteButtonColumn"!==this.datafield||(i.editable=!1,i.groupable=!1,i.draggable=!1,i.filterable=!1,i.resizable=!1,i.menu=!1)),null==this.datafield)d.source&&d.source._source&&"array"==d.source._source.datatype&&(r||(d.source._source.datafields||(d.source._source.datafields=new Array),d.source._source.datafields.push({name:e.toString()})),this.datafield=e.toString(),this.displayfield=e.toString(),i.datafield=this.datafield,i.displayfield=this.displayfield);else{if(u[this.datafield])throw new Error("jqxGrid: Invalid column 'datafield' setting. jqxGrid's columns should be initialized with unique data fields.");u[this.datafield]=!0}h.add(i)}})),this.adaptive)&&((o=new t(d,null)).visibleindex=c++,o.width=d.groupindentwidth,o.editable=!1,o.columntype="adaptive",o.cellsalign="center",o.groupable=!1,o.draggable=!1,o.menu=!1,o.sortable=!1,o.filterable=!1,o.resizable=!1,o.datafield="_adaptivecolumn",h.add(o));this.rtl&&h.records.reverse(),this.columns=h},_initializeRows:function(){var t=new e.jqx.collection(this.element);this.rows&&this.rows.clear(),this.rows=t},_raiseEvent:function(t,i){if(null==i&&(i={owner:null}),!1!==this._trigger){var r=this.events[t];if(this._camelCase||(r=r.toLowerCase()),(2==t||15==t)&&this.showeverpresentrow&&(this.everpresentrowactions.indexOf("delete")>=0||this.everpresentrowactions.indexOf("update")>=0)){if(this.updateeverpresentrow)var s=this;setTimeout((function(){s.updateeverpresentrow()}),50)}var l=i;l.owner=this;var a=new e.Event(r);a.owner=this,a.args=l;var o=this.host.trigger(a);return i=a.args,o}},wheel:function(e,t){if(t.autoheight&&"visible"!=t.hScrollBar.css("visibility"))return e.returnValue=!0,!0;var i=0;if(e||(e=window.event),e.originalEvent&&e.originalEvent.wheelDelta&&(e.wheelDelta=e.originalEvent.wheelDelta),e.wheelDelta?i=e.wheelDelta/120:e.detail&&(i=-e.detail/3),i){var r=t._handleDelta(i);return r&&(e.preventDefault&&e.preventDefault(),null!=e.originalEvent&&(e.originalEvent.mouseHandled=!0),null!=e.stopPropagation&&e.stopPropagation()),!!r&&(r=!1,e.returnValue=r,r)}e.preventDefault&&e.preventDefault(),e.returnValue=!1},_handleDelta:function(e){if("hidden"!=this.vScrollBar.css("visibility")){var t=this.vScrollInstance.value;if(e<0?this.scrollDown():this.scrollUp(),t!=this.vScrollInstance.value)return!0}else if("hidden"!=this.hScrollBar.css("visibility")){t=this.hScrollInstance.value;if(e>0?this.hScrollInstance.value>2*this.horizontalscrollbarstep?this.hScrollInstance.setPosition(this.hScrollInstance.value-2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(0):this.hScrollInstance.value<this.hScrollInstance.max?this.hScrollInstance.setPosition(this.hScrollInstance.value+2*this.horizontalscrollbarstep):this.hScrollInstance.setPosition(this.hScrollInstance.max),t!=this.hScrollInstance.value)return this._activeFilterElement&&this._activeFilterElement.jqxDropDownList("close"),!0}return!1},scrollDown:function(){if("hidden"!=this.vScrollBar.css("visibility")){var e=this.vScrollInstance;e.value+this.rowsheight<=e.max?e.setPosition(parseInt(e.value)+this.rowsheight):e.setPosition(e.max)}},scrollUp:function(){if("hidden"!=this.vScrollBar.css("visibility")){var e=this.vScrollInstance;e.value-this.rowsheight>=e.min?e.setPosition(parseInt(e.value)-this.rowsheight):e.setPosition(e.min)}},_removeHandlers:function(){var t=this.that;t.removeHandler(e(window),"orientationchange.jqxgrid"+t.element.id),t.removeHandler(e(window),"orientationchanged.jqxgrid"+t.element.id),t.removeHandler(t.vScrollBar,"valueChanged"),t.removeHandler(t.hScrollBar,"valueChanged"),t.vScrollInstance.valueChanged=null,t.hScrollInstance.valueChanged=null;var i="mousedown.jqxgrid";t.isTouchDevice()&&(i=e.jqx.mobile.getTouchEventName("touchend")),t.removeHandler(t.host,"dblclick.jqxgrid"),t.removeHandler(t.host,i),t.removeHandler(t.content,"mousemove",t._mousemovefunc),t.removeHandler(t.host,"mouseleave.jqxgrid"),t.removeHandler(t.content,"mouseenter"),t.removeHandler(t.content,"mouseleave"),t.removeHandler(t.content,"mousedown"),t.removeHandler(t.content,"scroll"),t.removeHandler(t.content,"selectstart."+t.element.id),t.removeHandler(t.host,"dragstart."+t.element.id),t.removeHandler(t.host,"keydown.edit"+t.element.id),t.removeHandler(e(document),"keydown.edit"+t.element.id),t.removeHandler(e(document),"keyup.edit"+t.element.id),t._mousemovedocumentfunc&&t.removeHandler(e(document),"mousemove.selection"+t.element.id,t._mousemovedocumentfunc),t.removeHandler(e(document),"mouseup.selection"+t.element.id),t._mousewheelfunc&&t.removeHandler(t.host,"mousewheel",t._mousewheelfunc),t.editable&&t.removeHandler(e(document),"mousedown.gridedit"+t.element.id),t.host.off&&(t.content.off("mousemove"),t.host.off("mousewheel"))},_addHandlers:function(){var t=this.that,i=t.isTouchDevice();i||t.addHandler(t.host,"dragstart."+t.element.id,(function(e){return!1})),t.scrollbarautoshow&&(t.addHandler(t.host,"mouseenter.gridscroll"+t.element.id,(function(e){t.vScrollBar.fadeIn("fast"),t.hScrollBar.fadeIn("fast")})),t.addHandler(t.host,"mouseleave.gridscroll"+t.element.id,(function(e){t.vScrollInstance.isScrolling()||t.hScrollInstance.isScrolling()||(t.vScrollBar.fadeOut("fast"),t.hScrollBar.fadeOut("fast"))}))),t.editable&&t.addHandler(e(document),"mousedown.gridedit"+t.element.id,(function(e){if(t.editable&&t.begincelledit&&t.editcell&&!t.vScrollInstance.isScrolling()&&!t.vScrollInstance.isScrolling()){var i=t.host.coord(),r=t.host.width(),s=t.host.height(),l=!1,a=!1;if((e.pageY<i.top||e.pageY>i.top+s)&&(l=!0,a=!0),(e.pageX<i.left||e.pageX>i.left+r)&&(l=!0,!0),l){if(t.editcell&&t.editcell.editor)switch(t.editcell.columntype){case"datetimeinput":if(t.editcell.editor.jqxDateTimeInput&&t.editcell.editor.jqxDateTimeInput("container")&&"block"==t.editcell.editor.jqxDateTimeInput("container")[0].style.display){var o=t.editcell.editor.jqxDateTimeInput("container").coord().top,n=t.editcell.editor.jqxDateTimeInput("container").coord().top+t.editcell.editor.jqxDateTimeInput("container").height();if(!a||!(e.pageY<o||e.pageY>n))return;l=!0,t.editcell.editor.jqxDateTimeInput("close")}break;case"combobox":if(t.editcell.editor.jqxComboBox&&t.editcell.editor.jqxComboBox("container")&&"block"==t.editcell.editor.jqxComboBox("container")[0].style.display){o=t.editcell.editor.jqxComboBox("container").coord().top,n=t.editcell.editor.jqxComboBox("container").coord().top+t.editcell.editor.jqxComboBox("container").height();if(!a||!(e.pageY<o||e.pageY>n))return;l=!0,t.editcell.editor.jqxComboBox("close")}break;case"dropdownlist":if(t.editcell.editor.jqxDropDownList&&t.editcell.editor.jqxDropDownList("container")&&"block"==t.editcell.editor.jqxDropDownList("container")[0].style.display){o=t.editcell.editor.jqxDropDownList("container").coord().top,n=t.editcell.editor.jqxDropDownList("container").coord().top+t.editcell.editor.jqxDropDownList("container").height();if(!a||!(e.pageY<o||e.pageY>n))return;l=!0,t.editcell.editor.jqxDropDownList("close")}break;case"template":case"custom":for(var d=["jqxDropDownList","jqxComboBox","jqxDropDownButton","jqxDateTimeInput"],h=function(i){var r=t.editcell.editor.data();if(r[i]&&r[i].instance.container&&"block"==r[i].instance.container[0].style.display){var s=r[i].instance,o=s.container.coord().top,n=s.container.coord().top+s.container.height();return!(!a||!(e.pageY<o||e.pageY>n))&&(l=!0,s.close(),!0)}},c=0;c<d.length;c++){if(0==h(d[c]))return}}t.endcelledit(t.editcell.row,t.editcell.column,!1,!0),t._oldselectedcell=null}}})),t.vScrollInstance.valueChanged=function(e){t.virtualsizeinfo&&(t._closemenu(),"physical"!=t.scrollmode?(t._renderrows(t.virtualsizeinfo),t.currentScrollValue=e.currentValue):(null!=t.currentScrollValue&&Math.abs(t.currentScrollValue-e.currentValue),t._renderrows(t.virtualsizeinfo),t.currentScrollValue=e.currentValue),t.pageable||t.groupable||!t.dataview.virtualmode||(t.loadondemandupdate&&clearTimeout(t.loadondemandupdate),t.loadondemandupdate=setTimeout((function(){t.loadondemand=!0,t._renderrows(t.virtualsizeinfo)}),100)),i&&(t._lastScroll=new Date))},t.hScrollInstance.valueChanged=function(r){if(t.virtualsizeinfo){t._closemenu();var s=function(){t._renderhorizontalscroll(),t._renderrows(t.virtualsizeinfo),t.editcell&&!t.editrow&&t._showcelleditor&&t.editcell.editing&&(t.hScrollInstance.isScrolling()||t._showcelleditor(t.editcell.row,t.getcolumn(t.editcell.column),t.editcell.element,t.editcell.init))};if(i)s();else{null==t._browser?t._isIE10():t._browser;navigator&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout((function(){s()}),1)):e.jqx.browser.msie?(t._hScrollTimer&&clearTimeout(t._hScrollTimer),t._hScrollTimer=setTimeout((function(){s()}),.01)):s()}i&&(t._lastScroll=new Date)}},t._mousewheelfunc=t._mousewheelfunc||function(e){if(!t.editcell&&t.enablemousewheel)return t.wheel(e,t),!1},t.removeHandler(t.host,"mousewheel",t._mousewheelfunc),t.addHandler(t.host,"mousewheel",t._mousewheelfunc);var r="mousedown.jqxgrid";i&&(r=e.jqx.mobile.getTouchEventName("touchend")),t.addHandler(t.host,r,(function(i){if(t.isTouchDevice()){if(t._newScroll=new Date,t._newScroll-t._lastScroll<500)return!1;if(e(i.target).ischildof(t.vScrollBar))return!1;if(e(i.target).ischildof(t.hScrollBar))return!1}t._mousedown=new Date;var r=t._handlemousedown(i,t);return t.isNestedGrid&&(t.resizablecolumn||t.columnsreorder||i.stopPropagation()),t._lastmousedown=new Date,r})),i||(t.addHandler(t.host,"dblclick.jqxgrid",(function(i){if(t.editable&&t.begincelledit&&"dblclick"==t.editmode)t._handledblclick(i,t);else if(e.jqx.browser.msie&&e.jqx.browser.version<9)t._handlemousedown(i,t);return t.mousecaptured=!1,t._lastmousedown=new Date,!0})),t._mousemovefunc=function(e){if(t._handlemousemove)return t._handlemousemove(e,t)},t.addHandler(t.content,"mousemove",t._mousemovefunc),t._handlemousemoveselection&&(t._mousemovedocumentfunc=function(e){if(t._handlemousemoveselection)return t._handlemousemoveselection(e,t)},t.addHandler(e(document),"mousemove.selection"+t.element.id,t._mousemovedocumentfunc)),t.addHandler(e(document),"mouseup.selection"+t.element.id,(function(i){if(t._handlemouseupselection){if(i.shiftKey&&e(i.target).ischildof(t.host)&&t.autofill){var r=t.editable;t.editable=!1,t._lastmousedown=new Date(2e3,1,1),t._handlemousedown(i,t),t.mousecaptured=!0,t.editable=r}t._handlemouseupselection(i,t)}})));try{if((""!=document.referrer||window.frameElement)&&null!=window.top&&window.top!=window.self){var s=null;if(window.parent&&document.referrer&&(s=document.referrer),s&&-1!=s.indexOf(document.location.host)){t.addHandler(e(window.top.document),"mouseup.grid"+t.element.id,(function(e){if(t._handlemouseupselection)try{t._handlemouseupselection(e,t)}catch(e){}}))}}}catch(e){}t.focused=!1,i||(t.addHandler(t.content,"mouseenter",(function(e){t.focused=!0,t.wrapper&&(t.wrapper.attr("tabindex",1),t.content.attr("tabindex",2)),t._overlayElement&&(t.vScrollInstance.isScrolling()||t.hScrollInstance.isScrolling()?t._overlayElement[0].style.visibility="visible":t._overlayElement[0].style.visibility="hidden")})),t.addHandler(t.content,"mouseleave",(function(e){t._handlemousemove&&t.enablehover&&t._clearhoverstyle(),t._overlayElement&&(t._overlayElement[0].style.visibility="hidden"),t.focused=!1})),(t.groupable||t.columnsreorder)&&t.addHandler(e(document),"selectstart."+t.element.id,(function(e){if(!0===t.__drag)return!1})),t.addHandler(t.content,"selectstart."+t.element.id,(function(i){if(t.enablebrowserselection)return!0;if(t.showfilterrow&&e(i.target).ischildof(t.filterrow))return!0;if(t.showeverpresentrow){if(e(i.target).ischildof(t.addnewrow))return!0;if(t.addnewrowtop&&e(i.target).ischildof(t.addnewrowtop))return!0}return!!(i.target.className&&i.target.className.indexOf("jqx-grid-widget")>=0)||!!t.editcell&&void(i.stopPropagation&&i.stopPropagation())})),t.addHandler(e(document),"keyup.edit"+t.element.id,(function(e){t._keydown=!1})),t.addHandler(e(document),"keydown.edit"+t.element.id,(function(i){if(t.adaptiveview)return!0;if((t._keydown=!t.editcell,20===(s=i.charCode?i.charCode:i.keyCode?i.keyCode:0)&&(t._capsLock?t._capsLock=!1:t._capsLock=!0),t.handlekeyboardnavigation)&&((t.focused||i.target===t.element||e(i.target).ischildof(t.host))&&1==t.handlekeyboardnavigation(i)))return!1;if(t.editable&&t.editcell&&(13!=s&&27!=s&&9!=s&&32!=s||t._handleeditkeydown&&(r=t._handleeditkeydown(i,t))),27==s&&(t.mousecaptured=!1,"visible"==t.selectionarea.css("visibility")&&t.selectionarea.css("visibility","hidden")),e.jqx.browser.msie&&e.jqx.browser.version<12&&t.focused&&!t.isNestedGrid){if(13==s&&0==r)return r;var r=!0,s=i.charCode?i.charCode:i.keyCode?i.keyCode:0;if(!t.editcell&&t.editable&&"programmatic"!=t.editmode&&t._handleeditkeydown&&(r=t._handleeditkeydown(i,t)),r&&t.keyboardnavigation&&t._handlekeydown)return(r=t._handlekeydown(i,t))||(i.preventDefault&&i.preventDefault(),null!=i.stopPropagation&&i.stopPropagation()),r}return!0})),t.addHandler(t.host,"keyup.edit"+t.element.id,(function(i){if(t.adaptiveview)return!0;if(9===i.keyCode&&!e(document.activeElement).ischildof(t.filterrow)&&!e(document.activeElement).ischildof(t.pager))switch(t.selectionmode){case"singlecell":case"multiplecells":case"multiplecellsextended":case"multiplecellsadvanced":t.getselectedcell();break;default:t.getselectedrowindex()}})),t.addHandler(t.host,"keydown.edit"+t.element.id,(function(i){var r=!0;if(t.adaptiveview)return!0;if(t.handlekeyboardnavigation&&1==t.handlekeyboardnavigation(i))return!1;if(t.editable&&"programmatic"!=t.editmode&&t._handleeditkeydown&&(r=t._handleeditkeydown(i,t),t.isNestedGrid&&i.stopPropagation()),!t.editcell&&i.altKey&&!e(document.activeElement).ischildof(t.filterrow)&&!e(document.activeElement).ischildof(t.pager))if(40===i.keyCode){var s=t.getselectedcell();s&&t.openmenu(s.column)}else 38===i.keyCode&&t._closemenu();return e.jqx.browser.msie&&e.jqx.browser.version<8?t.isNestedGrid&&r&&t.keyboardnavigation&&t._handlekeydown&&(r=t._handlekeydown(i,t),i.stopPropagation()):r&&t.keyboardnavigation&&t._handlekeydown&&(r=t._handlekeydown(i,t),t.isNestedGrid&&i.stopPropagation()),r||(i.preventDefault&&i.preventDefault(),null!=i.stopPropagation&&i.stopPropagation()),r&&t.selectedcells&&t.selectedcells.length>0&&9===i.keyCode&&i.shiftKey&&t.table&&t.table[0].rows&&t.table[0].rows.length>0&&(e(document.activeElement).ischildof(t.filterrow)||e(document.activeElement).ischildof(t.pager)||t.table[0].rows[0].cells[0].focus()),r})))},_hittestrow:function(t,i){if(null!=this.vScrollInstance&&null!=this.hScrollInstance){null==t&&(t=0);var r=this.vScrollInstance,s=this.hScrollInstance,l=r.value;"visible"!=this.vScrollBar.css("visibility")&&(l=0);var a=s.value;"visible"!=this.hScrollBar.css("visibility")&&(a=0),"deferred"==this.scrollmode&&null!=this._newmax&&l>this._newmax&&(l=this._newmax);var o=parseInt(l)+i;parseInt(a);if(null!=this.visiblerows&&0!=this.visiblerows.length){var n=!1,d=this._findvisiblerow(o,this.visiblerows);if(d>=0){var h=this.visiblerows[d],c=this.rowdetails&&h.rowdetails,u=!h.rowdetailshidden;if(c){var g=this.visiblerows[d-1];if(g==h&&(h=g,d--),u){var p=e(this.hittestinfo[d].visualrow).position().top+parseInt(this.table.css("top")),m=e(this.hittestinfo[d].visualrow).height();i>=p&&i<=p+m||(d++,h=this.visiblerows[d],n=!0)}}}return{index:d,row:h,details:n}}}},getcellatposition:function(t,i){var r=this.that,s=this.showheader?this.columnsheader.height()+2:0,l=this._groupsheader()?this.groupsheader.height():0;l+=this.showtoolbar?this.toolbarheight:0,l+=this.showfilterbar?this.toolbarheight:0;var a=this.host.coord();this.hasTransform&&(a=e.jqx.utilities.getOffset(this.host));var o=t-a.left,n=i-s-a.top-l,d=this._hittestrow(o,n),h=d.row,c=d.index,u=this.table[0].rows[c];if(this.dataview&&0==this.dataview.records.length){for(var g=this.table[0].rows,p=0,m=0;m<g.length;m++){if(n>=p&&n<p+this.rowsheight){u=g[m];break}p+=this.rowsheight}h={boundindex:m}}if(null==u)return!0;var w=this.hScrollInstance.value,f=0;for(this.groupable&&this.groups.length,m=0;m<u.cells.length;m++){var v=parseInt(e(this.columnsrow[0].cells[m]).css("left"));t=v-w;if(r.columns.records[m].pinned&&(t=v),!r.columns.records[m].hidden&&!r.columns.records[m].adaptivehidden)if(t+e(this.columnsrow[0].cells[m]).width()>=o&&o>=t){f=m;break}}if(null!=h){var b=this._getcolumnat(f);return{row:this.getboundindex(h),column:b.datafield,value:this.getcellvalue(this.getboundindex(h),b.datafield)}}return null},_handlecardedit:function(t){var i=t.target.getAttribute("row"),r=document.createElement("div"),s=this.getrowdatabyid(i),l='<div class="jqx-grid-card-cell">';l+="<table>";for(var a=0;a<this.columns.records.length;a++){var o=this.columns.records[a];if(!o.hidden||void 0!==o.__hidden){var n=s[o.datafield];""!=o.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(n)?n=e.jqx.dataFormat.formatdate(n,o.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(n)&&(n=e.jqx.dataFormat.formatnumber(n,o.cellsformat,this.gridlocalization))),l+='<tr class="jqx-grid-card-table-row">',l+='<td class="jqx-grid-card-cell-label"><div>'+o.text+"</div></td>",l+='<td class="jqx-grid-card-cell-value"><div><input datafield="'+o.datafield+'" class="jqx-widget jqx-input" value="'+n+'"/></div></td>',l+="</tr>"}}l+="</table>",l+="</div>",l+='<div class="jqx-card-edit-buttons"><input style="margin-right: 5px;" type="button" dataid="Save" value="Save" /><input dataid="Cancel" type="button" value="Cancel" /></td>',l+="</div>",r.innerHTML="<div>"+this.gridlocalization.udpaterowstring+" "+i+'</div><div style="overflow: hidden;">'+l+"</div></div>";var d=r.querySelector('[dataid="Save"]'),h=r.querySelector('[dataid="Cancel"]');e(d).jqxButton({template:"primary",width:"40%",theme:this.theme}),e(h).jqxButton({width:"40%",theme:this.theme});var c=this;d.onclick=function(){for(var t=e(r).find("[datafield]"),s={},l=0;l<t.length;l++){for(var a=t[l].getAttribute("datafield"),o=t[l].value,n=0;n<c.dataview.source.datafields.length;n++){var d=c.dataview.source.datafields[n];if(d.name===a){"bool"!==d.type&&"boolean"!==d.type||(o=!0);var h=c._getcolumnbydatafield(d.name),u=d.type,g="date"===u||"time"===u;if("number"===u||"float"===u||"int"===u||"integer"===u||"string"===u&&(-1!=h.cellsformat.indexOf("p")||-1!=h.cellsformat.indexOf("c")||-1!=h.cellsformat.indexOf("n")||-1!=h.cellsformat.indexOf("f"))){if(""===o&&h.nullable)return"";o.indexOf&&o.indexOf(c.gridlocalization.currencysymbol)>-1&&(o=o.replace(c.gridlocalization.currencysymbol,""));var p=o;if(p=parseFloat(p),isNaN(p)){(o=(o=function(e,t,i){var r=e;if(t==i)return e;for(var s=r.indexOf(t);-1!=s;)s=(r=r.replace(t,i)).indexOf(t);return r}(o,c.gridlocalization.thousandsseparator,"")).replace(c.gridlocalization.decimalseparator,".")).indexOf(c.gridlocalization.percentsymbol)>-1&&(o=o.replace(c.gridlocalization.percentsymbol,""));for(var m="",w=0;w<o.length;w++){var f=o.substring(w,w+1);"-"===f&&(m+="-"),"."===f&&(m+="."),null!=f.match(/^[0-9]+$/)&&(m+=f)}o=(o=m).replace(/ /g,""),o=new Number(o),isNaN(o)&&(o="")}else o=p}if(g||"string"===u&&(-1!=h.cellsformat.indexOf("H")||-1!=h.cellsformat.indexOf("m")||-1!=h.cellsformat.indexOf("M")||-1!=h.cellsformat.indexOf("y")||-1!=h.cellsformat.indexOf("h")||-1!=h.cellsformat.indexOf("d"))){if(""===o&&h.nullable)return"";var v=o;e.jqx.dataFormat&&(o=e.jqx.dataFormat.tryparsedate(v,c.gridlocalization)),"Invalid Date"!=o&&null!=o||(o="")}}}s[a]=o}c.updaterow(i,s),e(r).jqxWindow("close")},h.onclick=function(){e(r).jqxWindow("close")},document.body.appendChild(r),e(r).jqxWindow({position:{left:this.host.offset().left,top:this.host.offset().top},modalOpacity:.01,width:this.element.offsetWidth,height:this.element.offsetHeight,isModal:!0,autoOpen:!1,resizable:!1,draggable:!1}),e(r).jqxWindow("open"),this.cardwindow&&e(this.cardwindow).remove(),this.cardwindow=r},_handlemousedown:function(t,i){if(null==t.target)return!0;if(i.disabled)return!0;if(e(t.target).ischildof(this.columnsheader)||e(t.target).ischildof(this.hScrollBar)||e(t.target).ischildof(this.vScrollBar))return!0;if(t.target===i.bottomRight[0])return!0;var r,s;if(i.cardview&&t.target&&t.target.className.indexOf("jqx-icon-edit")>=0&&i._handlecardedit(t),t.which?r=3==t.which:t.button&&(r=2==t.button),t.which?s=2==t.which:t.button&&(s=1==t.button),s)return!0;if(this.adaptiveview){if(e(t.target).ischildof(e(this.adaptiveview)))return!0;if(t.target==this.adaptiveview)return!0}if(this.showstatusbar){if(e(t.target).ischildof(this.statusbar))return!0;if(t.target==this.statusbar[0])return!0}if(this.showtoolbar){if(e(t.target).ischildof(this.toolbar))return!0;if(t.target==this.toolbar[0])return!0}if(this.showfilterbar){if(e(t.target).ischildof(this.filterbar))return!0;if(t.target==this.filterbar[0])return!0}if(this.pageable){if(e(t.target).ischildof(this.pager))return!0;if(t.target==this.pager[0])return!0}if(!this.columnsheader)return!0;if(!this.editcell&&this.pageable&&e(t.target).ischildof(this.pager))return!0;var l=this.showheader?this.columnsheader.height()+2:0,a=this._groupsheader()?this.groupsheader.height():0;a+=this.showtoolbar?this.toolbarheight:0,a+=this.showfilterbar?this.toolbarheight:0;var o=this.host.coord();if(this.hasTransform){o=e.jqx.utilities.getOffset(this.host);var n=this._getBodyOffset();o.left-=n.left,o.top-=n.top}var d=parseInt(t.pageX),h=parseInt(t.pageY);if(this.isTouchDevice()){var c=i.getTouches(t)[0];d=parseInt(c.pageX),h=parseInt(c.pageY),1==i.touchmode&&null!=c._pageX&&(d=parseInt(c._pageX),h=parseInt(c._pageY))}var u=d-o.left,g=h-l-o.top-a;if(this.pageable&&!this.autoheight&&this.gotopage&&g>this.pager.coord().top-o.top-a-l)return;var p=this._hittestrow(u,g);if(p&&!p.details){var m=p.row,w=p.index,f=t.target.className,v=this.table[0].rows[w];if(null==v)return i.editable&&i.begincelledit&&i.editcell&&i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),!0;i.mousecaptured=!0,i.mousecaptureposition={left:t.pageX,top:t.pageY-a,clickedrow:v};var b=this.hScrollInstance,x=b.value;this.rtl&&"hidden"!=this.hScrollBar.css("visibility")&&(x=b.max-b.value);var y=-1,_=this.groupable?this.groups.length:0;this.rtl&&("hidden"!=this.vScrollBar[0].style.visibility&&(x-=this.scrollbarsize+4),"hidden"==this.hScrollBar[0].style.visibility&&(x=-parseInt(this.content.css("left"))));for(var q=0;q<v.cells.length;q++){d=(j=parseInt(e(this.columnsrow[0].cells[q]).css("left")))-x;if(i.columns.records[q].pinned&&!i.rtl&&(d=j),null==(S=this._getcolumnat(q))||!S.hidden)if(null==S||!S.adaptivehidden)if(d+e(this.columnsrow[0].cells[q]).width()>=u&&u>=d){y=q,i.mousecaptureposition.clickedcell=q;break}}if(this.rtl&&this._haspinned)for(q=v.cells.length-1;q>=0&&i.columns.records[q].pinned;q--){var j;d=j=e(this.columnsrow[0].cells[q]).coord().left-this.host.coord().left;if((null==(S=this._getcolumnat(q))||!S.hidden)&&(null==S||!S.adaptivehidden)&&d+e(this.columnsrow[0].cells[q]).width()>=u&&u>=d){y=q,i.mousecaptureposition.clickedcell=q;break}}if(null!=m&&y>=0){this._raiseEvent(1,{rowindex:this.getboundindex(m),visibleindex:m.visibleindex,row:m,group:m.group,rightclick:r,originalEvent:t});var S=this._getcolumnat(y),z=this.getcellvalue(this.getboundindex(m),S.datafield);if(this.editable&&this.editcell&&(this._currentEditableColumn=y,S.datafield==this.editcell.column&&this.getboundindex(m)==this.editcell.row&&(this.mousecaptured=!1)),"adaptive"===S.columntype){var k=document.createElement("div"),C=document.createElement("div"),T=document.createElement("a"),I=document.createElement("a"),B=document.createElement("div"),P=this.getrowdata(this.getboundindex(m));T.href="#",I.href="#",k.style.zIndex=99999,k.style.position="absolute",k.style.left="0px",k.style.top="0px",k.style.width="100%",k.style.height="100%",k.className="jqx-adaptive-view jqx-widget-content",B.style.position="relative",B.style.top="100%",B.style.textAlign="center",B.style.marginTop="-40px",C.style.position="absolute",C.style.left="0px",C.style.top="0px",C.style.width="100%",C.style.height="100%",this.theme&&(k.className="jqx-widget-content jqx-widget-content-"+this.theme);var H=document.createElement("span");H.className="jqx-icon-close",this.theme&&(H.className="jqx-icon-close jqx-widget-close-"+this.theme),H.style.zIndex=99,H.style.position="absolute",H.style.right="10px",H.style.top="10px",H.style.width="16px",H.style.height="16px",k.appendChild(C),k.appendChild(H),T.innerHTML=this.gridlocalization.okstring,I.innerHTML=this.gridlocalization.cancelstring,T.addEventListener("mousedown",(function(e){for(var t={},r=i.adaptiveview.querySelectorAll("input"),s=0;s<r.length;s++){var l=i.escape_HTML(r[s].value);t[r[s].getAttribute("data-column")]=l}return i.updaterow(P.uid,t),k.parentNode.removeChild(k),i.adaptiveview=null,e.stopPropagation(),!1})),I.addEventListener("mousedown",(function(){return k.parentNode.removeChild(k),i.adaptiveview=null,t.stopPropagation(),!1})),this.editable&&(B.appendChild(T),B.appendChild(I),k.appendChild(B));var M="<table class='jqx-adaptive-table'><tr>";for(w=0,q=0;q<this.columns.records.length;q++){if("adaptive"!==(S=this.columns.records[q]).columntype){q>0&&w%2==0&&(M+="</tr><tr>");var A=P[S.displayfield];""!=S.cellsformat&&e.jqx.dataFormat&&(e.jqx.dataFormat.isDate(A)?A=e.jqx.dataFormat.formatdate(A,S.cellsformat,this.gridlocalization):e.jqx.dataFormat.isNumber(A)&&(A=e.jqx.dataFormat.formatnumber(A,S.cellsformat,this.gridlocalization)));var E=this.filterable?'<div datafield="'+S.datafield+'" class="'+i.toTP("jqx-grid-column-filterbutton")+'" style="position: relative; top: 4px; display: inline-block; width: 16px; height:16px;"></div>':"";this.editable?S.editable?M+="<td>"+E+this.escape_HTML(S.text)+": <input data-column='"+S.displayfield+"' value='"+A+"'/></td>":M+="<td>"+E+this.escape_HTML(S.text)+": <input data-column='"+S.displayfield+"' readonly value='"+A+"'/></td>":M+="<td>"+E+this.escape_HTML(S.text)+": "+A+"</td>",w++}}return M+="</tr></table>",C.innerHTML=M,H.addEventListener("mousedown",(function(e){k.parentNode.removeChild(k),i.adaptiveview=null})),this.wrapper[0].appendChild(k),this.adaptiveview=k,void e(this.adaptiveview).find(".jqx-grid-column-filterbutton").on("click",(function(){var e=this.getAttribute("datafield"),t=this.offsetTop;i.openmenu(e),setTimeout((function(){i.gridmenu.css("top",30+t),i.gridmenu.css("left",25),i.gridmenu.css("z-index",99999),i.gridmenu.parent().css("z-index",99999)}),300)}))}if("_commandColumn"===S.datafield){w=this.getboundindex(m);!this._commandColumnEdit&&t.target&&t.target.hasAttribute("edit")?(this._commandColumnEdit=m,this._commandColumnEditMode=this.editmode,this.editmode="selectedrow",this._rendervisualrows(),this.beginrowedit(w)):t.target&&t.target.hasAttribute("cancel")?(this.endrowedit(w,!0),this._cellscache=new Array,this._renderrows(this.virtualsizeinfo)):t.target&&t.target.hasAttribute("update")&&(this.endrowedit(w,!1),this._cellscache=new Array,this._renderrows(this.virtualsizeinfo))}if(this._raiseEvent(8,{rowindex:this.getboundindex(m),column:S?S.getcolumnproperties():null,row:m,visibleindex:m.visibleindex,datafield:S?S.datafield:null,columnindex:y,value:z,rightclick:r,originalEvent:t}),S.createwidget)return!0;if(this.isTouchDevice())if("checkbox"==S.columntype&&this.editable&&this._overlayElement){if(!this.editcell)return this._overlayElement.css("visibility","hidden"),this.editcell=this.getcell(w,S.datafield),!0}else if("button"==S.columntype&&this._overlayElement)return S.buttonclick&&S.buttonclick(v.cells[y].buttonrow,t),!0;var D=!1;if(null!=this._lastmousedown&&this._mousedown-this._lastmousedown<300&&this._clickedrowindex==this.getboundindex(m)&&(this._raiseEvent(22,{rowindex:this.getboundindex(m),row:m,visibleindex:m.visibleindex,group:m.group,rightclick:r,originalEvent:t}),this._clickedcolumn==S.datafield&&this._raiseEvent(23,{rowindex:this.getboundindex(m),row:m,visibleindex:m.visibleindex,column:S?S.getcolumnproperties():null,datafield:S?S.datafield:null,columnindex:y,value:z,rightclick:r,originalEvent:t}),D=!0,this._clickedrowindex=-1,this._clickedcolumn=null,t.isPropagationStopped&&t.isPropagationStopped()))return!1;if(r)return!0;D||(this._clickedrowindex=this.getboundindex(m),this._clickedcolumn=S.datafield);var O=e.jqx.utilities.getBrowser();if("msie"==O.browser&&parseInt(O.version)<=7&&(0==y&&this.rowdetails&&(f="jqx-grid-group-collapse"),_>0&&y<=_&&(f="jqx-grid-group-collapse")),-1!=f.indexOf("jqx-grid-group-expand")||-1!=f.indexOf("jqx-grid-group-collapse"))this.rtl?_>0&&y>v.cells.length-_-1&&this._togglegroupstate?this._togglegroupstate(m.bounddata,!0):y==v.cells.length-1-_&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(m.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0):_>0&&y<_&&this._togglegroupstate?this._togglegroupstate(m.bounddata,!0):y==_&&this.rowdetails&&this.showrowdetailscolumn&&(this._togglerowdetails(m.bounddata,!0),this.gridcontent[0].scrollTop=0,this.gridcontent[0].scrollLeft=0);else if(-1!=m.boundindex){var L=this.selectedrowindexes.slice(0),N=!1;if("none"!=i.selectionmode&&"checkbox"!=i.selectionmode&&this._selectrowwithmouse){"multiplecellsadvanced"!=i.selectionmode&&"multiplecellsextended"!=i.selectionmode&&"multiplerowsextended"!=i.selectionmode&&"multiplerowsadvanced"!=i.selectionmode||t.ctrlKey||t.shiftKey||t.metaKey||(i.selectedrowindexes=new Array,i.selectedcells=new Array);var F=!1,R=this.getboundindex(m);i._oldselectedrow!==R&&"none"!==i.selectionmode||(F=!0),-1==i.selectionmode.indexOf("cell")?("singlerow"!=i.selectionmode||i.selectedrowindex!=R&&"singlerow"==i.selectionmode)&&(this._applyrowselection(R,!0,!1,null,S.datafield),this._selectrowwithmouse(i,p,L,S.datafield,t.ctrlKey||t.metaKey,t.shiftKey)):null!=S.datafield&&(this._selectrowwithmouse(i,p,L,S.datafield,t.ctrlKey||t.metaKey,t.shiftKey),t.shiftKey||this._applycellselection(R,S.datafield,!0,!1)),i._oldselectedcell&&i._oldselectedcell.datafield==i.selectedcell.datafield&&i._oldselectedcell.rowindex==i.selectedcell.rowindex&&(N=!0),i._oldselectedcell=i.selectedcell,i._oldselectedrow=R}if(i.autosavestate&&i.savestate&&i.savestate(),i.editable&&i.begincelledit&&"programmatic"!=i.editmode){if(t.isPropagationStopped&&t.isPropagationStopped())return!1;if("selectedrow"==i.editmode){if(F&&!i.editcell){if("checkbox"!==S.columntype){this._currentEditableColumn=y;i.beginrowedit(this.getboundindex(m))}}else if(i.editcell&&!F&&"none"!=i.selectionmode)i.endrowedit(i.editcell.row)}else{R=this.getboundindex(m);var W="click"==i.editmode||N&&"selectedcell"==i.editmode;if(-1==i.selectionmode.indexOf("cell")&&"dblclick"!=i.editmode&&(W=!0),W&&null!=m.boundindex&&S.editable){i.begincelledit(this.getboundindex(m),S.datafield,S.defaulteditorvalue,!1);-1!=i.selectionmode.indexOf("cell")&&i._applycellselection(R,S.datafield,!1,!1)}-1!=i.selectionmode.indexOf("cell")&&"selectedcell"==i.editmode&&!N&&i.editcell&&i.endcelledit(i.editcell.row,i.editcell.column,!1,!0),"dblclick"!=i.editmode||N||!i.editcell||i.editcell.row==R&&S.datafield==i.editcell.column||i.endcelledit(i.editcell.row,i.editcell.column,!1,!0)}return!0}}}return!0}},_columnPropertyChanged:function(e,t,i,r){},_rowPropertyChanged:function(e,t,i,r){},_serializeObject:function(t){if(null==t)return"";var i="";return e.each(t,(function(e){e>0&&(i+=", "),i+="[";var t=0;for(var r in this)t>0&&(i+=", "),i+="{"+r+":"+this[r]+"}",t++;i+="]"})),i},isbindingcompleted:function(){return!this._loading},propertiesChangedHandler:function(e,t,i){i.width&&i.height&&2==Object.keys(i).length&&(e._updatesize(!0,!0),e._resizeWindow(),e.virtualmode&&!e._loading?e.vScrollInstance.setPosition(0):setTimeout((function(){e._renderrows(e.virtualsizeinfo)}),100))},propertyChangedHandler:function(t,i,r,s){if(null!=this.isInitialized&&0!=this.isInitialized&&!(t.batchUpdate&&t.batchUpdate.width&&t.batchUpdate.height&&2==Object.keys(t.batchUpdate).length))switch(i=i.toLowerCase()){case"cardview":case"cardviewsize":case"cardviewcolumns":case"cardheight":"cardview"===i&&s&&(t._oldrowsheight=t.rowsheight),t.prerenderrequired,t.rowsheight=32,t.__rowsheight=t.rowsheight,t.virtualsizeinfo=null,t.cardview?(t.__rowsheight=t.rowsheight,t.rowsheight=t.cardheight):t._oldrowsheight&&(t.__rowsheight=t._oldrowsheight,t.rowsheight=t._oldrowsheight,delete t._oldrowsheight),t.virtualsizeinfo=null,t.rendergridcontent(!0,!1),t.refreshdata();break;case"editable":case"showcolumnheaderlines":case"showcolumnlines":case"showrowlines":t.refresh();break;case"everpresentrowactionsmode":case"showeverpresentrow":case"everpresentrowposition":case"everpresentrowheight":r!=s&&(t._removeaddnewrow(),t.render());break;case"everpresentrowactions":t._updateaddnewrowui();break;case"rtl":t.content.css("left",""),t.columns=t._columns,t._filterrowcache=[],t.vScrollBar.jqxScrollBar({rtl:s}),t.hScrollBar.jqxScrollBar({rtl:s}),t._initpager&&t._initpager(),t._initgroupsheader&&t._initgroupsheader(),t.render();break;case"enablebrowserselection":t.showfilterrow||(t.showstatusbar||t.showtoolbar||t.host.addClass("jqx-disableselect"),t.content.addClass("jqx-disableselect")),t.enablebrowserselection&&(t.content.removeClass("jqx-disableselect"),t.host.removeClass("jqx-disableselect"));break;case"columnsheight":(32!=t.columnsheight||t.columngroups)&&t._measureElement("column"),t._render(!0,!0,!0,!1,!1);break;case"rowsheight":s!=r&&(31!=t.rowsheight&&t._measureElement("cell"),t.virtualsizeinfo=null,t.rendergridcontent(!0,!1),t.refresh());break;case"scrollMode":t.vScrollInstance.thumbStep=t.rowsheight;break;case"showdefaultloadelement":t._builddataloadelement();break;case"showfiltermenuitems":case"showsortmenuitems":case"showgroupmenuitems":case"filtermode":t._initmenu();break;case"touchmode":r!=s&&(t._removeHandlers(),t.touchDevice=null,t.vScrollBar.jqxScrollBar({touchMode:s}),t.hScrollBar.jqxScrollBar({touchMode:s}),t._updateTouchScrolling(),t._arrange(),t._updatecolumnwidths(),t._updatecellwidths(),t._addHandlers());break;case"autoshowcolumnsmenubutton":r!=s&&t._rendercolumnheaders();break;case"rendergridrows":r!=s&&t.updatebounddata();break;case"editmode":r!=s&&(t._removeHandlers(),t._addHandlers());break;case"source":t.updatebounddata(),t.virtualmode&&!t._loading&&(t.loadondemand=!0,t._renderrows(t.virtualsizeinfo));break;case"horizontalscrollbarstep":case"verticalscrollbarstep":case"horizontalscrollbarlargestep":case"verticalscrollbarlargestep":this.vScrollBar.jqxScrollBar({step:this.verticalscrollbarstep,largestep:this.verticalscrollbarlargestep}),this.hScrollBar.jqxScrollBar({step:this.horizontalscrollbarstep,largestep:this.horizontalscrollbarlargestep});break;case"closeablegroups":t._initgroupsheader&&t._initgroupsheader();break;case"showgroupsheader":r!=s&&(t._arrange(),t._initgroupsheader&&t._initgroupsheader(),t._renderrows(t.virtualsizeinfo));break;case"theme":s!=r&&(e.jqx.utilities.setTheme(r,s,t.host),t.gridmenu&&t.gridmenu.jqxMenu({theme:s}),t.pageable&&t._updatepagertheme(),t.filterable&&t._updatefilterrowui(!0),t.showeverpresentrow&&t._updateaddnewrowui(!0),t._applyThemeSettings());break;case"showtoolbar":case"showfilterbar":case"toolbarheight":case"statusbarheight":r!=s&&(t._arrange(),t.refresh());break;case"showstatusbar":r!=s&&(t.statusbar&&(s?t.statusbar.show():t.statusbar.hide()),t._arrange(),t.refresh());break;case"filterable":case"showfilterrow":case"showrowdetailscolumn":case"columnsmenu":r!=s&&t.render();break;case"autoshowfiltericon":case"showfiltercolumnbackground":case"showpinnedcolumnbackground":case"showsortcolumnbackground":r!=s&&t.rendergridcontent();break;case"scrollbarsize":r!=s&&(e.jqx.utilities.scrollBarSize=s,t._arrange());break;case"width":case"height":r!=s&&(t._updatesize(!0,!0),t._resizeWindow(),t.virtualmode&&!t._loading?t.vScrollInstance.setPosition(0):setTimeout((function(){t._renderrows(t.virtualsizeinfo)}),100));break;case"altrows":case"altstart":case"altstep":r!=s&&t._renderrows(t.virtualsizeinfo);break;case"groupsheaderheight":r!=s&&(t._arrange(),t._initgroupsheader&&t._initgroupsheader());break;case"pagerheight":r!=s&&t._initpager();break;case"selectedrowindex":t.selectrow(s);break;case"selectionmode":r!=s&&("none"==s&&(t.selectedrowindexes=new Array,t.selectedcells=new Array,t.selectedrowindex=-1),t._renderrows(t.virtualsizeinfo),"checkbox"==s&&t._render(!1,!1,!0,!1,!1));break;case"showheader":s?t.columnsheader.css("display","block"):t.columnsheader.css("display","none");break;case"virtualmode":r!=s&&(t.dataview.virtualmode=t.virtualmode,t.dataview.refresh(!1),t._render(!1,!1,!1));break;case"columngroups":t._render(!0,!0,!0,!1,!1);break;case"commandcolumn":case"columns":if(t.columns&&t.columns.length>t.headerZIndex&&(t.headerZIndex=t.columns.length+100),t._serializeObject(t._cachedcolumns)!==t._serializeObject(s)){var l=!1;t.filterable&&r&&r.records&&e.each(r.records,(function(){this.filter&&(l=!0),t.dataview.removefilter(this.displayfield,this.filter)})),t._columns=null,t._filterrowcache=[],t.render(),l&&t.applyfilters(),t._cachedcolumns=t.columns,t.removesort&&t.removesort()}else t[i]=r;break;case"autoheight":r!=s&&t._render(!1,!1,!0);break;case"pagermode":case"pagerbuttonscount":r!=s&&t._initpager&&(t.pagershowrowscombo&&(t.pagershowrowscombo.jqxDropDownList("destroy"),t.pagershowrowscombo=null),t.pagerrightbutton&&(t.removeHandler(t.pagerrightbutton,"mousedown"),t.removeHandler(t.pagerrightbutton,"mouseup"),t.removeHandler(t.pagerrightbutton,"click"),t.pagerrightbutton.jqxButton("destroy"),t.pagerrightbutton=null),t.pagerleftbutton&&(t.removeHandler(t.pagerleftbutton,"mousedown"),t.removeHandler(t.pagerleftbutton,"mouseup"),t.removeHandler(t.pagerleftbutton,"click"),t.pagerleftbutton.jqxButton("destroy"),t.removeHandler(e(document),"mouseup.pagerbuttons"+t.element.id),t.pagerleftbutton=null),t.pagerdiv.remove(),t._initpager());break;case"pagesizeoptions":case"pageable":case"pagesize":if(r!=s){if(t._loading)throw new Error("jqxGrid: "+t.loadingerrormessage);if(!t.host.jqxDropDownList||!t.host.jqxListBox)return void t._testmodules();if(t._initpager){if("pageable"!=i&&"pagermode"!=i&&"string"==typeof s){var a="The expected value type is: Int.";if("pagesize"!=i)a="The expected value type is: Array of Int values.";throw new Error("Invalid Value for: "+i+". "+a)}t.dataview.pageable=t.pageable,t.dataview.pagenum=0,t.dataview.pagesize=t._getpagesize(),t.virtualmode&&t.updatebounddata(),t.dataview.refresh(!0),t._initpager(),"pagesizeoptions"==i&&null!=s&&s.length>0&&(t.pagesize=parseInt(s[0]),t.dataview.pagesize=parseInt(s[0]),t.prerenderrequired=!0,t._requiresupdate=!0,t.dataview.pagenum=-1,t.gotopage(0))}t._render(!1,!1,!1)}break;case"groups":t._serializeObject(r)!==t._serializeObject(s)&&(t.dataview.groups=s,t._refreshdataview(),t._render(!0,!0,!0,!1));break;case"groupable":r!=s&&(t.dataview.groupable=t.groupable,t.dataview.pagenum=0,t.dataview.refresh(!1),t._render(!1,!1,!0));break;case"renderstatusbar":null!=s&&t.renderstatusbar(t.statusbar);break;case"rendertoolbar":null!=s&&t.rendertoolbar(t.toolbar);break;case"disabled":s?t.host.addClass(t.toThemeProperty("jqx-fill-state-disabled")):t.host.removeClass(t.toThemeProperty("jqx-fill-state-disabled")),e.jqx.aria(t,"aria-disabled",t.disabled),t.pageable&&(t.pagerrightbutton&&(t.pagerrightbutton.jqxButton({disabled:s}),t.pagerleftbutton.jqxButton({disabled:s}),t.pagershowrowscombo.jqxDropDownList({disabled:s}),t.pagergotoinput.attr("disabled",s)),t.pagerfirstbutton&&(t.pagerfirstbutton.jqxButton({disabled:s}),t.pagerlastbutton.jqxButton({disabled:s}))),t.vScrollBar.jqxScrollBar({disabled:s}),t.hScrollBar.jqxScrollBar({disabled:s}),t.filterable&&t.showfilterrow&&t._updatefilterrowui(!0),t.showeverpresentrow&&t._updateaddnewrowui(!0)}}}),e.jqx.collection=function(e){return this.records=new Array,this.owner=e,this.updating=!1,this.beginupdate=function(){this.updating=!0},this.resumeupdate=function(){this.updating=!1},this._raiseEvent=function(e){},this.clear=function(){this.records=new Array},this.replace=function(e,t){this.records[e]=t,this.updating||this._raiseEvent({type:"replace",element:t})},this.isempty=function(e){return null==this.records[e]},this.initialize=function(e){e<1&&(e=1),this.records[e-1]=-1},this.length=function(){return this.records.length},this.indexOf=function(e){return this.records.indexOf(e)},this.add=function(e){return null!=e&&(this.records[this.records.length]=e,this.updating||this._raiseEvent({type:"add",element:e}),!0)},this.insertAt=function(e,t){return null!=e&&null!=e&&(null!=t&&(e>=0&&(e<this.records.length?(this.records.splice(e,0,t),this.updating||this._raiseEvent({type:"insert",index:e,element:t}),!0):this.add(t))))},this.remove=function(e){if(null==e||null==e)return!1;var t=this.records.indexOf(e);return-1!=t&&(this.records.splice(t,1),this.updating||this._raiseEvent({type:"remove",element:e}),!0)},this.removeAt=function(e){if(null==e||null==e)return!1;if(e<0)return!1;if(e<this.records.length){var t=this.records[e];return this.records.splice(e,1),this.updating||this._raiseEvent({type:"removeAt",index:e,element:t}),!0}return!1},this},e.jqx.dataview=function(){return this.self=this,this.aggregates=!1,this.grid=null,this.uniqueId="id",this.records=[],this.rows=[],this.columns=[],this.groups=[],this.filters=new Array,this.updated=null,this.update=null,this.suspend=!1,this.pagesize=0,this.pagenum=0,this.totalrows=0,this.totalrecords=0,this.groupable=!0,this.loadedrecords=[],this.loadedrootgroups=[],this.loadedgroups=[],this.loadedgroupsByKey=[],this.virtualmode=!0,this._cachegrouppages=new Array,this.source=null,this.changedrecords=new Array,this.rowschangecallback=null,this.that=this,this.destroy=function(){delete this.self,delete this.grid,delete this.uniqueId,delete this.records,delete this.rows,delete this.columns,delete this.groups,delete this.filters,delete this.updated,delete this.update,delete this.suspend,delete this.pagesize,delete this.pagenum,delete this.totalrows,delete this.totalrecords,delete this.groupable,delete this.loadedrecords,delete this.loadedrootgroups,delete this.loadedgroups,delete this.loadedgroupsByKey,delete this.virtualmode,delete this._cachegrouppages,delete this.source,delete this.changedrecords,delete this.rowschangecallback,delete this.that},this.suspendupdate=function(){this.suspend=!0},this.isupdating=function(){return this.suspend},this.resumeupdate=function(e){this.suspend=!1,null==e&&(e=!0),this.refresh(e)},this.getrecords=function(){return this.records},this.clearrecords=function(){this.recordids=new Array},this.databind=function(t,i){var r=!!t._source,s=null;this.grid&&(this.aggregates=this.grid.showgroupaggregates),r?(s=t,t=t._source):s=new e.jqx.dataAdapter(t,{autoBind:!1});var l,a=function(i){if(i.totalrecords=s.totalrecords,i.virtualmode){var r={startindex:i.pagenum*i.pagesize,endindex:i.pagenum*i.pagesize+i.pagesize};if(null!=t.recordstartindex&&(r.startindex=parseInt(t.recordstartindex)),null!=t.recordendindex?r.endindex=parseInt(t.recordendindex):i.grid.pageable||(r.endindex=r.startindex+100,i.grid.autoheight&&(r.endindex=r.startindex+i.totalrecords)),t.recordendindex||(i.grid.pageable?r={startindex:i.pagenum*i.pagesize,endindex:i.pagenum*i.pagesize+i.pagesize}:(r.endindex=r.startindex+100,i.grid.autoheight&&(r.endindex=r.startindex+i.totalrecords))),r.data=s.records,i.grid.rendergridrows&&i.totalrecords>0){var l=0;if(t.records=i.grid.rendergridrows(r),t.records.length&&(l=t.records.length),t.records&&!t.records[r.startindex]){var a=new Array,o=r.startindex;e.each(t.records,(function(){a[o]=this,o++,l++})),t.records=a}if(0==l&&t.records&&e.each(t.records,(function(){l++})),l>0&&l<r.endindex-r.startindex&&!i.grid.groupable)for(var n=t.records[0],d=0;d<r.endindex-r.startindex-l;d++){var h={};for(var c in n)h[c]="";t.records.push&&t.records.push(h)}}t.records&&0!=i.totalrecords||(t.records=new Array),i.originaldata=t.records,i.records=t.records,i.cachedrecords=t.records}else i.originaldata=s.originaldata,i.records=s.records,i.recordids=s.recordids,i.cachedrecords=s.cachedrecords};if(l=this,s.recordids=[],s.records=new Array,s.cachedrecords=new Array,s.originaldata=new Array,s._options.virtualmode=l.virtualmode,s._options.totalrecords=l.totalrecords,s._options.originaldata=l.originaldata,s._options.recordids=l.recordids,s._options.cachedrecords=new Array,s._options.pagenum=l.pagenum,s._options.pageable=l.pageable,null!=t.type&&(s._options.type=t.type),null!=t.formatdata&&(s._options.formatData=t.formatdata),null!=t.contenttype&&(s._options.contentType=t.contenttype),null!=t.async&&(s._options.async=t.async),null!=t.updaterow&&(s._options.updaterow=t.updaterow),null!=t.addrow&&(s._options.addrow=t.addrow),null!=t.deleterow&&(s._options.deleterow=t.deleterow),0==l.pagesize&&(l.pagesize=10),s._options.pagesize=l.pagesize,this.source=t,void 0!==i);var o=this.that;switch(t.datatype){case"local":case"array":default:if(null==t.localdata&&(t.localdata=[]),null!=t.localdata){s.unbindBindingUpdate(o.grid.element.id),(!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind)&&s.dataBind();var n=function(i){if(null!=i&&""!=i){if(s._changedrecords[0]){var r=new Array;e.each(s._changedrecords,(function(e){var t=this.index,l=this.record;switch(o.grid._updateFromAdapter=!0,i){case"update":var a=o.grid.getrowid(t);return e==s._changedrecords.length-1?o.grid.updaterow(a,l):o.grid.updaterow(a,l,!1),void(o.grid._updateFromAdapter=!1);case"add":return o.grid.addrow(null,l),void(o.grid._updateFromAdapter=!1);case"remove":a=o.grid.getrowid(t);return void r.push(a)}})),r.length>0&&(o.grid.deleterow(r,!1),o.grid._updateFromAdapter=!1)}if("update"==i)return}var l=o.totalrecords;a(o),null===t.localdata.notifier&&"observableArray"==t.localdata.name&&(t.localdata.notifier=function(i){if(!o._updating){o._updating=!0;var r=o.grid.getrowid(i.index);switch(i.type){case"add":var l=e.extend({},i.object[i.index]),a=s.getid(t.id,l,i.index);0===i.index?o.grid.addrow(a,l,"first"):o.grid.addrow(a,l);break;case"delete":o.grid.deleterow(r);break;case"update":if(i.path&&i.path.split(".").length>1){var n=i.path.split(".");o.grid.setcellvalue(i.index,n[n.length-1],i.newValue)}else{l=e.extend({},i.object[i.index]);o.grid.updaterow(r,l)}}o._updating=!1}}),"updateData"==i?(o.refresh(),o.grid._updateGridData()):(t.recordstartindex&&o.virtualmode?o.updateview(t.recordstartindex,t.recordstartindex+o.pagesize):o.refresh(),o.update(l!=o.totalrecords))};n(),s.bindBindingUpdate(o.grid.element.id,n)}break;case"json":case"jsonp":case"xml":case"xhtml":case"script":case"text":case"csv":case"tab":if(null!=t.localdata){s.unbindBindingUpdate(o.grid.element.id),(!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind)&&s.dataBind();n=function(e){var i=o.totalrecords;a(o),"updateData"==e?(o.refresh(),o.grid._updateGridData()):(t.recordstartindex&&o.virtualmode?o.updateview(t.recordstartindex,t.recordstartindex+o.pagesize):o.refresh(),o.update(i!=o.totalrecords))};return n(),void s.bindBindingUpdate(o.grid.element.id,n)}for(var d=[],h=0,c={},u=0;u<o.filters.length;u++){var g=o.filters[u].datafield,p=o.filters[u].filter;if(p.getfilters){if(!g)for(var m=0;m<o.grid.columns.length;m++)o.grid.columns[m].filter===p&&(g=o.grid.columns[m].datafield||o.grid.columns[m].dataField);var w=p.getfilters();c[g+"operator"]=p.operator;for(var f=0;f<w.length;f++){w[f].datafield=g;var v=w[f].value;if("datefilter"==w[f].type)if(w[f].value&&w[f].value.toLocaleString){var b=o.grid.getcolumn(w[f].datafield);if(b&&b.cellsformat){var x=o.grid.source.formatDate(w[f].value,b.cellsformat,o.grid.gridlocalization);c["filtervalue"+h]=x||w[f].value.toLocaleString()}else c["filtervalue"+h]=v.toString()}else c["filtervalue"+h]=v.toString();else c["filtervalue"+h]=v.toString(),w[f].data&&(c["filterid"+h]=w[f].data.toString()),w[f].id&&(c["filterid"+h]=w[f].id.toString());c["filtercondition"+h]=w[f].condition,c["filteroperator"+h]=w[f].operator,c["filterdatafield"+h]=g;var y={label:v.toString()};w[f].data&&(y.value=w[f].data.toString()),w[f].id?y.value=w[f].id.toString():y.value=v.toString(),y.condition=w[f].condition,y.operator=0==w[f].operator?"and":"or",y.field=g,y.type=w[f].type;var _=!1;if(d.length>0)for(var q=0;q<d.length;q++){var j=d[q];if(j.field==g){j.filters.push(y),_=!0;break}}_||(d.push({field:g,filters:[]}),d[d.length-1].filters.push(y)),h++}}}c.filterGroups=d,c.filterscount=h,c.groupscount=o.groups.length;for(u=0;u<o.groups.length;u++)c["group"+u]=o.groups[u];null==t.recordstartindex&&(t.recordstartindex=0),null!=t.recordendindex&&0!=t.recordendindex||(o.grid.height&&-1==o.grid.height.toString().indexOf("%")?(t.recordendindex=parseInt(o.grid.height)/o.grid.rowsheight,t.recordendindex+=2,t.recordendindex=parseInt(t.recordendindex)):(t.recordendindex=e(window).height()/o.grid.rowsheight,t.recordendindex=parseInt(t.recordendindex)),o.pageable&&(t.recordendindex=o.pagesize)),o.pageable&&(t.recordstartindex=o.pagenum*o.pagesize,t.recordendindex=(o.pagenum+1)*o.pagesize),e.extend(c,{sortdatafield:o.sortfield,sortorder:o.sortfielddirection,pagenum:o.pagenum,pagesize:o.grid.pagesize,recordstartindex:t.recordstartindex,recordendindex:t.recordendindex});var S=s._options.data;s._options.data?e.extend(s._options.data,c):(t.data&&e.extend(c,t.data),s._options.data=c);n=function(){var i=function(){var e=o.totalrecords;a(o),t.recordstartindex&&o.virtualmode?o.updateview(t.recordstartindex,t.recordstartindex+o.pagesize):o.refresh(),o.update(e!=o.totalrecords)};if(e.jqx.browser.msie&&e.jqx.browser.version<9)try{i()}catch(e){}else i()};s.unbindDownloadComplete(o.grid.element.id),s.bindDownloadComplete(o.grid.element.id,n),!o.grid.autobind&&o.grid.isInitialized||o.grid.autobind?s.dataBind():o.grid.isInitialized||o.grid.autobind||n(),s._options.data=S}},this.getid=function(t,i,r){if(e(t,i).length>0)return e(t,i).text();if(t&&t.toString().length>0){var s=e(i).attr(t);if(null!=s&&s.toString().length>0)return s}return r},this.getvaluebytype=function(t,i){var r=t;if("date"==i.type){var s=new Date(t);null==(t=("NaN"==s.toString()||"Invalid Date"==s.toString())&&e.jqx.dataFormat?e.jqx.dataFormat.tryparsedate(t):s)&&(t=r)}else if("float"==i.type){t=parseFloat(t);isNaN(t)&&(t=r)}else if("int"==i.type){t=parseInt(t);isNaN(t)&&(t=r)}else"bool"==i.type&&(null!=t&&("false"==t.toLowerCase()?t=!1:"true"==t.toLowerCase()&&(t=!0)),t=1==t||0!=t&&"");return t},this.setpaging=function(e){null!=e.pageSize&&(this.pagesize=e.pageSize),null!=e.pageNum&&(this.pagenum=Math.min(e.pageNum,Math.ceil(this.totalrows/this.pagesize))),this.refresh()},this.getpagingdetails=function(){return{pageSize:this.pagesize,pageNum:this.pagenum,totalrows:this.totalrows}},this._clearcaches=function(){this.sortcache={},this.sortdata=null,this.changedrecords=new Array,this.records=new Array,this.rows=new Array,this.cacheddata=new Array,this.originaldata=new Array,this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid=new Array,this.cachedrecords=new Array,this.recordids=new Array},this.addfilter=function(e,t){for(var i=-1,r=0;r<this.filters.length;r++)if(this.filters[r].datafield==e){i=r;break}-1==i?this.filters[this.filters.length]={filter:t,datafield:e}:this.filters[i]={filter:t,datafield:e}},this.removefilter=function(e){for(var t=0;t<this.filters.length;t++)if(this.filters[t].datafield==e){this.filters.splice(t,1);break}},this.getItemFromIndex=function(e){return this.records[e]},this.updaterow=function(e,t,i){if(!(this.filters&&this.filters.length>0&&!this.virtualmode)&&null!=t&&null!=e){t.uid=e,t[this.source.id]||(t[this.source.id]=t.uid);var r=this.recordsbyid["id"+e];return-1!=(l=this.records.indexOf(r))&&(this.records[l]=t,this.cachedrecords&&(this.cachedrecords[l]=t),1!=i&&null!=i||this.refresh(),this.changedrecords[t.uid]={Type:"Update",OldData:r,Data:t},!0)}if(this.filters&&this.filters.length>0){for(var s=this.cachedrecords,l=(r=null,-1),a=0;a<s.length;a++)if(s[a].uid==e){r=s[a],l=a;break}if(r){var o=this.that;for(var n in t)o.cachedrecords[l][n]=t[n];return 1!=i&&null!=i||this.refresh(),!0}}return!1},this.addrow=function(t,i,r,s){if(null!=i){if(e.isEmptyObject(i)&&this.source&&this.source.datafields&&e.each(this.source.datafields,(function(){var e="";"number"==this.type&&(e=null),"date"==this.type&&(e=null),"bool"!=this.type&&"boolean"!=this.type||(e=!1),i[this.name]=e})),!t||this.recordsbyid["id"+t]){i.uid=this.getid(this.source.id,i,this.totalrecords);for(var l=this.recordsbyid["id"+i.uid];null!=l;){var a=Math.floor(1e4*Math.random()).toString();i.uid=a,l=this.recordsbyid["id"+a]}}else i.uid=t;return i[this.source.id]||null!=this.source.id&&(i[this.source.id]=i.uid),i.boundindex=this.records.length,"last"==r?this.records.push(i):"number"==typeof r&&isFinite(r)?this.records.splice(r,0,i):this.records.splice(0,0,i),this.filters&&this.filters.length>0&&("last"==r?this.cachedrecords.push(i):"number"==typeof r&&isFinite(r)?this.cachedrecords.splice(r,0,i):this.cachedrecords.splice(0,0,i)),this.totalrecords++,this.virtualmode&&(this.source.totalrecords=this.totalrecords),1!=s&&null!=s||this.refresh(),this.changedrecords[i.uid]={Type:"New",Data:i},!0}return!1},this.deleterow=function(e,t){if(null!=e){var i=this.filters&&this.filters.length>0;if(this.recordsbyid["id"+e]&&!i){var r=this.recordsbyid["id"+e],s=this.records.indexOf(r);if(this.grid&&this.grid.sortable&&"many"==this.grid.sortmode)for(var l=0;l<this.records.length;l++)if(this.records[l].boundindex===r.boundindex){s=l;break}return this.changedrecords[e]={Type:"Delete",Data:this.records[s]},this.records.splice(s,1),this.totalrecords--,this.virtualmode&&(this.source.totalrecords=this.totalrecords),1!=t&&null!=t||this.refresh(),!0}if(this.filters&&this.filters.length>0){var a=this.cachedrecords;for(r=null,s=-1,l=0;l<a.length;l++)if(a[l].uid==e){r=a[l],s=l;break}if(r)return this.cachedrecords.splice(s,1),1!=t&&null!=t||(this.totalrecords=0,this.records=this.cachedrecords,this.refresh()),!0}return!1}return!1},this.reload=function(t,i,r,s,l,a,o){var n=this.that,d=new Array,h=t,c=i,u=r,g=s,p=c.length,m=0;if(this.columns=[],this.bounditems=new Array,this.loadedrecords=new Array,this.loadedrootgroups=new Array,this.loadedgroups=new Array,this.loadedgroupsByKey=new Array,this._cachegrouppages=new Array,this.recordsbyid={},0==this.totalrecords){Object.size=function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i};var w=Object.size(h);this.totalrecords=w,e.each(this.records,(function(t){var i=0;return e.each(this,(function(e,t){n.columns[i++]=e})),!1}))}if(this.virtualmode){if(this.pageable)return void this.updateview();a=0;if(!this.groupable)return void this.updateview();o=this.totalrecords}else a=0,o=this.totalrecords;if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){var f=a;f=this.loadgrouprecords(0,a,o,u,0,g,c,p,d)}else m=this.loadflatrecords(a,o,u,0,g,c,p,d);return p>0&&c.splice(0,p-0),this.groups.length>0&&this.groupable?this.totalrows=f:this.totalrows=m,d},this.loadflatrecords=function(t,i,r,s,l,a,o,n){var d=this.that,h=t,c=t;i=Math.min(i,this.totalrecords);for(var u=null!=this.sortdata,g=(this.source.id&&("local"==this.source.datatype||"array"==this.source.datatype||this.source.datatype),u?this.sortdata:this.records),p=t;p<i;p++){var m={};if(u){w=(m=e.extend({},g[p].value))[d.uniqueId];m.boundindex=g[p].index,null==m.uid&&(m.uid=d.getid(d.source.id,m,m.boundindex)),d.recordsbyid["id"+m.uid]=g[p].value,d.loadedrecords[h]=m,m.uniqueid=d.generatekey(),d.bounditems[m.boundindex]=m}else{var w=(m=new Object(g[p]))[d.uniqueId];m.boundindex=h,d.loadedrecords[h]=m,null==m.uid&&(m.uid=d.getid(d.source.id,m,h)),d.recordsbyid["id"+m.uid]=g[p],m.uniqueid=d.generatekey(),d.bounditems[this.bounditems.length]=m}(s>=o||w!=a[s][d.uniqueId]||l&&l[w])&&(n[n.length]=s),a[s]=m,s++,m.visibleindex=c,c++,h++}if(d.grid.summaryrows){var f=h;e.each(d.grid.summaryrows,(function(){var t=e.extend({},this);t.boundindex=i++,d.loadedrecords[f]=t,t.uniqueid=d.generatekey(),d.bounditems[d.bounditems.length]=t,a[s]=t,s++,t.visibleindex=c,c++,f++}))}return c},this.updateview=function(e,t){var i=this.that,r=this.pagesize*this.pagenum,s=0,l=new Array,a=this.filters,o=this.updated,n=l.length;if(this.pageable){if(this.virtualmode)if(this.groupable&&0!=this.groups.length){if(this.groupable&&this.groups.length>0&&this.loadgrouprecords){if(null!=this._cachegrouppages[this.pagenum+"_"+this.pagesize])return this.rows=this._cachegrouppages[this.pagenum+"_"+this.pagesize],void(this.totalrows=this.rows.length);var d=this.pagesize*(1+this.pagenum);return d>this.totalrecords&&(d=this.totalrecords),this.loadgrouprecords(0,this.pagesize*this.pagenum,d,a,s,o,l,n,[]),this._cachegrouppages[this.pagenum+"_"+this.pagesize]=this.rows,void(this.totalrows=this.rows.length)}}else this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),a,s,o,l,n,[]),this.totalrows=l.length}else if(this.virtualmode&&(!this.groupable||0==this.groups.length)){var h=this.pagesize;0==h&&(h=Math.min(100,this.totalrecords));this.pagenum;if(0==this.loadedrecords.length&&0,null!=e&&null!=t?this.loadflatrecords(e,t,a,s,o,l,n,[]):this.loadflatrecords(this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum),a,s,o,l,n,[]),this.totalrows=this.loadedrecords.length,this.rows=l,l.length>=h)return}if(this.groupable&&this.pageable&&this.groups.length>0&&this._updategroupsinpage)l=this._updategroupsinpage(i,a,r,s,n,this.pagesize*this.pagenum,this.pagesize*(1+this.pagenum));else for(var c=this.pagesize*this.pagenum;c<this.pagesize*(1+this.pagenum);c++){null!=(g=c<this.loadedrecords.length?this.loadedrecords[c]:null)&&((!this.pagesize||r>=this.pagesize*this.pagenum&&r<=this.pagesize*(this.pagenum+1))&&(l[s]=g,s++),r++)}if((0==l.length||l.length<this.pagesize)&&!this.pageable&&this.virtualmode){s=l.length;var u=l.length;for(c=this.pagesize*this.pagenum;c<this.pagesize*(1+this.pagenum)-u;c++){var g;(g={}).boundindex=c+u,g.visibleindex=c+u,g.uniqueid=i.generatekey(),g.empty=!0,i.bounditems[c+u]=g,l[s]=g,s++}}this.rows=l},this.generatekey=function(){var e=function(){return 16*(1+Math.random())|0};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},this.reloaddata=function(){this.reload(this.records,this.rows,this.filter,this.updated,!0)},this.refresh=function(t){if(!this.suspend){null==t&&(t=!0);var i=this.rows.length,r=this.totalrows;if(this.filters.length>0&&!this.virtualmode){var s="",l=this.cachedrecords.length,a=new Array;this.totalrecords=0;var o=this.cachedrecords;this._dataIndexToBoundIndex=new Array;var n=this.filters.length;if(null!=this.source&&null!=this.source.filter&&null!=this.source.localdata){var d=this.source.filter(this.filters,o,l);null==d&&(d=new Array);for(var h=0;h<l;h++){var c=o[h];(u=d.indexOf(c)>=0)?(a[a.length]=e.extend({dataindex:h},c),this._dataIndexToBoundIndex[h]={boundindex:a.length-1}):this._dataIndexToBoundIndex[h]=null}this.records=a}else if(null==this.source.filter||null==this.source.filter){for(h=0;h<l;h++){c=o[h];for(var u=void 0,g=0;g<n;g++){s=this.filters[g].filter;var p=c[this.filters[g].datafield],m=!s||!s.evaluate||s.evaluate(p);if(this.grid.filter){var w=this.grid.filter(p,c,this.filters[g].datafield,s,m);void 0!==w&&(m=w)}u=null==u?m:"or"==s.operator?u||m:u&&m}u?(a[a.length]=e.extend({dataindex:h},c),this._dataIndexToBoundIndex[h]={boundindex:a.length-1}):this._dataIndexToBoundIndex[h]=null}this.records=a}if(this.sortdata){if(!this.grid||"many"===this.grid.sortmode){for(var f=this.grid.getsortcolumns(),v=0;v<f.length;v++){var b=(_=f[v]).dataField;this.grid.sortby(b,_.ascending,null)}return}var x=this.sortfield;if(this.sortcache[x]){this.sortdata=null;var y=this.sortcache[x].direction;return this.sortcache[x]=null,void this.sortby(this.sortfield,y)}}}else if(0==this.filters.length&&!this.virtualmode&&this.cachedrecords){this.totalrecords=0;o=this.cachedrecords;if(this.records=o,this.sortdata){if(!this.grid||"many"===this.grid.sortmode){for(f=this.grid.getsortcolumns(),v=0;v<f.length;v++){var _;b=(_=f[v]).dataField;this.grid.sortby(b,_.ascending,null)}return}x=this.sortfield;if(this.sortcache[x]){this.sortdata=null;y=this.sortcache[x].direction;return this.sortcache[x]=null,void this.sortby(this.sortfield,y)}}}var q=this.reload(this.records,this.rows,this.filter,this.updated,t);if(this.updated=null,null!=this.rowschangecallback){var j=this.rows;r!=this.totalrows&&this.rowschangecallback({type:"PagingChanged",data:this.getpagingdetails()}),i!=j.length&&this.rowschangecallback({type:"RowsCountChanged",data:{previous:i,current:j.length}}),(q.length>0||i!=j.length)&&this.rowschangecallback({type:"RowsChanged",data:{previous:i,current:j.length,diff:q}})}}},this}}(jqxBaseFramework);